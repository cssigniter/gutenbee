(()=>{var __webpack_modules__={59074:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: external \"jQuery\"\nvar external_jQuery_ = __webpack_require__(19567);\nvar external_jQuery_default = /*#__PURE__*/__webpack_require__.n(external_jQuery_);\n;// CONCATENATED MODULE: ./src/components/controls/background-controls/script.js\n\nexternal_jQuery_default()($ => {\n  var $window = $(window);\n  $.fn.gutenbeeParallax = function (opts) {\n    var options = $.extend({}, {\n      speed: null,\n      direction: null\n    }, opts);\n    var $elements = this.each(function () {\n      var $this = $(this);\n      var speed = options.speed || $this.data('parallax-speed');\n      $this.css({\n        height: 100 + speed * 100 + '%'\n      });\n    });\n    function update() {\n      var wheight = $window.height();\n      var wscroll = $window.scrollTop();\n      $elements.each(function () {\n        var $this = $(this);\n        var $parent = $this.parent();\n        var elHeight = $parent.outerHeight();\n        var heightDelta = $this.outerHeight() - elHeight;\n        var elTop = $parent.offset().top + elHeight;\n        var scrollPercentage = (elTop - wscroll) / (wheight + elHeight);\n        var ypos = (scrollPercentage - 1) * heightDelta;\n        $this.css({\n          transform: 'translateY(' + ypos + 'px)'\n        });\n      });\n    }\n    var requestParallaxUpdate = function () {\n      window.requestAnimationFrame(update);\n    };\n    $window.on('scroll', requestParallaxUpdate).on('resize', requestParallaxUpdate);\n    update();\n    $.fn.gutenbeeParallax.destroy = function () {\n      $elements.each(function () {\n        var $this = $(this);\n        $this.css({\n          height: '100%',\n          transform: 'none'\n        });\n      });\n      $window.off('scroll', requestParallaxUpdate).off('resize', requestParallaxUpdate);\n    };\n    return $elements;\n  };\n  $('.gutenbee-parallax').gutenbeeParallax();\n});\n// EXTERNAL MODULE: ./node_modules/slick-carousel/slick/slick.js\nvar slick = __webpack_require__(29154);\n;// CONCATENATED MODULE: ./src/blocks/slideshow/script.js\n\n\nexternal_jQuery_default()(window).on('load', () => {\n  const $slideshow = external_jQuery_default()('.wp-block-gutenbee-slideshow');\n  $slideshow.each(function () {\n    const $this = external_jQuery_default()(this);\n    $this.slick({\n      arrows: $this.data('arrows'),\n      dots: $this.data('dots'),\n      autoplay: $this.data('autoplay'),\n      fade: $this.data('fade'),\n      infinite: $this.data('infinite'),\n      speed: $this.data('speed'),\n      autoplaySpeed: $this.data('autoplay-speed'),\n      slidesToScroll: $this.data('slides-to-scroll'),\n      slidesToShow: $this.data('slides-to-show'),\n      pauseOnHover: $this.data('pause-on-hover'),\n      slide: '.gutenbee-slideshow-item',\n      prevArrow: '<button class=\"slick-prev\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 512\"><path d=\"M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z\"/></svg></button>',\n      nextArrow: '<button class=\"slick-next\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 192 512\"><path d=\"M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z\"/></svg></button>',\n      customPaging: () => {\n        return external_jQuery_default()('<button type=\"button\" />').css({\n          backgroundColor: $this.data('dots-color')\n        });\n      }\n    });\n  });\n});\n// EXTERNAL MODULE: ./node_modules/countup/dist/countUp.min.js\nvar countUp_min = __webpack_require__(46281);\nvar countUp_min_default = /*#__PURE__*/__webpack_require__.n(countUp_min);\n;// CONCATENATED MODULE: ./src/util/isElementInViewport.js\n/**\n * Checks if element is in viewport.\n *\n * @param {HTMLElement} el The element.\n * @param {number} offset The offset in pixels.\n * @returns {boolean}\n */\nconst isElementInViewport = (el, offset = 0) => {\n  const scroll = window.scrollY || window.pageYOffset;\n  const boundsTop = el.getBoundingClientRect().top + scroll;\n  const viewport = {\n    top: scroll,\n    bottom: scroll + window.innerHeight\n  };\n  const bounds = {\n    top: boundsTop + offset,\n    bottom: boundsTop + el.clientHeight + offset\n  };\n  return bounds.bottom >= viewport.top && bounds.bottom <= viewport.bottom || bounds.top <= viewport.bottom && bounds.top >= viewport.top;\n};\n/* harmony default export */ const util_isElementInViewport = (isElementInViewport);\n;// CONCATENATED MODULE: ./src/blocks/countup/script.js\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const elements = document.getElementsByClassName('wp-block-gutenbee-countup-number');\n  const countupInit = element => {\n    const separator = element.dataset.separator;\n    const options = {\n      useGrouping: !!separator,\n      separator,\n      prefix: element.dataset.prefix,\n      suffix: element.dataset.suffix\n    };\n    const countup = new (countUp_min_default())(element, element.dataset.start, element.dataset.end, 0, element.dataset.animationDuration, options);\n    if (!countup.error) {\n      countup.start();\n      element.dataset.started = true;\n    }\n  };\n  [...elements].forEach(element => {\n    if (element.dataset.inviewport === 'true') {\n      const handler = () => window.requestAnimationFrame(() => {\n        if (util_isElementInViewport(element, 100) && !element.dataset.started) {\n          countupInit(element);\n        }\n      });\n      handler();\n      window.addEventListener('scroll', handler);\n    } else {\n      countupInit(element);\n    }\n  });\n});\n// EXTERNAL MODULE: ./node_modules/justifiedGallery/dist/js/jquery.justifiedGallery.js\nvar jquery_justifiedGallery = __webpack_require__(26857);\n;// CONCATENATED MODULE: ./src/blocks/justified-gallery/script.js\n\n\nexternal_jQuery_default()($ => {\n  const $justifiedGallery = $('.wp-block-gutenbee-gallery-justified');\n  $justifiedGallery.each(function () {\n    const $this = $(this);\n    const $content = $this.find('.wp-block-gutenbee-gallery-content');\n    const $type = $this.data('gallery-type');\n    if ($type !== 'justified') {\n      return;\n    }\n    $content.justifiedGallery({\n      rowHeight: $this.data('row-height'),\n      margins: $this.data('margins'),\n      lastRow: $this.data('last-row'),\n      randomize: $this.data('randomize')\n    });\n  });\n});\n;// CONCATENATED MODULE: external {\"window\":[\"wp\",\"dom\"]}\nconst external_window_wp_dom_namespaceObject = window[\"wp\"][\"dom\"];\n;// CONCATENATED MODULE: ./src/blocks/google-maps/script.js\n\n\nexternal_jQuery_default()($ => {\n  const google = window.google;\n  if (typeof google === 'undefined') {\n    return;\n  }\n  const $maps = $('.wp-block-gutenbee-google-maps > div, .wp-block-gutenbee-google-maps');\n  $maps.each(function () {\n    const $this = $(this);\n    const location = {\n      lat: parseFloat($this.data('latitude')),\n      lng: parseFloat($this.data('longitude'))\n    };\n    const info = $this.data('info-window');\n    if (!location.lat || !location.lng) {\n      return;\n    }\n    const map = new google.maps.Map($this.get(0), {\n      zoom: $this.data('zoom'),\n      center: location,\n      scrollwheel: !$this.data('prevent-scroll'),\n      styles: $this.data('map-style')\n    });\n    const marker = new google.maps.Marker({\n      position: location,\n      icon: $this.data('marker-icon'),\n      map\n    });\n    const infoWindow = new google.maps.InfoWindow({\n      content: '<div class=\"wp-block-gutenbee-google-maps-info-window\">' + (info ? (0,external_window_wp_dom_namespaceObject.safeHTML)(String(info)) : '') + '</div>',\n      maxWidth: 350\n    });\n    if (info) {\n      marker.addListener('click', () => {\n        infoWindow.open(map, marker);\n      });\n    }\n  });\n});\n;// CONCATENATED MODULE: ./src/util/CountdownTimer.js\nclass CountdownTimer {\n  /**\n   * @constructor\n   *\n   * @param {HTMLElement} element HTML Element to attach the timer on\n   * @param {string} endTime The end time\n   */\n  constructor(element, endTime) {\n    this.clock = element;\n    this.updateClock(endTime);\n    this.interval = setInterval(() => {\n      this.updateClock(endTime);\n    }, 1000);\n  }\n\n  /**\n   * Calculates remaining time from the present moment to `endDate`\n   *\n   * @static\n   * @param {string} endTime The end time\n   * @returns {{total: number, days: number, hours: number, minutes: number, seconds: number}} Total time remaining\n   */\n  static getRemainingTime = endTime => {\n    const t = Date.parse(endTime) - Date.parse(new Date());\n    const seconds = Math.floor(t / 1000 % 60);\n    const minutes = Math.floor(t / 1000 / 60 % 60);\n    const hours = Math.floor(t / (1000 * 60 * 60) % 24);\n    const days = Math.floor(t / (1000 * 60 * 60 * 24));\n    return {\n      total: t,\n      days: days <= 0 ? 0 : days,\n      hours: hours <= 0 ? 0 : hours,\n      minutes: minutes <= 0 ? 0 : minutes,\n      seconds: seconds <= 0 ? 0 : seconds\n    };\n  };\n\n  /**\n   * Updates the HTML element\n   *\n   * @param {string} endTime The end time\n   * @returns {undefined}\n   * @returns {undefined}\n   */\n  updateClock(endTime) {\n    const daysSpan = this.clock.querySelector('.gutenbee-countdown-days');\n    const hoursSpan = this.clock.querySelector('.gutenbee-countdown-hours');\n    const minutesSpan = this.clock.querySelector('.gutenbee-countdown-minutes');\n    const secondsSpan = this.clock.querySelector('.gutenbee-countdown-seconds');\n    const t = CountdownTimer.getRemainingTime(endTime);\n    if (daysSpan) {\n      daysSpan.innerHTML = t.days;\n    }\n    if (hoursSpan) {\n      hoursSpan.innerHTML = `0${t.hours}`.slice(-2);\n    }\n    if (minutesSpan) {\n      minutesSpan.innerHTML = `0${t.minutes}`.slice(-2);\n    }\n    if (secondsSpan) {\n      secondsSpan.innerHTML = `0${t.seconds}`.slice(-2);\n    }\n    if (t.total <= 0) {\n      this.stop();\n    }\n  }\n\n  /**\n   * Stops the countdown\n   *\n   * @returns {undefined}\n   */\n  stop() {\n    clearInterval(this.interval);\n  }\n\n  /**\n   * \"Destroys\" the instance\n   *\n   * @returns {undefined}\n   */\n  destroy() {\n    this.stop();\n    this.clock = null;\n    this.interval = null;\n  }\n}\n/* harmony default export */ const util_CountdownTimer = (CountdownTimer);\n;// CONCATENATED MODULE: ./src/blocks/countdown/script.js\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const countdown = document.querySelectorAll('.wp-block-gutenbee-countdown');\n  [...countdown].forEach(element => {\n    const date = element.dataset.date || '1900-01-01T00:00:00';\n\n    // eslint-disable-next-line no-new\n    new util_CountdownTimer(element, date);\n  });\n});\n// EXTERNAL MODULE: ./node_modules/zurb-twentytwenty/js/jquery.event.move.js\nvar jquery_event_move = __webpack_require__(7124);\n// EXTERNAL MODULE: ./node_modules/zurb-twentytwenty/js/jquery.twentytwenty.js\nvar jquery_twentytwenty = __webpack_require__(5618);\n;// CONCATENATED MODULE: ./src/blocks/image-comparison/script.js\n\n\n\nexternal_jQuery_default()(window).on('load', () => {\n  external_jQuery_default()('.wp-block-gutenbee-comparison-wrap').each(function () {\n    const $this = external_jQuery_default()(this);\n    $this.twentytwenty({\n      default_offset_pct: $this.data('offset') / 100,\n      before_label: window.gutenbeeStrings.image_comparison_before_label,\n      after_label: window.gutenbeeStrings.image_comparison_after_label\n    });\n  });\n});\n;// CONCATENATED MODULE: ./src/blocks/accordion/script.js\n\nexternal_jQuery_default()($ => {\n  const expandedClass = 'wp-block-gutenbee-accordion-item-expanded';\n  const $titles = $('.wp-block-gutenbee-accordion-item-title');\n  const $defaultExpanded = $(`.${expandedClass}`);\n  $defaultExpanded.find('.wp-block-gutenbee-accordion-item-content-wrap').slideDown(350);\n  $titles.on('click', function () {\n    const $this = $(this);\n    const $accordion = $this.parents('.wp-block-gutenbee-accordion');\n    const $item = $this.parent('.wp-block-gutenbee-accordion-item');\n    const $content = $item.find('.wp-block-gutenbee-accordion-item-content-wrap');\n    const collapseOthers = $accordion.data('collapse-others');\n    if ($item.hasClass(expandedClass)) {\n      $content.slideUp(350);\n      $item.removeClass(expandedClass);\n    } else {\n      if (collapseOthers) {\n        $item.siblings().removeClass(expandedClass).find('.wp-block-gutenbee-accordion-item-content-wrap').slideUp(350);\n      }\n      $content.slideDown(350);\n      $item.addClass(expandedClass);\n    }\n  });\n});\n;// CONCATENATED MODULE: ./src/blocks/tabs/script.js\n\nexternal_jQuery_default()($ => {\n  const prefix = 'wp-block-gutenbee-tabs';\n  const $tabs = $(`.${prefix}`);\n  $tabs.each(function () {\n    const $this = $(this);\n    const $titles = $this.find(`.${prefix}-nav-item`);\n    const $tabContents = $this.find(`.${prefix}-tab-content`);\n    $titles.on('click', function (event) {\n      event.preventDefault();\n      const $title = $(this);\n      const index = $title.index();\n      $title.addClass(`${prefix}-nav-item-active`).siblings().removeClass(`${prefix}-nav-item-active`);\n      $tabContents.hide();\n      $tabContents.eq(index).fadeIn('fast');\n    });\n  });\n});\n;// CONCATENATED MODULE: ./src/util/video/providers.js\n/**\n * Checks whether the YouTube API is loaded.\n *\n * @returns {boolean}\n */\nconst youTubeApiLoaded = () => {\n  return typeof window.YT?.Player !== 'undefined';\n};\n\n/**\n * Checks whether the Vimeo API is loaded.\n *\n * @returns {boolean}\n */\nconst vimeoApiLoaded = () => {\n  return typeof window.Vimeo?.Player !== 'undefined';\n};\n\n/**\n * Loads the YouTube API if it's not already loaded.\n *\n * @returns {Promise<boolean>}\n */\nconst maybeLoadYouTubeApi = () => {\n  if (!document.getElementById('gutenbee-youtube-api-script') && !youTubeApiLoaded()) {\n    const tag = document.createElement('script');\n    tag.id = 'gutenbee-youtube-api-script';\n    tag.src = 'https://www.youtube.com/player_api';\n    const firstScriptTag = document.getElementsByTagName('script')[0];\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n  }\n  const apiLoaded = resolve => {\n    if (!youTubeApiLoaded()) {\n      setTimeout(() => apiLoaded(resolve), 350);\n      return;\n    }\n    resolve(true);\n  };\n  return new Promise((resolve, reject) => {\n    apiLoaded(resolve, reject);\n  });\n};\n\n/**\n * Loads the Vimeo API if it's not already loaded.\n *\n * @returns {Promise<boolean>}\n */\nconst maybeLoadVimeoApi = async () => {\n  if (!document.getElementById('gutenbee-vimeo-api-script') && !vimeoApiLoaded()) {\n    const tag = document.createElement('script');\n    tag.id = 'gutenbee-vimeo-api-script';\n    tag.src = 'https://player.vimeo.com/api/player.js';\n    const firstScriptTag = document.getElementsByTagName('script')[0];\n    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n  }\n  const apiLoaded = resolve => {\n    if (!vimeoApiLoaded()) {\n      setTimeout(() => apiLoaded(resolve), 350);\n      return;\n    }\n    resolve(true);\n  };\n  return new Promise((resolve, reject) => {\n    apiLoaded(resolve, reject);\n  });\n};\n\n/**\n * Matches a particular array of patterns on a string.\n *\n * @param {string} str The string to be matched.\n * @param {Array} patterns An array of URL patterns to match.\n * @returns {boolean} Whether a pattern was matched.\n */\nconst matchesPatterns = (str, patterns = []) => patterns.some(pattern => str.match(pattern));\n\n/**\n * YouTube URL patterns.\n *\n * @type {RegExp[]}\n */\nconst youTubeUrlPatterns = (/* unused pure expression or super */ null && ([/^https?:\\/\\/((m|www)\\.)?youtube\\.com\\/.+/i, /^https?:\\/\\/youtu\\.be\\/.+/i]));\n\n/**\n * Vimeo URL patterns.\n *\n * @type {RegExp[]}\n */\nconst vimeoUrlPatterns = (/* unused pure expression or super */ null && ([/^https?:\\/\\/(www\\.)?vimeo\\.com\\/.+/i]));\n\n/**\n * Self hosted video URL patterns.\n *\n * @type {RegExp[]}\n */\nconst selfHostedVideoUrlPatterns = (/* unused pure expression or super */ null && ([/([a-zA-Z0-9\\s_\\\\.\\-\\(\\):])+(.webm|.mkv|.avi|.mov|.mp4|.ogg)/i]));\n\n/**\n * Returns the Vimeo video ID based on the URL provided.\n * @see https://gist.github.com/takien/4077195#gistcomment-3410228\n *\n * @param {string} url The YouTube video URL.\n * @returns {string}\n */\nconst getYouTubeIdByUrl = url => {\n  const arr = url.split(/(vi\\/|v%3D|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/);\n  return undefined !== arr[2] ? arr[2].split(/[^\\w-]/i)[0] : arr[0];\n};\n\n/**\n * Returns the Vimeo video ID based on the URL provided.\n *\n * @param {string} url Vimeo video URL.\n * @returns {string} The video ID.\n */\nconst getVimeoIdByUrl = url => {\n  let id = null;\n  const request = new XMLHttpRequest();\n  request.open('GET', 'https://vimeo.com/api/oembed.json?url=' + url, false);\n  request.onload = function () {\n    if (request.status >= 200 && request.status < 400) {\n      const response = JSON.parse(request.responseText);\n      if (response.video_id) {\n        id = response.video_id;\n      }\n    }\n  };\n  request.send();\n  return id;\n};\n\n/**\n * Attempts to extract the video start time from a YouTube URL.\n *\n * @param url The YouTube URL.\n * @returns {string}\n */\nconst getYouTubeStartTimeFromUrl = url => {\n  if (!url) {\n    return;\n  }\n  const params = new URL(url).searchParams;\n  const time = params.get('t');\n  return time;\n};\n\n/**\n * Attempts to extract the video start time from a Vimeo URL.\n *\n * @param url The Vimeo URL.\n * @returns {string}\n */\nconst getVimeoStartTimeFromUrl = url => {\n  if (!url) {\n    return;\n  }\n  // Vimeo URLs are in the format of https://vimeo.com/546117812#t=10s\n  // so we convert the hash to a query param\n  const replaced = url.replace('#', '?');\n  const params = new URL(replaced).searchParams;\n  const time = params.get('t');\n  return time?.replace('s', '') ?? undefined;\n};\n\n/**\n * Takes in a URL and returns the matched provider's info (if any).\n *\n * @param {string} url The URL.\n * @returns {{provider: string, id: string}|null|{provider: string, id: null}}\n */\nconst getVideoProviderInfoByUrl = (url = '') => {\n  if (!url) {\n    return null;\n  }\n  if (matchesPatterns(url, youTubeUrlPatterns)) {\n    return {\n      id: getYouTubeIdByUrl(url),\n      provider: 'youtube',\n      url,\n      start: getYouTubeStartTimeFromUrl(url)\n    };\n  }\n  if (matchesPatterns(url, vimeoUrlPatterns)) {\n    return {\n      id: getVimeoIdByUrl(url),\n      provider: 'vimeo',\n      url,\n      start: getVimeoStartTimeFromUrl(url)\n    };\n  }\n  if (matchesPatterns(url, selfHostedVideoUrlPatterns)) {\n    return {\n      id: url,\n      provider: 'self',\n      url\n    };\n  }\n  return {\n    id: null,\n    provider: 'unsupported'\n  };\n};\n;// CONCATENATED MODULE: ./src/blocks/video-embed/script.js\n\n\nexternal_jQuery_default()($ => {\n  const $videoEmbed = $('.gutenbee-video-embed');\n  const $videoWrap = $videoEmbed.parents('.gutenbee-video-embed-wrapper');\n  const attrState = attr => {\n    return 'true' === attr ? 1 : 0;\n  };\n\n  // YouTube videos\n  const onYouTubeApiReady = videoEmbed => {\n    const $dataset = videoEmbed[0].dataset;\n    const $video = $(videoEmbed).find('div').get(0);\n    const $overlay = $(videoEmbed).siblings('.gutenbee-video-embed-overlay');\n\n    // eslint-disable-next-line no-unused-vars\n    const ytPlayer = new window.YT.Player($video, {\n      videoId: $dataset.videoId,\n      playerVars: {\n        autoplay: $dataset.videoAutoplay ? attrState($dataset.videoAutoplay) : 0,\n        controls: $dataset.videoControls ? attrState($dataset.videoControls) : 0,\n        showinfo: 0,\n        modestbranding: $dataset.videoBranding ? attrState($dataset.videoBranding) : 0,\n        loop: $dataset.videoLoop ? attrState($dataset.videoLoop) : 0,\n        playlist: $dataset.videoId,\n        fs: 0,\n        cc_load_policy: 0,\n        iv_load_policy: 3,\n        autohide: 0,\n        mute: $dataset.videoMute ? attrState($dataset.videoMute) : 0,\n        start: parseInt($dataset.videoStart, 10) || undefined,\n        end: parseInt($dataset.videoEnd, 10) || undefined\n      },\n      events: {\n        onReady: event => {\n          if ('true' === $dataset.videoAutoplay) {\n            event.target.playVideo();\n          }\n          if ('true' === $dataset.videoAutoplay && $overlay.length) {\n            $overlay.fadeOut();\n          } else if ('false' === $dataset.videoAutoplay && $overlay.length && 'true' === $dataset.videoLazy) {\n            $overlay.fadeOut;\n            ytPlayer.playVideo();\n          } else if ('false' === $dataset.videoAutoplay && $overlay.length) {\n            $overlay.on('click', function () {\n              $overlay.find('div').addClass('gutenbee-spinner').removeClass('play-button');\n              ytPlayer.playVideo();\n            });\n          }\n        },\n        onStateChange: event => {\n          if (event.data === window.YT.PlayerState.PLAYING) {\n            $overlay.fadeOut();\n          }\n        }\n      }\n    });\n  };\n\n  // Vimeo videos\n  const onVimeoApiReady = videoEmbed => {\n    const $dataset = videoEmbed[0].dataset;\n    const $overlay = $(videoEmbed).siblings('.gutenbee-video-embed-overlay');\n    const player = new window.Vimeo.Player(videoEmbed, {\n      id: $dataset.videoId,\n      loop: $dataset.videoLoop ? attrState($dataset.videoLoop) : 0,\n      autoplay: $dataset.videoAutoplay ? attrState($dataset.videoAutoplay) : 0,\n      controls: $dataset.videoControls ? attrState($dataset.videoControls) : 0,\n      byline: false,\n      title: false,\n      autopause: false,\n      muted: $dataset.videoMute ? attrState($dataset.videoMute) : 0\n    });\n    if ($dataset.videoStart) {\n      player.setCurrentTime($dataset.videoStart);\n    }\n    player.on('loaded', function () {\n      if ('true' === $dataset.videoAutoplay && $overlay.length) {\n        $overlay.fadeOut();\n      } else if ('false' === $dataset.videoAutoplay && $overlay.length && 'true' === $dataset.videoLazy) {\n        player.play();\n        player.on('play', function () {\n          $overlay.fadeOut();\n        });\n      } else if ('false' === $dataset.videoAutoplay && $overlay.length) {\n        $overlay.on('click', function () {\n          $overlay.find('div').addClass('gutenbee-spinner').removeClass('play-button');\n          player.play();\n          player.on('play', function () {\n            $overlay.fadeOut();\n          });\n        });\n      }\n    });\n  };\n  const createEmbed = async (firstScript, videoType, videoEmbed) => {\n    if (videoType === 'youtube') {\n      await maybeLoadYouTubeApi();\n      onYouTubeApiReady(videoEmbed);\n    }\n    if (videoType === 'vimeo') {\n      await maybeLoadVimeoApi();\n      onVimeoApiReady(videoEmbed);\n    }\n  };\n  $videoWrap.on('click', function () {\n    const $this = $(this);\n    const embedLoaded = $this.find('iframe').length;\n    const $overlay = $this.find('.gutenbee-video-embed-overlay');\n    const $videoEmbed = $this.find('.gutenbee-video-embed');\n    const $firstScript = $('script');\n    const videoType = $videoEmbed.data('video-type');\n    if (embedLoaded) {\n      return;\n    }\n    $overlay.find('div').removeClass('play-button');\n    $overlay.find('div').addClass('gutenbee-spinner');\n    createEmbed($firstScript, videoType, $videoEmbed);\n  });\n  $videoEmbed.each(function () {\n    const $this = $(this);\n    const firstScript = $('script');\n    const $dataset = $this[0].dataset;\n    const $overlay = $this.siblings('.gutenbee-video-embed-overlay');\n    if (1 === $overlay.length && 'false' === $dataset.videoAutoplay) {\n      $overlay.find('div').addClass('play-button');\n    } else if (1 === $overlay.length && 'true' === $dataset.videoAutoplay) {\n      $overlay.find('div').addClass('gutenbee-spinner');\n    }\n    if (0 === $overlay.length || 'false' === $dataset.videoLazy) {\n      createEmbed(firstScript, $dataset.videoType, $this);\n    }\n  });\n  var $window = $(window);\n  var $stickyWrap = $('.wp-block-gutenbee-video-embed-sticky');\n  var $stickyVideoWrap = $stickyWrap.find('.gutenbee-video-embed-wrapper');\n  var videoWrapHeight = $stickyWrap.outerHeight();\n  var offset = 50;\n  if ($stickyWrap.length) {\n    $window.on('scroll', function () {\n      var windowScrollTop = $window.scrollTop();\n      var videoBottom = videoWrapHeight + $stickyWrap.offset().top;\n      if (windowScrollTop > videoBottom + offset) {\n        if (!$stickyVideoWrap.hasClass('closed') && !$stickyVideoWrap.hasClass('stuck')) {\n          $stickyWrap.height(videoWrapHeight);\n          $stickyVideoWrap.addClass('stuck');\n          $stickyVideoWrap.append('<span class=\"close\">Ã—</span>');\n          var $close = $($stickyVideoWrap).find('.close');\n          $close.on('click', function () {\n            var $videoId = $(this).siblings('.gutenbee-video-embed').find('iframe').attr('id');\n            document.getElementById($videoId).contentWindow.postMessage('{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*');\n            $stickyVideoWrap.removeClass('stuck');\n            $stickyVideoWrap.addClass('closed');\n          });\n        }\n      } else {\n        $stickyVideoWrap.removeClass('stuck');\n        $stickyVideoWrap.find('.close').remove();\n      }\n    });\n  }\n});\n;// CONCATENATED MODULE: ./src/blocks/container/script.js\n\n\nexternal_jQuery_default()($ => {\n  const $window = $(window);\n\n  /* -----------------------------------------\n  Video Backgrounds\n  ----------------------------------------- */\n  const $videoBg = $('.wp-block-gutenbee-container .wp-block-gutenbee-video-bg');\n  const $videoWrap = $videoBg.parents('.wp-block-gutenbee-video-bg-wrapper');\n\n  // YouTube videos\n  function onYouTubeApiReady($videoBg) {\n    const $videoWrap = $videoBg.parents('.wp-block-gutenbee-video-bg-wrapper');\n    const $block = $videoWrap.closest('.wp-block-gutenbee-container');\n    const videoId = $videoWrap.data('video-id');\n    const startTime = $videoWrap.data('video-start');\n    const video = $videoBg.attr('id');\n    new window.YT.Player(video, {\n      videoId: videoId,\n      playerVars: {\n        autoplay: 1,\n        controls: 0,\n        showinfo: 0,\n        modestbranding: 1,\n        loop: 1,\n        playlist: videoId,\n        fs: 0,\n        cc_load_policy: 0,\n        iv_load_policy: 3,\n        autohide: 0,\n        start: startTime || undefined\n      },\n      events: {\n        onReady: function (event) {\n          event.target.mute();\n          event.target.playVideo();\n        },\n        onStateChange: function (event) {\n          if (event.data === window.YT.PlayerState.PLAYING) {\n            adjustVideoSize($videoWrap);\n            $videoWrap.addClass('visible');\n            $block.addClass('gutenbee-video-loaded');\n          }\n        }\n      }\n    });\n  }\n\n  // Vimeo videos\n  function onVimeoApiReady($videoBg) {\n    const $videoWrap = $videoBg.parents('.wp-block-gutenbee-video-bg-wrapper');\n    const $block = $videoWrap.closest('.wp-block-gutenbee-container');\n    const videoId = $videoWrap.data('video-id');\n    const startTime = $videoWrap.data('video-start');\n    const player = new window.Vimeo.Player($videoBg, {\n      id: videoId,\n      loop: true,\n      autoplay: true,\n      byline: false,\n      title: false,\n      autopause: false,\n      muted: true\n    });\n    player.setVolume(0);\n    if (startTime) {\n      player.setCurrentTime(startTime);\n    }\n    player.on('playing', function () {\n      adjustVideoSize($videoWrap);\n      $videoWrap.addClass('visible');\n      $block.addClass('gutenbee-video-loaded');\n    });\n  }\n  let videoResizeTimer;\n  $window.on('resize.ciVideo', function () {\n    clearTimeout(videoResizeTimer);\n    videoResizeTimer = setTimeout(function () {\n      $videoWrap.each(function () {\n        const $this = $(this);\n        adjustVideoSize($this);\n      });\n    }, 350);\n  });\n  function getVideoSize($videoWrap) {\n    const containerWidth = $videoWrap.outerWidth();\n    const containerHeight = $videoWrap.outerHeight();\n    const aspectRatio = 16 / 9;\n    const ratioWidth = containerWidth / aspectRatio;\n    const ratioHeight = containerHeight * aspectRatio;\n    const isWidthFixed = containerWidth / containerHeight > aspectRatio;\n    return {\n      width: isWidthFixed ? containerWidth : ratioHeight,\n      height: isWidthFixed ? ratioWidth : containerHeight\n    };\n  }\n  function adjustVideoSize($videoWrap) {\n    const size = getVideoSize($videoWrap);\n    $videoWrap.find('iframe, video').css({\n      width: size.width + 'px',\n      height: size.height + 'px'\n    });\n  }\n  if ($videoBg.length && window.innerWidth > 1080) {\n    $videoBg.each(async function () {\n      const $this = $(this);\n      const videoType = $this.parents('.wp-block-gutenbee-video-bg-wrapper').data('video-type');\n      const $videoWrap = $this.parents('.wp-block-gutenbee-video-bg-wrapper');\n      const $block = $this.closest('.wp-block-gutenbee-container');\n      if (videoType === 'youtube') {\n        await maybeLoadYouTubeApi();\n        onYouTubeApiReady($this);\n      } else if (videoType === 'vimeo') {\n        await maybeLoadVimeoApi();\n        onVimeoApiReady($this);\n      } else if (videoType === 'self') {\n        $videoWrap.find('video').on('play', () => {\n          $videoWrap.addClass('visible');\n          $block.addClass('gutenbee-video-loaded');\n        });\n      }\n    });\n  }\n});\n;// CONCATENATED MODULE: ./src/blocks/banner/script.js\n\n\nexternal_jQuery_default()($ => {\n  const $window = $(window);\n\n  /* -----------------------------------------\n  Video Backgrounds\n  ----------------------------------------- */\n  const $videoBg = $('.wp-block-gutenbee-banner .wp-block-gutenbee-video-bg');\n  const $videoWrap = $videoBg.parents('.wp-block-gutenbee-video-bg-wrapper');\n\n  // YouTube videos\n  function onYouTubeAPIReady($videoBg) {\n    const $videoWrap = $videoBg.parents('.wp-block-gutenbee-video-bg-wrapper');\n    const $block = $videoWrap.closest('.wp-block-gutenbee-banner');\n    const videoId = $videoWrap.data('video-id');\n    const startTime = $videoWrap.data('video-start');\n    const video = $videoBg.attr('id');\n    new window.YT.Player(video, {\n      videoId: videoId,\n      playerVars: {\n        autoplay: 1,\n        controls: 0,\n        showinfo: 0,\n        modestbranding: 1,\n        loop: 1,\n        playlist: videoId,\n        fs: 0,\n        cc_load_policy: 0,\n        iv_load_policy: 3,\n        autohide: 0,\n        start: startTime || undefined\n      },\n      events: {\n        onReady: function (event) {\n          event.target.mute();\n          event.target.playVideo();\n        },\n        onStateChange: function (event) {\n          if (event.data === window.YT.PlayerState.PLAYING) {\n            adjustVideoSize($videoWrap);\n            $videoWrap.addClass('visible');\n            $block.addClass('gutenbee-video-loaded');\n          }\n        }\n      }\n    });\n  }\n\n  // Vimeo videos\n  function onVimeoAPIReady($videoBg) {\n    const $videoWrap = $videoBg.parents('.wp-block-gutenbee-video-bg-wrapper');\n    const $block = $videoWrap.closest('.wp-block-gutenbee-banner');\n    const videoId = $videoWrap.data('video-id');\n    const startTime = $videoWrap.data('video-start');\n    const player = new window.Vimeo.Player($videoBg, {\n      id: videoId,\n      loop: true,\n      autoplay: true,\n      byline: false,\n      title: false,\n      autopause: false,\n      muted: true\n    });\n    player.setVolume(0);\n    if (startTime) {\n      player.setCurrentTime(startTime);\n    }\n    player.on('play', function () {\n      adjustVideoSize($videoWrap);\n      $videoWrap.addClass('visible');\n      $block.addClass('gutenbee-video-loaded');\n    });\n  }\n  let videoResizeTimer;\n  $window.on('resize.ciVideo', function () {\n    clearTimeout(videoResizeTimer);\n    videoResizeTimer = setTimeout(function () {\n      $videoWrap.each(function () {\n        const $this = $(this);\n        adjustVideoSize($this);\n      });\n    }, 350);\n  });\n  function getVideoSize($videoWrap) {\n    const containerWidth = $videoWrap.outerWidth();\n    const containerHeight = $videoWrap.outerHeight();\n    const aspectRatio = 16 / 9;\n    const ratioWidth = containerWidth / aspectRatio;\n    const ratioHeight = containerHeight * aspectRatio;\n    const isWidthFixed = containerWidth / containerHeight > aspectRatio;\n    return {\n      width: isWidthFixed ? containerWidth : ratioHeight,\n      height: isWidthFixed ? ratioWidth : containerHeight\n    };\n  }\n  function adjustVideoSize($videoWrap) {\n    const size = getVideoSize($videoWrap);\n    $videoWrap.find('iframe, video').css({\n      width: size.width + 'px',\n      height: size.height + 'px'\n    });\n  }\n  if ($videoBg.length && window.innerWidth > 1080) {\n    $videoBg.each(async function () {\n      const $this = $(this);\n      const videoType = $this.parents('.wp-block-gutenbee-video-bg-wrapper').data('video-type');\n      const $videoWrap = $this.parents('.wp-block-gutenbee-video-bg-wrapper');\n      const $block = $this.closest('.wp-block-gutenbee-banner');\n      if (videoType === 'youtube') {\n        await maybeLoadYouTubeApi();\n        onYouTubeAPIReady($this);\n      } else if (videoType === 'vimeo') {\n        await maybeLoadVimeoApi();\n        onVimeoAPIReady($this);\n      } else if (videoType === 'self') {\n        $videoWrap.find('video').on('play', () => {\n          $videoWrap.addClass('visible');\n          $block.addClass('gutenbee-video-loaded');\n        });\n      }\n    });\n  }\n});\n;// CONCATENATED MODULE: ./src/blocks/post-types/script.js\n\nexternal_jQuery_default()($ => {\n  const $loadMoreButtons = $('.wp-block-gutenbee-post-types-load-more-button');\n  $loadMoreButtons.each(function () {\n    const $this = $(this);\n    const $block = $this.closest('.wp-block-gutenbee-post-types');\n    const $items = $block.find('[class*=\"row-items\"]');\n    const blockId = $block.attr('id');\n    let nextLink = $block.find('.navigation .page-numbers.next').attr('href');\n    if (!nextLink) {\n      $this.hide();\n    }\n    $this.on('click', () => {\n      $block.addClass('gutenbee-block-is-loading');\n      $this.addClass('gutenbee-button-is-loading');\n      $.get(nextLink, function (data) {\n        const $body = $(data);\n        const $newBlock = $body.find(`#${blockId}`);\n        const $newItems = $newBlock.find('[class*=\"row-items\"] > div');\n\n        // Update the link so that we fetch the next page.\n        nextLink = $newBlock.find('.navigation .page-numbers.next').attr('href');\n        if (!nextLink) {\n          $this.fadeOut('fast');\n        }\n        $items.append($newItems);\n        $block.removeClass('gutenbee-block-is-loading');\n        $this.removeClass('gutenbee-button-is-loading');\n        $('body').trigger('gutenbee.posts-loaded', [$newItems]);\n      });\n    });\n  });\n});\n;// CONCATENATED MODULE: ./src/frontend.js\n//\n// Stylesheets\n//\n\n\n//\n// Control scripts\n//\n\n\n//\n// Block scripts\n//\n\n\n\n\n\n\n\n\n\n\n\n\n// import './blocks/tab-slider/script';//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dXJjZXMiOlsid2VicGFjazovL3dwLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbHMvYmFja2dyb3VuZC1jb250cm9scy9zY3JpcHQuanM/MDY4ZSIsIndlYnBhY2s6Ly93cC8uL3NyYy9ibG9ja3Mvc2xpZGVzaG93L3NjcmlwdC5qcz80ZjVkIiwid2VicGFjazovL3dwLy4vc3JjL3V0aWwvaXNFbGVtZW50SW5WaWV3cG9ydC5qcz9mNDM1Iiwid2VicGFjazovL3dwLy4vc3JjL2Jsb2Nrcy9jb3VudHVwL3NjcmlwdC5qcz8wOTM5Iiwid2VicGFjazovL3dwLy4vc3JjL2Jsb2Nrcy9qdXN0aWZpZWQtZ2FsbGVyeS9zY3JpcHQuanM/MWM3NSIsIndlYnBhY2s6Ly93cC9leHRlcm5hbCB3aW5kb3cge1wid2luZG93XCI6W1wid3BcIixcImRvbVwiXX0/MmVlMCIsIndlYnBhY2s6Ly93cC8uL3NyYy9ibG9ja3MvZ29vZ2xlLW1hcHMvc2NyaXB0LmpzPzMyY2UiLCJ3ZWJwYWNrOi8vd3AvLi9zcmMvdXRpbC9Db3VudGRvd25UaW1lci5qcz8yMDhlIiwid2VicGFjazovL3dwLy4vc3JjL2Jsb2Nrcy9jb3VudGRvd24vc2NyaXB0LmpzP2EyYTgiLCJ3ZWJwYWNrOi8vd3AvLi9zcmMvYmxvY2tzL2ltYWdlLWNvbXBhcmlzb24vc2NyaXB0LmpzPzgxZDAiLCJ3ZWJwYWNrOi8vd3AvLi9zcmMvYmxvY2tzL2FjY29yZGlvbi9zY3JpcHQuanM/NjBhOCIsIndlYnBhY2s6Ly93cC8uL3NyYy9ibG9ja3MvdGFicy9zY3JpcHQuanM/OGYzZSIsIndlYnBhY2s6Ly93cC8uL3NyYy91dGlsL3ZpZGVvL3Byb3ZpZGVycy5qcz80NmY3Iiwid2VicGFjazovL3dwLy4vc3JjL2Jsb2Nrcy92aWRlby1lbWJlZC9zY3JpcHQuanM/YjlmNSIsIndlYnBhY2s6Ly93cC8uL3NyYy9ibG9ja3MvY29udGFpbmVyL3NjcmlwdC5qcz82NzNkIiwid2VicGFjazovL3dwLy4vc3JjL2Jsb2Nrcy9iYW5uZXIvc2NyaXB0LmpzPzYzNDQiLCJ3ZWJwYWNrOi8vd3AvLi9zcmMvYmxvY2tzL3Bvc3QtdHlwZXMvc2NyaXB0LmpzP2YxMjUiLCJ3ZWJwYWNrOi8vd3AvLi9zcmMvZnJvbnRlbmQuanM/ODY4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5cbmpRdWVyeSgkID0+IHtcbiAgdmFyICR3aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgJC5mbi5ndXRlbmJlZVBhcmFsbGF4ID0gZnVuY3Rpb24ob3B0cykge1xuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoXG4gICAgICB7fSxcbiAgICAgIHtcbiAgICAgICAgc3BlZWQ6IG51bGwsXG4gICAgICAgIGRpcmVjdGlvbjogbnVsbCxcbiAgICAgIH0sXG4gICAgICBvcHRzLFxuICAgICk7XG5cbiAgICB2YXIgJGVsZW1lbnRzID0gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIHZhciBzcGVlZCA9IG9wdGlvbnMuc3BlZWQgfHwgJHRoaXMuZGF0YSgncGFyYWxsYXgtc3BlZWQnKTtcblxuICAgICAgJHRoaXMuY3NzKHsgaGVpZ2h0OiAxMDAgKyBzcGVlZCAqIDEwMCArICclJyB9KTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgIHZhciB3aGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcbiAgICAgIHZhciB3c2Nyb2xsID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcblxuICAgICAgJGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkcGFyZW50ID0gJHRoaXMucGFyZW50KCk7XG4gICAgICAgIHZhciBlbEhlaWdodCA9ICRwYXJlbnQub3V0ZXJIZWlnaHQoKTtcbiAgICAgICAgdmFyIGhlaWdodERlbHRhID0gJHRoaXMub3V0ZXJIZWlnaHQoKSAtIGVsSGVpZ2h0O1xuICAgICAgICB2YXIgZWxUb3AgPSAkcGFyZW50Lm9mZnNldCgpLnRvcCArIGVsSGVpZ2h0O1xuXG4gICAgICAgIHZhciBzY3JvbGxQZXJjZW50YWdlID0gKGVsVG9wIC0gd3Njcm9sbCkgLyAod2hlaWdodCArIGVsSGVpZ2h0KTtcbiAgICAgICAgdmFyIHlwb3MgPSAoc2Nyb2xsUGVyY2VudGFnZSAtIDEpICogaGVpZ2h0RGVsdGE7XG5cbiAgICAgICAgJHRoaXMuY3NzKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyB5cG9zICsgJ3B4KScsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHJlcXVlc3RQYXJhbGxheFVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh1cGRhdGUpO1xuICAgIH07XG5cbiAgICAkd2luZG93XG4gICAgICAub24oJ3Njcm9sbCcsIHJlcXVlc3RQYXJhbGxheFVwZGF0ZSlcbiAgICAgIC5vbigncmVzaXplJywgcmVxdWVzdFBhcmFsbGF4VXBkYXRlKTtcblxuICAgIHVwZGF0ZSgpO1xuXG4gICAgJC5mbi5ndXRlbmJlZVBhcmFsbGF4LmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICAgICRlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAkdGhpcy5jc3MoeyBoZWlnaHQ6ICcxMDAlJywgdHJhbnNmb3JtOiAnbm9uZScgfSk7XG4gICAgICB9KTtcblxuICAgICAgJHdpbmRvd1xuICAgICAgICAub2ZmKCdzY3JvbGwnLCByZXF1ZXN0UGFyYWxsYXhVcGRhdGUpXG4gICAgICAgIC5vZmYoJ3Jlc2l6ZScsIHJlcXVlc3RQYXJhbGxheFVwZGF0ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiAkZWxlbWVudHM7XG4gIH07XG5cbiAgJCgnLmd1dGVuYmVlLXBhcmFsbGF4JykuZ3V0ZW5iZWVQYXJhbGxheCgpO1xufSk7XG4iLCJpbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgJ3NsaWNrLWNhcm91c2VsJztcblxualF1ZXJ5KHdpbmRvdykub24oJ2xvYWQnLCAoKSA9PiB7XG4gIGNvbnN0ICRzbGlkZXNob3cgPSBqUXVlcnkoJy53cC1ibG9jay1ndXRlbmJlZS1zbGlkZXNob3cnKTtcblxuICAkc2xpZGVzaG93LmVhY2goZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG5cbiAgICAkdGhpcy5zbGljayh7XG4gICAgICBhcnJvd3M6ICR0aGlzLmRhdGEoJ2Fycm93cycpLFxuICAgICAgZG90czogJHRoaXMuZGF0YSgnZG90cycpLFxuICAgICAgYXV0b3BsYXk6ICR0aGlzLmRhdGEoJ2F1dG9wbGF5JyksXG4gICAgICBmYWRlOiAkdGhpcy5kYXRhKCdmYWRlJyksXG4gICAgICBpbmZpbml0ZTogJHRoaXMuZGF0YSgnaW5maW5pdGUnKSxcbiAgICAgIHNwZWVkOiAkdGhpcy5kYXRhKCdzcGVlZCcpLFxuICAgICAgYXV0b3BsYXlTcGVlZDogJHRoaXMuZGF0YSgnYXV0b3BsYXktc3BlZWQnKSxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAkdGhpcy5kYXRhKCdzbGlkZXMtdG8tc2Nyb2xsJyksXG4gICAgICBzbGlkZXNUb1Nob3c6ICR0aGlzLmRhdGEoJ3NsaWRlcy10by1zaG93JyksXG4gICAgICBwYXVzZU9uSG92ZXI6ICR0aGlzLmRhdGEoJ3BhdXNlLW9uLWhvdmVyJyksXG4gICAgICBzbGlkZTogJy5ndXRlbmJlZS1zbGlkZXNob3ctaXRlbScsXG4gICAgICBwcmV2QXJyb3c6XG4gICAgICAgICc8YnV0dG9uIGNsYXNzPVwic2xpY2stcHJldlwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTkyIDUxMlwiPjxwYXRoIGQ9XCJNMjUuMSAyNDcuNWwxMTcuOC0xMTZjNC43LTQuNyAxMi4zLTQuNyAxNyAwbDcuMSA3LjFjNC43IDQuNyA0LjcgMTIuMyAwIDE3TDY0LjcgMjU2bDEwMi4yIDEwMC40YzQuNyA0LjcgNC43IDEyLjMgMCAxN2wtNy4xIDcuMWMtNC43IDQuNy0xMi4zIDQuNy0xNyAwTDI1IDI2NC41Yy00LjYtNC43LTQuNi0xMi4zLjEtMTd6XCIvPjwvc3ZnPjwvYnV0dG9uPicsXG4gICAgICBuZXh0QXJyb3c6XG4gICAgICAgICc8YnV0dG9uIGNsYXNzPVwic2xpY2stbmV4dFwiPjxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTkyIDUxMlwiPjxwYXRoIGQ9XCJNMTY2LjkgMjY0LjVsLTExNy44IDExNmMtNC43IDQuNy0xMi4zIDQuNy0xNyAwbC03LjEtNy4xYy00LjctNC43LTQuNy0xMi4zIDAtMTdMMTI3LjMgMjU2IDI1LjEgMTU1LjZjLTQuNy00LjctNC43LTEyLjMgMC0xN2w3LjEtNy4xYzQuNy00LjcgMTIuMy00LjcgMTcgMGwxMTcuOCAxMTZjNC42IDQuNyA0LjYgMTIuMy0uMSAxN3pcIi8+PC9zdmc+PC9idXR0b24+JyxcbiAgICAgIGN1c3RvbVBhZ2luZzogKCkgPT4ge1xuICAgICAgICByZXR1cm4galF1ZXJ5KCc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiAvPicpLmNzcyh7XG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAkdGhpcy5kYXRhKCdkb3RzLWNvbG9yJyksXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG59KTtcbiIsIi8qKlxuICogQ2hlY2tzIGlmIGVsZW1lbnQgaXMgaW4gdmlld3BvcnQuXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgVGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IFRoZSBvZmZzZXQgaW4gcGl4ZWxzLlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmNvbnN0IGlzRWxlbWVudEluVmlld3BvcnQgPSAoZWwsIG9mZnNldCA9IDApID0+IHtcbiAgY29uc3Qgc2Nyb2xsID0gd2luZG93LnNjcm9sbFkgfHwgd2luZG93LnBhZ2VZT2Zmc2V0O1xuICBjb25zdCBib3VuZHNUb3AgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBzY3JvbGw7XG5cbiAgY29uc3Qgdmlld3BvcnQgPSB7XG4gICAgdG9wOiBzY3JvbGwsXG4gICAgYm90dG9tOiBzY3JvbGwgKyB3aW5kb3cuaW5uZXJIZWlnaHQsXG4gIH07XG5cbiAgY29uc3QgYm91bmRzID0ge1xuICAgIHRvcDogYm91bmRzVG9wICsgb2Zmc2V0LFxuICAgIGJvdHRvbTogYm91bmRzVG9wICsgZWwuY2xpZW50SGVpZ2h0ICsgb2Zmc2V0LFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgKGJvdW5kcy5ib3R0b20gPj0gdmlld3BvcnQudG9wICYmIGJvdW5kcy5ib3R0b20gPD0gdmlld3BvcnQuYm90dG9tKSB8fFxuICAgIChib3VuZHMudG9wIDw9IHZpZXdwb3J0LmJvdHRvbSAmJiBib3VuZHMudG9wID49IHZpZXdwb3J0LnRvcClcbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGlzRWxlbWVudEluVmlld3BvcnQ7XG4iLCJpbXBvcnQgQ291bnRVcCBmcm9tICdjb3VudHVwJztcblxuaW1wb3J0IGlzRWxlbWVudEluVmlld3BvcnQgZnJvbSAnLi4vLi4vdXRpbC9pc0VsZW1lbnRJblZpZXdwb3J0JztcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3QgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICd3cC1ibG9jay1ndXRlbmJlZS1jb3VudHVwLW51bWJlcicsXG4gICk7XG5cbiAgY29uc3QgY291bnR1cEluaXQgPSBlbGVtZW50ID0+IHtcbiAgICBjb25zdCBzZXBhcmF0b3IgPSBlbGVtZW50LmRhdGFzZXQuc2VwYXJhdG9yO1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICB1c2VHcm91cGluZzogISFzZXBhcmF0b3IsXG4gICAgICBzZXBhcmF0b3IsXG4gICAgICBwcmVmaXg6IGVsZW1lbnQuZGF0YXNldC5wcmVmaXgsXG4gICAgICBzdWZmaXg6IGVsZW1lbnQuZGF0YXNldC5zdWZmaXgsXG4gICAgfTtcblxuICAgIGNvbnN0IGNvdW50dXAgPSBuZXcgQ291bnRVcChcbiAgICAgIGVsZW1lbnQsXG4gICAgICBlbGVtZW50LmRhdGFzZXQuc3RhcnQsXG4gICAgICBlbGVtZW50LmRhdGFzZXQuZW5kLFxuICAgICAgMCxcbiAgICAgIGVsZW1lbnQuZGF0YXNldC5hbmltYXRpb25EdXJhdGlvbixcbiAgICAgIG9wdGlvbnMsXG4gICAgKTtcblxuICAgIGlmICghY291bnR1cC5lcnJvcikge1xuICAgICAgY291bnR1cC5zdGFydCgpO1xuICAgICAgZWxlbWVudC5kYXRhc2V0LnN0YXJ0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfTtcblxuICBbLi4uZWxlbWVudHNdLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5pbnZpZXdwb3J0ID09PSAndHJ1ZScpIHtcbiAgICAgIGNvbnN0IGhhbmRsZXIgPSAoKSA9PlxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZiAoaXNFbGVtZW50SW5WaWV3cG9ydChlbGVtZW50LCAxMDApICYmICFlbGVtZW50LmRhdGFzZXQuc3RhcnRlZCkge1xuICAgICAgICAgICAgY291bnR1cEluaXQoZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgaGFuZGxlcigpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGhhbmRsZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb3VudHVwSW5pdChlbGVtZW50KTtcbiAgICB9XG4gIH0pO1xufSk7XG4iLCJpbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5pbXBvcnQgJ2p1c3RpZmllZEdhbGxlcnknO1xuXG5qUXVlcnkoJCA9PiB7XG4gIGNvbnN0ICRqdXN0aWZpZWRHYWxsZXJ5ID0gJCgnLndwLWJsb2NrLWd1dGVuYmVlLWdhbGxlcnktanVzdGlmaWVkJyk7XG5cbiAgJGp1c3RpZmllZEdhbGxlcnkuZWFjaChmdW5jdGlvbigpIHtcbiAgICBjb25zdCAkdGhpcyA9ICQodGhpcyk7XG4gICAgY29uc3QgJGNvbnRlbnQgPSAkdGhpcy5maW5kKCcud3AtYmxvY2stZ3V0ZW5iZWUtZ2FsbGVyeS1jb250ZW50Jyk7XG4gICAgY29uc3QgJHR5cGUgPSAkdGhpcy5kYXRhKCdnYWxsZXJ5LXR5cGUnKTtcblxuICAgIGlmICgkdHlwZSAhPT0gJ2p1c3RpZmllZCcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAkY29udGVudC5qdXN0aWZpZWRHYWxsZXJ5KHtcbiAgICAgIHJvd0hlaWdodDogJHRoaXMuZGF0YSgncm93LWhlaWdodCcpLFxuICAgICAgbWFyZ2luczogJHRoaXMuZGF0YSgnbWFyZ2lucycpLFxuICAgICAgbGFzdFJvdzogJHRoaXMuZGF0YSgnbGFzdC1yb3cnKSxcbiAgICAgIHJhbmRvbWl6ZTogJHRoaXMuZGF0YSgncmFuZG9taXplJyksXG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJjb25zdCBfX1dFQlBBQ0tfTkFNRVNQQUNFX09CSkVDVF9fID0gd2luZG93W1wid3BcIl1bXCJkb21cIl07IiwiaW1wb3J0IGpRdWVyeSBmcm9tICdqcXVlcnknO1xuaW1wb3J0IHsgc2FmZUhUTUwgfSBmcm9tICdAd29yZHByZXNzL2RvbSc7XG5cbmpRdWVyeSgkID0+IHtcbiAgY29uc3QgZ29vZ2xlID0gd2luZG93Lmdvb2dsZTtcblxuICBpZiAodHlwZW9mIGdvb2dsZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCAkbWFwcyA9ICQoXG4gICAgJy53cC1ibG9jay1ndXRlbmJlZS1nb29nbGUtbWFwcyA+IGRpdiwgLndwLWJsb2NrLWd1dGVuYmVlLWdvb2dsZS1tYXBzJyxcbiAgKTtcblxuICAkbWFwcy5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcbiAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgIGxhdDogcGFyc2VGbG9hdCgkdGhpcy5kYXRhKCdsYXRpdHVkZScpKSxcbiAgICAgIGxuZzogcGFyc2VGbG9hdCgkdGhpcy5kYXRhKCdsb25naXR1ZGUnKSksXG4gICAgfTtcbiAgICBjb25zdCBpbmZvID0gJHRoaXMuZGF0YSgnaW5mby13aW5kb3cnKTtcblxuICAgIGlmICghbG9jYXRpb24ubGF0IHx8ICFsb2NhdGlvbi5sbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKCR0aGlzLmdldCgwKSwge1xuICAgICAgem9vbTogJHRoaXMuZGF0YSgnem9vbScpLFxuICAgICAgY2VudGVyOiBsb2NhdGlvbixcbiAgICAgIHNjcm9sbHdoZWVsOiAhJHRoaXMuZGF0YSgncHJldmVudC1zY3JvbGwnKSxcbiAgICAgIHN0eWxlczogJHRoaXMuZGF0YSgnbWFwLXN0eWxlJyksXG4gICAgfSk7XG5cbiAgICBjb25zdCBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbixcbiAgICAgIGljb246ICR0aGlzLmRhdGEoJ21hcmtlci1pY29uJyksXG4gICAgICBtYXAsXG4gICAgfSk7XG5cbiAgICBjb25zdCBpbmZvV2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgY29udGVudDpcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJ3cC1ibG9jay1ndXRlbmJlZS1nb29nbGUtbWFwcy1pbmZvLXdpbmRvd1wiPicgK1xuICAgICAgICAoaW5mbyA/IHNhZmVIVE1MKFN0cmluZyhpbmZvKSkgOiAnJykgK1xuICAgICAgICAnPC9kaXY+JyxcbiAgICAgIG1heFdpZHRoOiAzNTAsXG4gICAgfSk7XG5cbiAgICBpZiAoaW5mbykge1xuICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG1hcCwgbWFya2VyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcbiIsImNsYXNzIENvdW50ZG93blRpbWVyIHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50IEhUTUwgRWxlbWVudCB0byBhdHRhY2ggdGhlIHRpbWVyIG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRUaW1lIFRoZSBlbmQgdGltZVxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCwgZW5kVGltZSkge1xuICAgIHRoaXMuY2xvY2sgPSBlbGVtZW50O1xuICAgIHRoaXMudXBkYXRlQ2xvY2soZW5kVGltZSk7XG4gICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMudXBkYXRlQ2xvY2soZW5kVGltZSk7XG4gICAgfSwgMTAwMCk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsY3VsYXRlcyByZW1haW5pbmcgdGltZSBmcm9tIHRoZSBwcmVzZW50IG1vbWVudCB0byBgZW5kRGF0ZWBcbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAcGFyYW0ge3N0cmluZ30gZW5kVGltZSBUaGUgZW5kIHRpbWVcbiAgICogQHJldHVybnMge3t0b3RhbDogbnVtYmVyLCBkYXlzOiBudW1iZXIsIGhvdXJzOiBudW1iZXIsIG1pbnV0ZXM6IG51bWJlciwgc2Vjb25kczogbnVtYmVyfX0gVG90YWwgdGltZSByZW1haW5pbmdcbiAgICovXG4gIHN0YXRpYyBnZXRSZW1haW5pbmdUaW1lID0gZW5kVGltZSA9PiB7XG4gICAgY29uc3QgdCA9IERhdGUucGFyc2UoZW5kVGltZSkgLSBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpO1xuICAgIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKCh0IC8gMTAwMCkgJSA2MCk7XG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKHQgLyAxMDAwIC8gNjApICUgNjApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigodCAvICgxMDAwICogNjAgKiA2MCkpICUgMjQpO1xuICAgIGNvbnN0IGRheXMgPSBNYXRoLmZsb29yKHQgLyAoMTAwMCAqIDYwICogNjAgKiAyNCkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvdGFsOiB0LFxuICAgICAgZGF5czogZGF5cyA8PSAwID8gMCA6IGRheXMsXG4gICAgICBob3VyczogaG91cnMgPD0gMCA/IDAgOiBob3VycyxcbiAgICAgIG1pbnV0ZXM6IG1pbnV0ZXMgPD0gMCA/IDAgOiBtaW51dGVzLFxuICAgICAgc2Vjb25kczogc2Vjb25kcyA8PSAwID8gMCA6IHNlY29uZHMsXG4gICAgfTtcbiAgfTtcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgSFRNTCBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbmRUaW1lIFRoZSBlbmQgdGltZVxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgdXBkYXRlQ2xvY2soZW5kVGltZSkge1xuICAgIGNvbnN0IGRheXNTcGFuID0gdGhpcy5jbG9jay5xdWVyeVNlbGVjdG9yKCcuZ3V0ZW5iZWUtY291bnRkb3duLWRheXMnKTtcbiAgICBjb25zdCBob3Vyc1NwYW4gPSB0aGlzLmNsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5ndXRlbmJlZS1jb3VudGRvd24taG91cnMnKTtcbiAgICBjb25zdCBtaW51dGVzU3BhbiA9IHRoaXMuY2xvY2sucXVlcnlTZWxlY3RvcignLmd1dGVuYmVlLWNvdW50ZG93bi1taW51dGVzJyk7XG4gICAgY29uc3Qgc2Vjb25kc1NwYW4gPSB0aGlzLmNsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5ndXRlbmJlZS1jb3VudGRvd24tc2Vjb25kcycpO1xuICAgIGNvbnN0IHQgPSBDb3VudGRvd25UaW1lci5nZXRSZW1haW5pbmdUaW1lKGVuZFRpbWUpO1xuXG4gICAgaWYgKGRheXNTcGFuKSB7XG4gICAgICBkYXlzU3Bhbi5pbm5lckhUTUwgPSB0LmRheXM7XG4gICAgfVxuXG4gICAgaWYgKGhvdXJzU3Bhbikge1xuICAgICAgaG91cnNTcGFuLmlubmVySFRNTCA9IGAwJHt0LmhvdXJzfWAuc2xpY2UoLTIpO1xuICAgIH1cblxuICAgIGlmIChtaW51dGVzU3Bhbikge1xuICAgICAgbWludXRlc1NwYW4uaW5uZXJIVE1MID0gYDAke3QubWludXRlc31gLnNsaWNlKC0yKTtcbiAgICB9XG5cbiAgICBpZiAoc2Vjb25kc1NwYW4pIHtcbiAgICAgIHNlY29uZHNTcGFuLmlubmVySFRNTCA9IGAwJHt0LnNlY29uZHN9YC5zbGljZSgtMik7XG4gICAgfVxuXG4gICAgaWYgKHQudG90YWwgPD0gMCkge1xuICAgICAgdGhpcy5zdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3BzIHRoZSBjb3VudGRvd25cbiAgICpcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIHN0b3AoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBcIkRlc3Ryb3lzXCIgdGhlIGluc3RhbmNlXG4gICAqXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuc3RvcCgpO1xuICAgIHRoaXMuY2xvY2sgPSBudWxsO1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvdW50ZG93blRpbWVyO1xuIiwiaW1wb3J0IENvdW50ZG93blRpbWVyIGZyb20gJy4uLy4uL3V0aWwvQ291bnRkb3duVGltZXInO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBjb3VudGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcud3AtYmxvY2stZ3V0ZW5iZWUtY291bnRkb3duJyk7XG5cbiAgWy4uLmNvdW50ZG93bl0uZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICBjb25zdCBkYXRlID0gZWxlbWVudC5kYXRhc2V0LmRhdGUgfHwgJzE5MDAtMDEtMDFUMDA6MDA6MDAnO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW5ld1xuICAgIG5ldyBDb3VudGRvd25UaW1lcihlbGVtZW50LCBkYXRlKTtcbiAgfSk7XG59KTtcbiIsImltcG9ydCBqUXVlcnkgZnJvbSAnanF1ZXJ5JztcbmltcG9ydCAnenVyYi10d2VudHl0d2VudHkvanMvanF1ZXJ5LmV2ZW50Lm1vdmUnO1xuaW1wb3J0ICd6dXJiLXR3ZW50eXR3ZW50eS9qcy9qcXVlcnkudHdlbnR5dHdlbnR5JztcblxualF1ZXJ5KHdpbmRvdykub24oJ2xvYWQnLCAoKSA9PiB7XG4gIGpRdWVyeSgnLndwLWJsb2NrLWd1dGVuYmVlLWNvbXBhcmlzb24td3JhcCcpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgJHRoaXMgPSBqUXVlcnkodGhpcyk7XG5cbiAgICAkdGhpcy50d2VudHl0d2VudHkoe1xuICAgICAgZGVmYXVsdF9vZmZzZXRfcGN0OiAkdGhpcy5kYXRhKCdvZmZzZXQnKSAvIDEwMCxcbiAgICAgIGJlZm9yZV9sYWJlbDogd2luZG93Lmd1dGVuYmVlU3RyaW5ncy5pbWFnZV9jb21wYXJpc29uX2JlZm9yZV9sYWJlbCxcbiAgICAgIGFmdGVyX2xhYmVsOiB3aW5kb3cuZ3V0ZW5iZWVTdHJpbmdzLmltYWdlX2NvbXBhcmlzb25fYWZ0ZXJfbGFiZWwsXG4gICAgfSk7XG4gIH0pO1xufSk7XG4iLCJpbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5cbmpRdWVyeSgkID0+IHtcbiAgY29uc3QgZXhwYW5kZWRDbGFzcyA9ICd3cC1ibG9jay1ndXRlbmJlZS1hY2NvcmRpb24taXRlbS1leHBhbmRlZCc7XG4gIGNvbnN0ICR0aXRsZXMgPSAkKCcud3AtYmxvY2stZ3V0ZW5iZWUtYWNjb3JkaW9uLWl0ZW0tdGl0bGUnKTtcbiAgY29uc3QgJGRlZmF1bHRFeHBhbmRlZCA9ICQoYC4ke2V4cGFuZGVkQ2xhc3N9YCk7XG5cbiAgJGRlZmF1bHRFeHBhbmRlZFxuICAgIC5maW5kKCcud3AtYmxvY2stZ3V0ZW5iZWUtYWNjb3JkaW9uLWl0ZW0tY29udGVudC13cmFwJylcbiAgICAuc2xpZGVEb3duKDM1MCk7XG5cbiAgJHRpdGxlcy5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICBjb25zdCAkdGhpcyA9ICQodGhpcyk7XG4gICAgY29uc3QgJGFjY29yZGlvbiA9ICR0aGlzLnBhcmVudHMoJy53cC1ibG9jay1ndXRlbmJlZS1hY2NvcmRpb24nKTtcbiAgICBjb25zdCAkaXRlbSA9ICR0aGlzLnBhcmVudCgnLndwLWJsb2NrLWd1dGVuYmVlLWFjY29yZGlvbi1pdGVtJyk7XG4gICAgY29uc3QgJGNvbnRlbnQgPSAkaXRlbS5maW5kKFxuICAgICAgJy53cC1ibG9jay1ndXRlbmJlZS1hY2NvcmRpb24taXRlbS1jb250ZW50LXdyYXAnLFxuICAgICk7XG4gICAgY29uc3QgY29sbGFwc2VPdGhlcnMgPSAkYWNjb3JkaW9uLmRhdGEoJ2NvbGxhcHNlLW90aGVycycpO1xuXG4gICAgaWYgKCRpdGVtLmhhc0NsYXNzKGV4cGFuZGVkQ2xhc3MpKSB7XG4gICAgICAkY29udGVudC5zbGlkZVVwKDM1MCk7XG4gICAgICAkaXRlbS5yZW1vdmVDbGFzcyhleHBhbmRlZENsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbGxhcHNlT3RoZXJzKSB7XG4gICAgICAgICRpdGVtXG4gICAgICAgICAgLnNpYmxpbmdzKClcbiAgICAgICAgICAucmVtb3ZlQ2xhc3MoZXhwYW5kZWRDbGFzcylcbiAgICAgICAgICAuZmluZCgnLndwLWJsb2NrLWd1dGVuYmVlLWFjY29yZGlvbi1pdGVtLWNvbnRlbnQtd3JhcCcpXG4gICAgICAgICAgLnNsaWRlVXAoMzUwKTtcbiAgICAgIH1cbiAgICAgICRjb250ZW50LnNsaWRlRG93bigzNTApO1xuICAgICAgJGl0ZW0uYWRkQ2xhc3MoZXhwYW5kZWRDbGFzcyk7XG4gICAgfVxuICB9KTtcbn0pO1xuIiwiaW1wb3J0IGpRdWVyeSBmcm9tICdqcXVlcnknO1xuXG5qUXVlcnkoJCA9PiB7XG4gIGNvbnN0IHByZWZpeCA9ICd3cC1ibG9jay1ndXRlbmJlZS10YWJzJztcbiAgY29uc3QgJHRhYnMgPSAkKGAuJHtwcmVmaXh9YCk7XG5cbiAgJHRhYnMuZWFjaChmdW5jdGlvbigpIHtcbiAgICBjb25zdCAkdGhpcyA9ICQodGhpcyk7XG4gICAgY29uc3QgJHRpdGxlcyA9ICR0aGlzLmZpbmQoYC4ke3ByZWZpeH0tbmF2LWl0ZW1gKTtcbiAgICBjb25zdCAkdGFiQ29udGVudHMgPSAkdGhpcy5maW5kKGAuJHtwcmVmaXh9LXRhYi1jb250ZW50YCk7XG5cbiAgICAkdGl0bGVzLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgY29uc3QgJHRpdGxlID0gJCh0aGlzKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gJHRpdGxlLmluZGV4KCk7XG5cbiAgICAgICR0aXRsZVxuICAgICAgICAuYWRkQ2xhc3MoYCR7cHJlZml4fS1uYXYtaXRlbS1hY3RpdmVgKVxuICAgICAgICAuc2libGluZ3MoKVxuICAgICAgICAucmVtb3ZlQ2xhc3MoYCR7cHJlZml4fS1uYXYtaXRlbS1hY3RpdmVgKTtcbiAgICAgICR0YWJDb250ZW50cy5oaWRlKCk7XG4gICAgICAkdGFiQ29udGVudHMuZXEoaW5kZXgpLmZhZGVJbignZmFzdCcpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiLyoqXG4gKiBDaGVja3Mgd2hldGhlciB0aGUgWW91VHViZSBBUEkgaXMgbG9hZGVkLlxuICpcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5jb25zdCB5b3VUdWJlQXBpTG9hZGVkID0gKCkgPT4ge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdy5ZVD8uUGxheWVyICE9PSAndW5kZWZpbmVkJztcbn07XG5cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgdGhlIFZpbWVvIEFQSSBpcyBsb2FkZWQuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmNvbnN0IHZpbWVvQXBpTG9hZGVkID0gKCkgPT4ge1xuICByZXR1cm4gdHlwZW9mIHdpbmRvdy5WaW1lbz8uUGxheWVyICE9PSAndW5kZWZpbmVkJztcbn07XG5cbi8qKlxuICogTG9hZHMgdGhlIFlvdVR1YmUgQVBJIGlmIGl0J3Mgbm90IGFscmVhZHkgbG9hZGVkLlxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPGJvb2xlYW4+fVxuICovXG5leHBvcnQgY29uc3QgbWF5YmVMb2FkWW91VHViZUFwaSA9ICgpID0+IHtcbiAgaWYgKFxuICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3V0ZW5iZWUteW91dHViZS1hcGktc2NyaXB0JykgJiZcbiAgICAheW91VHViZUFwaUxvYWRlZCgpXG4gICkge1xuICAgIGNvbnN0IHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHRhZy5pZCA9ICdndXRlbmJlZS15b3V0dWJlLWFwaS1zY3JpcHQnO1xuICAgIHRhZy5zcmMgPSAnaHR0cHM6Ly93d3cueW91dHViZS5jb20vcGxheWVyX2FwaSc7XG4gICAgY29uc3QgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gICAgZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFnLCBmaXJzdFNjcmlwdFRhZyk7XG4gIH1cblxuICBjb25zdCBhcGlMb2FkZWQgPSByZXNvbHZlID0+IHtcbiAgICBpZiAoIXlvdVR1YmVBcGlMb2FkZWQoKSkge1xuICAgICAgc2V0VGltZW91dCgoKSA9PiBhcGlMb2FkZWQocmVzb2x2ZSksIDM1MCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgcmVzb2x2ZSh0cnVlKTtcbiAgfTtcblxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGFwaUxvYWRlZChyZXNvbHZlLCByZWplY3QpO1xuICB9KTtcbn07XG5cbi8qKlxuICogTG9hZHMgdGhlIFZpbWVvIEFQSSBpZiBpdCdzIG5vdCBhbHJlYWR5IGxvYWRlZC5cbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxib29sZWFuPn1cbiAqL1xuZXhwb3J0IGNvbnN0IG1heWJlTG9hZFZpbWVvQXBpID0gYXN5bmMgKCkgPT4ge1xuICBpZiAoXG4gICAgIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdndXRlbmJlZS12aW1lby1hcGktc2NyaXB0JykgJiZcbiAgICAhdmltZW9BcGlMb2FkZWQoKVxuICApIHtcbiAgICBjb25zdCB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICB0YWcuaWQgPSAnZ3V0ZW5iZWUtdmltZW8tYXBpLXNjcmlwdCc7XG4gICAgdGFnLnNyYyA9ICdodHRwczovL3BsYXllci52aW1lby5jb20vYXBpL3BsYXllci5qcyc7XG4gICAgY29uc3QgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XG4gICAgZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFnLCBmaXJzdFNjcmlwdFRhZyk7XG4gIH1cblxuICBjb25zdCBhcGlMb2FkZWQgPSByZXNvbHZlID0+IHtcbiAgICBpZiAoIXZpbWVvQXBpTG9hZGVkKCkpIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gYXBpTG9hZGVkKHJlc29sdmUpLCAzNTApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJlc29sdmUodHJ1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBhcGlMb2FkZWQocmVzb2x2ZSwgcmVqZWN0KTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIE1hdGNoZXMgYSBwYXJ0aWN1bGFyIGFycmF5IG9mIHBhdHRlcm5zIG9uIGEgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBiZSBtYXRjaGVkLlxuICogQHBhcmFtIHtBcnJheX0gcGF0dGVybnMgQW4gYXJyYXkgb2YgVVJMIHBhdHRlcm5zIHRvIG1hdGNoLlxuICogQHJldHVybnMge2Jvb2xlYW59IFdoZXRoZXIgYSBwYXR0ZXJuIHdhcyBtYXRjaGVkLlxuICovXG5jb25zdCBtYXRjaGVzUGF0dGVybnMgPSAoc3RyLCBwYXR0ZXJucyA9IFtdKSA9PlxuICBwYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gc3RyLm1hdGNoKHBhdHRlcm4pKTtcblxuLyoqXG4gKiBZb3VUdWJlIFVSTCBwYXR0ZXJucy5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwW119XG4gKi9cbmNvbnN0IHlvdVR1YmVVcmxQYXR0ZXJucyA9IFtcbiAgL15odHRwcz86XFwvXFwvKChtfHd3dylcXC4pP3lvdXR1YmVcXC5jb21cXC8uKy9pLFxuICAvXmh0dHBzPzpcXC9cXC95b3V0dVxcLmJlXFwvLisvaSxcbl07XG5cbi8qKlxuICogVmltZW8gVVJMIHBhdHRlcm5zLlxuICpcbiAqIEB0eXBlIHtSZWdFeHBbXX1cbiAqL1xuY29uc3QgdmltZW9VcmxQYXR0ZXJucyA9IFsvXmh0dHBzPzpcXC9cXC8od3d3XFwuKT92aW1lb1xcLmNvbVxcLy4rL2ldO1xuXG4vKipcbiAqIFNlbGYgaG9zdGVkIHZpZGVvIFVSTCBwYXR0ZXJucy5cbiAqXG4gKiBAdHlwZSB7UmVnRXhwW119XG4gKi9cbmNvbnN0IHNlbGZIb3N0ZWRWaWRlb1VybFBhdHRlcm5zID0gW1xuICAvKFthLXpBLVowLTlcXHNfXFxcXC5cXC1cXChcXCk6XSkrKC53ZWJtfC5ta3Z8LmF2aXwubW92fC5tcDR8Lm9nZykvaSxcbl07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVmltZW8gdmlkZW8gSUQgYmFzZWQgb24gdGhlIFVSTCBwcm92aWRlZC5cbiAqIEBzZWUgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vdGFraWVuLzQwNzcxOTUjZ2lzdGNvbW1lbnQtMzQxMDIyOFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFlvdVR1YmUgdmlkZW8gVVJMLlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuY29uc3QgZ2V0WW91VHViZUlkQnlVcmwgPSB1cmwgPT4ge1xuICBjb25zdCBhcnIgPSB1cmwuc3BsaXQoLyh2aVxcL3x2JTNEfHY9fFxcL3ZcXC98eW91dHVcXC5iZVxcL3xcXC9lbWJlZFxcLykvKTtcbiAgcmV0dXJuIHVuZGVmaW5lZCAhPT0gYXJyWzJdID8gYXJyWzJdLnNwbGl0KC9bXlxcdy1dL2kpWzBdIDogYXJyWzBdO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBWaW1lbyB2aWRlbyBJRCBiYXNlZCBvbiB0aGUgVVJMIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVmltZW8gdmlkZW8gVVJMLlxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHZpZGVvIElELlxuICovXG5jb25zdCBnZXRWaW1lb0lkQnlVcmwgPSB1cmwgPT4ge1xuICBsZXQgaWQgPSBudWxsO1xuICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gIHJlcXVlc3Qub3BlbignR0VUJywgJ2h0dHBzOi8vdmltZW8uY29tL2FwaS9vZW1iZWQuanNvbj91cmw9JyArIHVybCwgZmFsc2UpO1xuXG4gIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcblxuICAgICAgaWYgKHJlc3BvbnNlLnZpZGVvX2lkKSB7XG4gICAgICAgIGlkID0gcmVzcG9uc2UudmlkZW9faWQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHJlcXVlc3Quc2VuZCgpO1xuICByZXR1cm4gaWQ7XG59O1xuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGV4dHJhY3QgdGhlIHZpZGVvIHN0YXJ0IHRpbWUgZnJvbSBhIFlvdVR1YmUgVVJMLlxuICpcbiAqIEBwYXJhbSB1cmwgVGhlIFlvdVR1YmUgVVJMLlxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuY29uc3QgZ2V0WW91VHViZVN0YXJ0VGltZUZyb21VcmwgPSB1cmwgPT4ge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkwodXJsKS5zZWFyY2hQYXJhbXM7XG4gIGNvbnN0IHRpbWUgPSBwYXJhbXMuZ2V0KCd0Jyk7XG5cbiAgcmV0dXJuIHRpbWU7XG59O1xuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGV4dHJhY3QgdGhlIHZpZGVvIHN0YXJ0IHRpbWUgZnJvbSBhIFZpbWVvIFVSTC5cbiAqXG4gKiBAcGFyYW0gdXJsIFRoZSBWaW1lbyBVUkwuXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5jb25zdCBnZXRWaW1lb1N0YXJ0VGltZUZyb21VcmwgPSB1cmwgPT4ge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBWaW1lbyBVUkxzIGFyZSBpbiB0aGUgZm9ybWF0IG9mIGh0dHBzOi8vdmltZW8uY29tLzU0NjExNzgxMiN0PTEwc1xuICAvLyBzbyB3ZSBjb252ZXJ0IHRoZSBoYXNoIHRvIGEgcXVlcnkgcGFyYW1cbiAgY29uc3QgcmVwbGFjZWQgPSB1cmwucmVwbGFjZSgnIycsICc/Jyk7XG4gIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkwocmVwbGFjZWQpLnNlYXJjaFBhcmFtcztcbiAgY29uc3QgdGltZSA9IHBhcmFtcy5nZXQoJ3QnKTtcblxuICByZXR1cm4gdGltZT8ucmVwbGFjZSgncycsICcnKSA/PyB1bmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIFRha2VzIGluIGEgVVJMIGFuZCByZXR1cm5zIHRoZSBtYXRjaGVkIHByb3ZpZGVyJ3MgaW5mbyAoaWYgYW55KS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwuXG4gKiBAcmV0dXJucyB7e3Byb3ZpZGVyOiBzdHJpbmcsIGlkOiBzdHJpbmd9fG51bGx8e3Byb3ZpZGVyOiBzdHJpbmcsIGlkOiBudWxsfX1cbiAqL1xuZXhwb3J0IGNvbnN0IGdldFZpZGVvUHJvdmlkZXJJbmZvQnlVcmwgPSAodXJsID0gJycpID0+IHtcbiAgaWYgKCF1cmwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChtYXRjaGVzUGF0dGVybnModXJsLCB5b3VUdWJlVXJsUGF0dGVybnMpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlkOiBnZXRZb3VUdWJlSWRCeVVybCh1cmwpLFxuICAgICAgcHJvdmlkZXI6ICd5b3V0dWJlJyxcbiAgICAgIHVybCxcbiAgICAgIHN0YXJ0OiBnZXRZb3VUdWJlU3RhcnRUaW1lRnJvbVVybCh1cmwpLFxuICAgIH07XG4gIH1cblxuICBpZiAobWF0Y2hlc1BhdHRlcm5zKHVybCwgdmltZW9VcmxQYXR0ZXJucykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGdldFZpbWVvSWRCeVVybCh1cmwpLFxuICAgICAgcHJvdmlkZXI6ICd2aW1lbycsXG4gICAgICB1cmwsXG4gICAgICBzdGFydDogZ2V0VmltZW9TdGFydFRpbWVGcm9tVXJsKHVybCksXG4gICAgfTtcbiAgfVxuXG4gIGlmIChtYXRjaGVzUGF0dGVybnModXJsLCBzZWxmSG9zdGVkVmlkZW9VcmxQYXR0ZXJucykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHVybCxcbiAgICAgIHByb3ZpZGVyOiAnc2VsZicsXG4gICAgICB1cmwsXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgaWQ6IG51bGwsXG4gICAgcHJvdmlkZXI6ICd1bnN1cHBvcnRlZCcsXG4gIH07XG59O1xuIiwiaW1wb3J0IGpRdWVyeSBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQge1xuICBtYXliZUxvYWRWaW1lb0FwaSxcbiAgbWF5YmVMb2FkWW91VHViZUFwaSxcbn0gZnJvbSAnLi4vLi4vdXRpbC92aWRlby9wcm92aWRlcnMnO1xuXG5qUXVlcnkoJCA9PiB7XG4gIGNvbnN0ICR2aWRlb0VtYmVkID0gJCgnLmd1dGVuYmVlLXZpZGVvLWVtYmVkJyk7XG4gIGNvbnN0ICR2aWRlb1dyYXAgPSAkdmlkZW9FbWJlZC5wYXJlbnRzKCcuZ3V0ZW5iZWUtdmlkZW8tZW1iZWQtd3JhcHBlcicpO1xuXG4gIGNvbnN0IGF0dHJTdGF0ZSA9IGF0dHIgPT4ge1xuICAgIHJldHVybiAndHJ1ZScgPT09IGF0dHIgPyAxIDogMDtcbiAgfTtcblxuICAvLyBZb3VUdWJlIHZpZGVvc1xuICBjb25zdCBvbllvdVR1YmVBcGlSZWFkeSA9IHZpZGVvRW1iZWQgPT4ge1xuICAgIGNvbnN0ICRkYXRhc2V0ID0gdmlkZW9FbWJlZFswXS5kYXRhc2V0O1xuICAgIGNvbnN0ICR2aWRlbyA9ICQodmlkZW9FbWJlZClcbiAgICAgIC5maW5kKCdkaXYnKVxuICAgICAgLmdldCgwKTtcbiAgICBjb25zdCAkb3ZlcmxheSA9ICQodmlkZW9FbWJlZCkuc2libGluZ3MoJy5ndXRlbmJlZS12aWRlby1lbWJlZC1vdmVybGF5Jyk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICBjb25zdCB5dFBsYXllciA9IG5ldyB3aW5kb3cuWVQuUGxheWVyKCR2aWRlbywge1xuICAgICAgdmlkZW9JZDogJGRhdGFzZXQudmlkZW9JZCxcbiAgICAgIHBsYXllclZhcnM6IHtcbiAgICAgICAgYXV0b3BsYXk6ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXlcbiAgICAgICAgICA/IGF0dHJTdGF0ZSgkZGF0YXNldC52aWRlb0F1dG9wbGF5KVxuICAgICAgICAgIDogMCxcbiAgICAgICAgY29udHJvbHM6ICRkYXRhc2V0LnZpZGVvQ29udHJvbHNcbiAgICAgICAgICA/IGF0dHJTdGF0ZSgkZGF0YXNldC52aWRlb0NvbnRyb2xzKVxuICAgICAgICAgIDogMCxcbiAgICAgICAgc2hvd2luZm86IDAsXG4gICAgICAgIG1vZGVzdGJyYW5kaW5nOiAkZGF0YXNldC52aWRlb0JyYW5kaW5nXG4gICAgICAgICAgPyBhdHRyU3RhdGUoJGRhdGFzZXQudmlkZW9CcmFuZGluZylcbiAgICAgICAgICA6IDAsXG4gICAgICAgIGxvb3A6ICRkYXRhc2V0LnZpZGVvTG9vcCA/IGF0dHJTdGF0ZSgkZGF0YXNldC52aWRlb0xvb3ApIDogMCxcbiAgICAgICAgcGxheWxpc3Q6ICRkYXRhc2V0LnZpZGVvSWQsXG4gICAgICAgIGZzOiAwLFxuICAgICAgICBjY19sb2FkX3BvbGljeTogMCxcbiAgICAgICAgaXZfbG9hZF9wb2xpY3k6IDMsXG4gICAgICAgIGF1dG9oaWRlOiAwLFxuICAgICAgICBtdXRlOiAkZGF0YXNldC52aWRlb011dGUgPyBhdHRyU3RhdGUoJGRhdGFzZXQudmlkZW9NdXRlKSA6IDAsXG4gICAgICAgIHN0YXJ0OiBwYXJzZUludCgkZGF0YXNldC52aWRlb1N0YXJ0LCAxMCkgfHwgdW5kZWZpbmVkLFxuICAgICAgICBlbmQ6IHBhcnNlSW50KCRkYXRhc2V0LnZpZGVvRW5kLCAxMCkgfHwgdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBvblJlYWR5OiBldmVudCA9PiB7XG4gICAgICAgICAgaWYgKCd0cnVlJyA9PT0gJGRhdGFzZXQudmlkZW9BdXRvcGxheSkge1xuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnBsYXlWaWRlbygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICgndHJ1ZScgPT09ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXkgJiYgJG92ZXJsYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAkb3ZlcmxheS5mYWRlT3V0KCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICdmYWxzZScgPT09ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXkgJiZcbiAgICAgICAgICAgICRvdmVybGF5Lmxlbmd0aCAmJlxuICAgICAgICAgICAgJ3RydWUnID09PSAkZGF0YXNldC52aWRlb0xhenlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgICRvdmVybGF5LmZhZGVPdXQ7XG4gICAgICAgICAgICB5dFBsYXllci5wbGF5VmlkZW8oKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCdmYWxzZScgPT09ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXkgJiYgJG92ZXJsYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAkb3ZlcmxheS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJG92ZXJsYXlcbiAgICAgICAgICAgICAgICAuZmluZCgnZGl2JylcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2d1dGVuYmVlLXNwaW5uZXInKVxuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygncGxheS1idXR0b24nKTtcbiAgICAgICAgICAgICAgeXRQbGF5ZXIucGxheVZpZGVvKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uU3RhdGVDaGFuZ2U6IGV2ZW50ID0+IHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PT0gd2luZG93LllULlBsYXllclN0YXRlLlBMQVlJTkcpIHtcbiAgICAgICAgICAgICRvdmVybGF5LmZhZGVPdXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9O1xuXG4gIC8vIFZpbWVvIHZpZGVvc1xuICBjb25zdCBvblZpbWVvQXBpUmVhZHkgPSB2aWRlb0VtYmVkID0+IHtcbiAgICBjb25zdCAkZGF0YXNldCA9IHZpZGVvRW1iZWRbMF0uZGF0YXNldDtcbiAgICBjb25zdCAkb3ZlcmxheSA9ICQodmlkZW9FbWJlZCkuc2libGluZ3MoJy5ndXRlbmJlZS12aWRlby1lbWJlZC1vdmVybGF5Jyk7XG5cbiAgICBjb25zdCBwbGF5ZXIgPSBuZXcgd2luZG93LlZpbWVvLlBsYXllcih2aWRlb0VtYmVkLCB7XG4gICAgICBpZDogJGRhdGFzZXQudmlkZW9JZCxcbiAgICAgIGxvb3A6ICRkYXRhc2V0LnZpZGVvTG9vcCA/IGF0dHJTdGF0ZSgkZGF0YXNldC52aWRlb0xvb3ApIDogMCxcbiAgICAgIGF1dG9wbGF5OiAkZGF0YXNldC52aWRlb0F1dG9wbGF5ID8gYXR0clN0YXRlKCRkYXRhc2V0LnZpZGVvQXV0b3BsYXkpIDogMCxcbiAgICAgIGNvbnRyb2xzOiAkZGF0YXNldC52aWRlb0NvbnRyb2xzID8gYXR0clN0YXRlKCRkYXRhc2V0LnZpZGVvQ29udHJvbHMpIDogMCxcbiAgICAgIGJ5bGluZTogZmFsc2UsXG4gICAgICB0aXRsZTogZmFsc2UsXG4gICAgICBhdXRvcGF1c2U6IGZhbHNlLFxuICAgICAgbXV0ZWQ6ICRkYXRhc2V0LnZpZGVvTXV0ZSA/IGF0dHJTdGF0ZSgkZGF0YXNldC52aWRlb011dGUpIDogMCxcbiAgICB9KTtcblxuICAgIGlmICgkZGF0YXNldC52aWRlb1N0YXJ0KSB7XG4gICAgICBwbGF5ZXIuc2V0Q3VycmVudFRpbWUoJGRhdGFzZXQudmlkZW9TdGFydCk7XG4gICAgfVxuXG4gICAgcGxheWVyLm9uKCdsb2FkZWQnLCBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgndHJ1ZScgPT09ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXkgJiYgJG92ZXJsYXkubGVuZ3RoKSB7XG4gICAgICAgICRvdmVybGF5LmZhZGVPdXQoKTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICdmYWxzZScgPT09ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXkgJiZcbiAgICAgICAgJG92ZXJsYXkubGVuZ3RoICYmXG4gICAgICAgICd0cnVlJyA9PT0gJGRhdGFzZXQudmlkZW9MYXp5XG4gICAgICApIHtcbiAgICAgICAgcGxheWVyLnBsYXkoKTtcbiAgICAgICAgcGxheWVyLm9uKCdwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJG92ZXJsYXkuZmFkZU91dCgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoJ2ZhbHNlJyA9PT0gJGRhdGFzZXQudmlkZW9BdXRvcGxheSAmJiAkb3ZlcmxheS5sZW5ndGgpIHtcbiAgICAgICAgJG92ZXJsYXkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJG92ZXJsYXlcbiAgICAgICAgICAgIC5maW5kKCdkaXYnKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdndXRlbmJlZS1zcGlubmVyJylcbiAgICAgICAgICAgIC5yZW1vdmVDbGFzcygncGxheS1idXR0b24nKTtcbiAgICAgICAgICBwbGF5ZXIucGxheSgpO1xuICAgICAgICAgIHBsYXllci5vbigncGxheScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJG92ZXJsYXkuZmFkZU91dCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVFbWJlZCA9IGFzeW5jIChmaXJzdFNjcmlwdCwgdmlkZW9UeXBlLCB2aWRlb0VtYmVkKSA9PiB7XG4gICAgaWYgKHZpZGVvVHlwZSA9PT0gJ3lvdXR1YmUnKSB7XG4gICAgICBhd2FpdCBtYXliZUxvYWRZb3VUdWJlQXBpKCk7XG4gICAgICBvbllvdVR1YmVBcGlSZWFkeSh2aWRlb0VtYmVkKTtcbiAgICB9XG5cbiAgICBpZiAodmlkZW9UeXBlID09PSAndmltZW8nKSB7XG4gICAgICBhd2FpdCBtYXliZUxvYWRWaW1lb0FwaSgpO1xuICAgICAgb25WaW1lb0FwaVJlYWR5KHZpZGVvRW1iZWQpO1xuICAgIH1cbiAgfTtcblxuICAkdmlkZW9XcmFwLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcbiAgICBjb25zdCBlbWJlZExvYWRlZCA9ICR0aGlzLmZpbmQoJ2lmcmFtZScpLmxlbmd0aDtcblxuICAgIGNvbnN0ICRvdmVybGF5ID0gJHRoaXMuZmluZCgnLmd1dGVuYmVlLXZpZGVvLWVtYmVkLW92ZXJsYXknKTtcbiAgICBjb25zdCAkdmlkZW9FbWJlZCA9ICR0aGlzLmZpbmQoJy5ndXRlbmJlZS12aWRlby1lbWJlZCcpO1xuXG4gICAgY29uc3QgJGZpcnN0U2NyaXB0ID0gJCgnc2NyaXB0Jyk7XG4gICAgY29uc3QgdmlkZW9UeXBlID0gJHZpZGVvRW1iZWQuZGF0YSgndmlkZW8tdHlwZScpO1xuXG4gICAgaWYgKGVtYmVkTG9hZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJG92ZXJsYXkuZmluZCgnZGl2JykucmVtb3ZlQ2xhc3MoJ3BsYXktYnV0dG9uJyk7XG4gICAgJG92ZXJsYXkuZmluZCgnZGl2JykuYWRkQ2xhc3MoJ2d1dGVuYmVlLXNwaW5uZXInKTtcbiAgICBjcmVhdGVFbWJlZCgkZmlyc3RTY3JpcHQsIHZpZGVvVHlwZSwgJHZpZGVvRW1iZWQpO1xuICB9KTtcblxuICAkdmlkZW9FbWJlZC5lYWNoKGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcbiAgICBjb25zdCBmaXJzdFNjcmlwdCA9ICQoJ3NjcmlwdCcpO1xuICAgIGNvbnN0ICRkYXRhc2V0ID0gJHRoaXNbMF0uZGF0YXNldDtcbiAgICBjb25zdCAkb3ZlcmxheSA9ICR0aGlzLnNpYmxpbmdzKCcuZ3V0ZW5iZWUtdmlkZW8tZW1iZWQtb3ZlcmxheScpO1xuXG4gICAgaWYgKDEgPT09ICRvdmVybGF5Lmxlbmd0aCAmJiAnZmFsc2UnID09PSAkZGF0YXNldC52aWRlb0F1dG9wbGF5KSB7XG4gICAgICAkb3ZlcmxheS5maW5kKCdkaXYnKS5hZGRDbGFzcygncGxheS1idXR0b24nKTtcbiAgICB9IGVsc2UgaWYgKDEgPT09ICRvdmVybGF5Lmxlbmd0aCAmJiAndHJ1ZScgPT09ICRkYXRhc2V0LnZpZGVvQXV0b3BsYXkpIHtcbiAgICAgICRvdmVybGF5LmZpbmQoJ2RpdicpLmFkZENsYXNzKCdndXRlbmJlZS1zcGlubmVyJyk7XG4gICAgfVxuXG4gICAgaWYgKDAgPT09ICRvdmVybGF5Lmxlbmd0aCB8fCAnZmFsc2UnID09PSAkZGF0YXNldC52aWRlb0xhenkpIHtcbiAgICAgIGNyZWF0ZUVtYmVkKGZpcnN0U2NyaXB0LCAkZGF0YXNldC52aWRlb1R5cGUsICR0aGlzKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuICB2YXIgJHN0aWNreVdyYXAgPSAkKCcud3AtYmxvY2stZ3V0ZW5iZWUtdmlkZW8tZW1iZWQtc3RpY2t5Jyk7XG4gIHZhciAkc3RpY2t5VmlkZW9XcmFwID0gJHN0aWNreVdyYXAuZmluZCgnLmd1dGVuYmVlLXZpZGVvLWVtYmVkLXdyYXBwZXInKTtcbiAgdmFyIHZpZGVvV3JhcEhlaWdodCA9ICRzdGlja3lXcmFwLm91dGVySGVpZ2h0KCk7XG4gIHZhciBvZmZzZXQgPSA1MDtcblxuICBpZiAoJHN0aWNreVdyYXAubGVuZ3RoKSB7XG4gICAgJHdpbmRvdy5vbignc2Nyb2xsJywgZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgd2luZG93U2Nyb2xsVG9wID0gJHdpbmRvdy5zY3JvbGxUb3AoKTtcbiAgICAgIHZhciB2aWRlb0JvdHRvbSA9IHZpZGVvV3JhcEhlaWdodCArICRzdGlja3lXcmFwLm9mZnNldCgpLnRvcDtcblxuICAgICAgaWYgKHdpbmRvd1Njcm9sbFRvcCA+IHZpZGVvQm90dG9tICsgb2Zmc2V0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhJHN0aWNreVZpZGVvV3JhcC5oYXNDbGFzcygnY2xvc2VkJykgJiZcbiAgICAgICAgICAhJHN0aWNreVZpZGVvV3JhcC5oYXNDbGFzcygnc3R1Y2snKVxuICAgICAgICApIHtcbiAgICAgICAgICAkc3RpY2t5V3JhcC5oZWlnaHQodmlkZW9XcmFwSGVpZ2h0KTtcbiAgICAgICAgICAkc3RpY2t5VmlkZW9XcmFwLmFkZENsYXNzKCdzdHVjaycpO1xuICAgICAgICAgICRzdGlja3lWaWRlb1dyYXAuYXBwZW5kKCc8c3BhbiBjbGFzcz1cImNsb3NlXCI+w5c8L3NwYW4+Jyk7XG4gICAgICAgICAgdmFyICRjbG9zZSA9ICQoJHN0aWNreVZpZGVvV3JhcCkuZmluZCgnLmNsb3NlJyk7XG4gICAgICAgICAgJGNsb3NlLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyICR2aWRlb0lkID0gJCh0aGlzKVxuICAgICAgICAgICAgICAuc2libGluZ3MoJy5ndXRlbmJlZS12aWRlby1lbWJlZCcpXG4gICAgICAgICAgICAgIC5maW5kKCdpZnJhbWUnKVxuICAgICAgICAgICAgICAuYXR0cignaWQnKTtcbiAgICAgICAgICAgIGRvY3VtZW50XG4gICAgICAgICAgICAgIC5nZXRFbGVtZW50QnlJZCgkdmlkZW9JZClcbiAgICAgICAgICAgICAgLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoXG4gICAgICAgICAgICAgICAgJ3tcImV2ZW50XCI6XCJjb21tYW5kXCIsXCJmdW5jXCI6XCJwYXVzZVZpZGVvXCIsXCJhcmdzXCI6XCJcIn0nLFxuICAgICAgICAgICAgICAgICcqJyxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICRzdGlja3lWaWRlb1dyYXAucmVtb3ZlQ2xhc3MoJ3N0dWNrJyk7XG4gICAgICAgICAgICAkc3RpY2t5VmlkZW9XcmFwLmFkZENsYXNzKCdjbG9zZWQnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHN0aWNreVZpZGVvV3JhcC5yZW1vdmVDbGFzcygnc3R1Y2snKTtcbiAgICAgICAgJHN0aWNreVZpZGVvV3JhcC5maW5kKCcuY2xvc2UnKS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG4iLCJpbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5cbmltcG9ydCB7XG4gIG1heWJlTG9hZFZpbWVvQXBpLFxuICBtYXliZUxvYWRZb3VUdWJlQXBpLFxufSBmcm9tICcuLi8uLi91dGlsL3ZpZGVvL3Byb3ZpZGVycyc7XG5cbmpRdWVyeSgkID0+IHtcbiAgY29uc3QgJHdpbmRvdyA9ICQod2luZG93KTtcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHQgVmlkZW8gQmFja2dyb3VuZHNcblx0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIGNvbnN0ICR2aWRlb0JnID0gJChcbiAgICAnLndwLWJsb2NrLWd1dGVuYmVlLWNvbnRhaW5lciAud3AtYmxvY2stZ3V0ZW5iZWUtdmlkZW8tYmcnLFxuICApO1xuICBjb25zdCAkdmlkZW9XcmFwID0gJHZpZGVvQmcucGFyZW50cygnLndwLWJsb2NrLWd1dGVuYmVlLXZpZGVvLWJnLXdyYXBwZXInKTtcblxuICAvLyBZb3VUdWJlIHZpZGVvc1xuICBmdW5jdGlvbiBvbllvdVR1YmVBcGlSZWFkeSgkdmlkZW9CZykge1xuICAgIGNvbnN0ICR2aWRlb1dyYXAgPSAkdmlkZW9CZy5wYXJlbnRzKCcud3AtYmxvY2stZ3V0ZW5iZWUtdmlkZW8tYmctd3JhcHBlcicpO1xuICAgIGNvbnN0ICRibG9jayA9ICR2aWRlb1dyYXAuY2xvc2VzdCgnLndwLWJsb2NrLWd1dGVuYmVlLWNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHZpZGVvSWQgPSAkdmlkZW9XcmFwLmRhdGEoJ3ZpZGVvLWlkJyk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gJHZpZGVvV3JhcC5kYXRhKCd2aWRlby1zdGFydCcpO1xuXG4gICAgY29uc3QgdmlkZW8gPSAkdmlkZW9CZy5hdHRyKCdpZCcpO1xuICAgIG5ldyB3aW5kb3cuWVQuUGxheWVyKHZpZGVvLCB7XG4gICAgICB2aWRlb0lkOiB2aWRlb0lkLFxuICAgICAgcGxheWVyVmFyczoge1xuICAgICAgICBhdXRvcGxheTogMSxcbiAgICAgICAgY29udHJvbHM6IDAsXG4gICAgICAgIHNob3dpbmZvOiAwLFxuICAgICAgICBtb2Rlc3RicmFuZGluZzogMSxcbiAgICAgICAgbG9vcDogMSxcbiAgICAgICAgcGxheWxpc3Q6IHZpZGVvSWQsXG4gICAgICAgIGZzOiAwLFxuICAgICAgICBjY19sb2FkX3BvbGljeTogMCxcbiAgICAgICAgaXZfbG9hZF9wb2xpY3k6IDMsXG4gICAgICAgIGF1dG9oaWRlOiAwLFxuICAgICAgICBzdGFydDogc3RhcnRUaW1lIHx8IHVuZGVmaW5lZCxcbiAgICAgIH0sXG4gICAgICBldmVudHM6IHtcbiAgICAgICAgb25SZWFkeTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBldmVudC50YXJnZXQubXV0ZSgpO1xuICAgICAgICAgIGV2ZW50LnRhcmdldC5wbGF5VmlkZW8oKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25TdGF0ZUNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PT0gd2luZG93LllULlBsYXllclN0YXRlLlBMQVlJTkcpIHtcbiAgICAgICAgICAgIGFkanVzdFZpZGVvU2l6ZSgkdmlkZW9XcmFwKTtcbiAgICAgICAgICAgICR2aWRlb1dyYXAuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICRibG9jay5hZGRDbGFzcygnZ3V0ZW5iZWUtdmlkZW8tbG9hZGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFZpbWVvIHZpZGVvc1xuICBmdW5jdGlvbiBvblZpbWVvQXBpUmVhZHkoJHZpZGVvQmcpIHtcbiAgICBjb25zdCAkdmlkZW9XcmFwID0gJHZpZGVvQmcucGFyZW50cygnLndwLWJsb2NrLWd1dGVuYmVlLXZpZGVvLWJnLXdyYXBwZXInKTtcbiAgICBjb25zdCAkYmxvY2sgPSAkdmlkZW9XcmFwLmNsb3Nlc3QoJy53cC1ibG9jay1ndXRlbmJlZS1jb250YWluZXInKTtcbiAgICBjb25zdCB2aWRlb0lkID0gJHZpZGVvV3JhcC5kYXRhKCd2aWRlby1pZCcpO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9ICR2aWRlb1dyYXAuZGF0YSgndmlkZW8tc3RhcnQnKTtcblxuICAgIGNvbnN0IHBsYXllciA9IG5ldyB3aW5kb3cuVmltZW8uUGxheWVyKCR2aWRlb0JnLCB7XG4gICAgICBpZDogdmlkZW9JZCxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgIGJ5bGluZTogZmFsc2UsXG4gICAgICB0aXRsZTogZmFsc2UsXG4gICAgICBhdXRvcGF1c2U6IGZhbHNlLFxuICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgfSk7XG5cbiAgICBwbGF5ZXIuc2V0Vm9sdW1lKDApO1xuXG4gICAgaWYgKHN0YXJ0VGltZSkge1xuICAgICAgcGxheWVyLnNldEN1cnJlbnRUaW1lKHN0YXJ0VGltZSk7XG4gICAgfVxuXG4gICAgcGxheWVyLm9uKCdwbGF5aW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICBhZGp1c3RWaWRlb1NpemUoJHZpZGVvV3JhcCk7XG4gICAgICAkdmlkZW9XcmFwLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAkYmxvY2suYWRkQ2xhc3MoJ2d1dGVuYmVlLXZpZGVvLWxvYWRlZCcpO1xuICAgIH0pO1xuICB9XG5cbiAgbGV0IHZpZGVvUmVzaXplVGltZXI7XG5cbiAgJHdpbmRvdy5vbigncmVzaXplLmNpVmlkZW8nLCBmdW5jdGlvbigpIHtcbiAgICBjbGVhclRpbWVvdXQodmlkZW9SZXNpemVUaW1lcik7XG4gICAgdmlkZW9SZXNpemVUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAkdmlkZW9XcmFwLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgYWRqdXN0VmlkZW9TaXplKCR0aGlzKTtcbiAgICAgIH0pO1xuICAgIH0sIDM1MCk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGdldFZpZGVvU2l6ZSgkdmlkZW9XcmFwKSB7XG4gICAgY29uc3QgY29udGFpbmVyV2lkdGggPSAkdmlkZW9XcmFwLm91dGVyV2lkdGgoKTtcbiAgICBjb25zdCBjb250YWluZXJIZWlnaHQgPSAkdmlkZW9XcmFwLm91dGVySGVpZ2h0KCk7XG4gICAgY29uc3QgYXNwZWN0UmF0aW8gPSAxNiAvIDk7XG4gICAgY29uc3QgcmF0aW9XaWR0aCA9IGNvbnRhaW5lcldpZHRoIC8gYXNwZWN0UmF0aW87XG4gICAgY29uc3QgcmF0aW9IZWlnaHQgPSBjb250YWluZXJIZWlnaHQgKiBhc3BlY3RSYXRpbztcbiAgICBjb25zdCBpc1dpZHRoRml4ZWQgPSBjb250YWluZXJXaWR0aCAvIGNvbnRhaW5lckhlaWdodCA+IGFzcGVjdFJhdGlvO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBpc1dpZHRoRml4ZWQgPyBjb250YWluZXJXaWR0aCA6IHJhdGlvSGVpZ2h0LFxuICAgICAgaGVpZ2h0OiBpc1dpZHRoRml4ZWQgPyByYXRpb1dpZHRoIDogY29udGFpbmVySGVpZ2h0LFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBhZGp1c3RWaWRlb1NpemUoJHZpZGVvV3JhcCkge1xuICAgIGNvbnN0IHNpemUgPSBnZXRWaWRlb1NpemUoJHZpZGVvV3JhcCk7XG5cbiAgICAkdmlkZW9XcmFwLmZpbmQoJ2lmcmFtZSwgdmlkZW8nKS5jc3Moe1xuICAgICAgd2lkdGg6IHNpemUud2lkdGggKyAncHgnLFxuICAgICAgaGVpZ2h0OiBzaXplLmhlaWdodCArICdweCcsXG4gICAgfSk7XG4gIH1cblxuICBpZiAoJHZpZGVvQmcubGVuZ3RoICYmIHdpbmRvdy5pbm5lcldpZHRoID4gMTA4MCkge1xuICAgICR2aWRlb0JnLmVhY2goYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCAkdGhpcyA9ICQodGhpcyk7XG4gICAgICBjb25zdCB2aWRlb1R5cGUgPSAkdGhpc1xuICAgICAgICAucGFyZW50cygnLndwLWJsb2NrLWd1dGVuYmVlLXZpZGVvLWJnLXdyYXBwZXInKVxuICAgICAgICAuZGF0YSgndmlkZW8tdHlwZScpO1xuICAgICAgY29uc3QgJHZpZGVvV3JhcCA9ICR0aGlzLnBhcmVudHMoJy53cC1ibG9jay1ndXRlbmJlZS12aWRlby1iZy13cmFwcGVyJyk7XG4gICAgICBjb25zdCAkYmxvY2sgPSAkdGhpcy5jbG9zZXN0KCcud3AtYmxvY2stZ3V0ZW5iZWUtY29udGFpbmVyJyk7XG5cbiAgICAgIGlmICh2aWRlb1R5cGUgPT09ICd5b3V0dWJlJykge1xuICAgICAgICBhd2FpdCBtYXliZUxvYWRZb3VUdWJlQXBpKCk7XG4gICAgICAgIG9uWW91VHViZUFwaVJlYWR5KCR0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAodmlkZW9UeXBlID09PSAndmltZW8nKSB7XG4gICAgICAgIGF3YWl0IG1heWJlTG9hZFZpbWVvQXBpKCk7XG4gICAgICAgIG9uVmltZW9BcGlSZWFkeSgkdGhpcyk7XG4gICAgICB9IGVsc2UgaWYgKHZpZGVvVHlwZSA9PT0gJ3NlbGYnKSB7XG4gICAgICAgICR2aWRlb1dyYXAuZmluZCgndmlkZW8nKS5vbigncGxheScsICgpID0+IHtcbiAgICAgICAgICAkdmlkZW9XcmFwLmFkZENsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgJGJsb2NrLmFkZENsYXNzKCdndXRlbmJlZS12aWRlby1sb2FkZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pO1xuIiwiaW1wb3J0IGpRdWVyeSBmcm9tICdqcXVlcnknO1xuXG5pbXBvcnQge1xuICBtYXliZUxvYWRWaW1lb0FwaSxcbiAgbWF5YmVMb2FkWW91VHViZUFwaSxcbn0gZnJvbSAnLi4vLi4vdXRpbC92aWRlby9wcm92aWRlcnMnO1xuXG5qUXVlcnkoJCA9PiB7XG4gIGNvbnN0ICR3aW5kb3cgPSAkKHdpbmRvdyk7XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0IFZpZGVvIEJhY2tncm91bmRzXG5cdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBjb25zdCAkdmlkZW9CZyA9ICQoJy53cC1ibG9jay1ndXRlbmJlZS1iYW5uZXIgLndwLWJsb2NrLWd1dGVuYmVlLXZpZGVvLWJnJyk7XG4gIGNvbnN0ICR2aWRlb1dyYXAgPSAkdmlkZW9CZy5wYXJlbnRzKCcud3AtYmxvY2stZ3V0ZW5iZWUtdmlkZW8tYmctd3JhcHBlcicpO1xuXG4gIC8vIFlvdVR1YmUgdmlkZW9zXG4gIGZ1bmN0aW9uIG9uWW91VHViZUFQSVJlYWR5KCR2aWRlb0JnKSB7XG4gICAgY29uc3QgJHZpZGVvV3JhcCA9ICR2aWRlb0JnLnBhcmVudHMoJy53cC1ibG9jay1ndXRlbmJlZS12aWRlby1iZy13cmFwcGVyJyk7XG4gICAgY29uc3QgJGJsb2NrID0gJHZpZGVvV3JhcC5jbG9zZXN0KCcud3AtYmxvY2stZ3V0ZW5iZWUtYmFubmVyJyk7XG4gICAgY29uc3QgdmlkZW9JZCA9ICR2aWRlb1dyYXAuZGF0YSgndmlkZW8taWQnKTtcbiAgICBjb25zdCBzdGFydFRpbWUgPSAkdmlkZW9XcmFwLmRhdGEoJ3ZpZGVvLXN0YXJ0Jyk7XG4gICAgY29uc3QgdmlkZW8gPSAkdmlkZW9CZy5hdHRyKCdpZCcpO1xuXG4gICAgbmV3IHdpbmRvdy5ZVC5QbGF5ZXIodmlkZW8sIHtcbiAgICAgIHZpZGVvSWQ6IHZpZGVvSWQsXG4gICAgICBwbGF5ZXJWYXJzOiB7XG4gICAgICAgIGF1dG9wbGF5OiAxLFxuICAgICAgICBjb250cm9sczogMCxcbiAgICAgICAgc2hvd2luZm86IDAsXG4gICAgICAgIG1vZGVzdGJyYW5kaW5nOiAxLFxuICAgICAgICBsb29wOiAxLFxuICAgICAgICBwbGF5bGlzdDogdmlkZW9JZCxcbiAgICAgICAgZnM6IDAsXG4gICAgICAgIGNjX2xvYWRfcG9saWN5OiAwLFxuICAgICAgICBpdl9sb2FkX3BvbGljeTogMyxcbiAgICAgICAgYXV0b2hpZGU6IDAsXG4gICAgICAgIHN0YXJ0OiBzdGFydFRpbWUgfHwgdW5kZWZpbmVkLFxuICAgICAgfSxcbiAgICAgIGV2ZW50czoge1xuICAgICAgICBvblJlYWR5OiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGV2ZW50LnRhcmdldC5tdXRlKCk7XG4gICAgICAgICAgZXZlbnQudGFyZ2V0LnBsYXlWaWRlbygpO1xuICAgICAgICB9LFxuICAgICAgICBvblN0YXRlQ2hhbmdlOiBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGlmIChldmVudC5kYXRhID09PSB3aW5kb3cuWVQuUGxheWVyU3RhdGUuUExBWUlORykge1xuICAgICAgICAgICAgYWRqdXN0VmlkZW9TaXplKCR2aWRlb1dyYXApO1xuICAgICAgICAgICAgJHZpZGVvV3JhcC5hZGRDbGFzcygndmlzaWJsZScpO1xuICAgICAgICAgICAgJGJsb2NrLmFkZENsYXNzKCdndXRlbmJlZS12aWRlby1sb2FkZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVmltZW8gdmlkZW9zXG4gIGZ1bmN0aW9uIG9uVmltZW9BUElSZWFkeSgkdmlkZW9CZykge1xuICAgIGNvbnN0ICR2aWRlb1dyYXAgPSAkdmlkZW9CZy5wYXJlbnRzKCcud3AtYmxvY2stZ3V0ZW5iZWUtdmlkZW8tYmctd3JhcHBlcicpO1xuICAgIGNvbnN0ICRibG9jayA9ICR2aWRlb1dyYXAuY2xvc2VzdCgnLndwLWJsb2NrLWd1dGVuYmVlLWJhbm5lcicpO1xuICAgIGNvbnN0IHZpZGVvSWQgPSAkdmlkZW9XcmFwLmRhdGEoJ3ZpZGVvLWlkJyk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gJHZpZGVvV3JhcC5kYXRhKCd2aWRlby1zdGFydCcpO1xuXG4gICAgY29uc3QgcGxheWVyID0gbmV3IHdpbmRvdy5WaW1lby5QbGF5ZXIoJHZpZGVvQmcsIHtcbiAgICAgIGlkOiB2aWRlb0lkLFxuICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgIGF1dG9wbGF5OiB0cnVlLFxuICAgICAgYnlsaW5lOiBmYWxzZSxcbiAgICAgIHRpdGxlOiBmYWxzZSxcbiAgICAgIGF1dG9wYXVzZTogZmFsc2UsXG4gICAgICBtdXRlZDogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHBsYXllci5zZXRWb2x1bWUoMCk7XG5cbiAgICBpZiAoc3RhcnRUaW1lKSB7XG4gICAgICBwbGF5ZXIuc2V0Q3VycmVudFRpbWUoc3RhcnRUaW1lKTtcbiAgICB9XG5cbiAgICBwbGF5ZXIub24oJ3BsYXknLCBmdW5jdGlvbigpIHtcbiAgICAgIGFkanVzdFZpZGVvU2l6ZSgkdmlkZW9XcmFwKTtcbiAgICAgICR2aWRlb1dyYXAuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICRibG9jay5hZGRDbGFzcygnZ3V0ZW5iZWUtdmlkZW8tbG9hZGVkJyk7XG4gICAgfSk7XG4gIH1cblxuICBsZXQgdmlkZW9SZXNpemVUaW1lcjtcblxuICAkd2luZG93Lm9uKCdyZXNpemUuY2lWaWRlbycsIGZ1bmN0aW9uKCkge1xuICAgIGNsZWFyVGltZW91dCh2aWRlb1Jlc2l6ZVRpbWVyKTtcbiAgICB2aWRlb1Jlc2l6ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICR2aWRlb1dyYXAuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICBhZGp1c3RWaWRlb1NpemUoJHRoaXMpO1xuICAgICAgfSk7XG4gICAgfSwgMzUwKTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZ2V0VmlkZW9TaXplKCR2aWRlb1dyYXApIHtcbiAgICBjb25zdCBjb250YWluZXJXaWR0aCA9ICR2aWRlb1dyYXAub3V0ZXJXaWR0aCgpO1xuICAgIGNvbnN0IGNvbnRhaW5lckhlaWdodCA9ICR2aWRlb1dyYXAub3V0ZXJIZWlnaHQoKTtcbiAgICBjb25zdCBhc3BlY3RSYXRpbyA9IDE2IC8gOTtcbiAgICBjb25zdCByYXRpb1dpZHRoID0gY29udGFpbmVyV2lkdGggLyBhc3BlY3RSYXRpbztcbiAgICBjb25zdCByYXRpb0hlaWdodCA9IGNvbnRhaW5lckhlaWdodCAqIGFzcGVjdFJhdGlvO1xuICAgIGNvbnN0IGlzV2lkdGhGaXhlZCA9IGNvbnRhaW5lcldpZHRoIC8gY29udGFpbmVySGVpZ2h0ID4gYXNwZWN0UmF0aW87XG5cbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IGlzV2lkdGhGaXhlZCA/IGNvbnRhaW5lcldpZHRoIDogcmF0aW9IZWlnaHQsXG4gICAgICBoZWlnaHQ6IGlzV2lkdGhGaXhlZCA/IHJhdGlvV2lkdGggOiBjb250YWluZXJIZWlnaHQsXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkanVzdFZpZGVvU2l6ZSgkdmlkZW9XcmFwKSB7XG4gICAgY29uc3Qgc2l6ZSA9IGdldFZpZGVvU2l6ZSgkdmlkZW9XcmFwKTtcblxuICAgICR2aWRlb1dyYXAuZmluZCgnaWZyYW1lLCB2aWRlbycpLmNzcyh7XG4gICAgICB3aWR0aDogc2l6ZS53aWR0aCArICdweCcsXG4gICAgICBoZWlnaHQ6IHNpemUuaGVpZ2h0ICsgJ3B4JyxcbiAgICB9KTtcbiAgfVxuXG4gIGlmICgkdmlkZW9CZy5sZW5ndGggJiYgd2luZG93LmlubmVyV2lkdGggPiAxMDgwKSB7XG4gICAgJHZpZGVvQmcuZWFjaChhc3luYyBmdW5jdGlvbigpIHtcbiAgICAgIGNvbnN0ICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIGNvbnN0IHZpZGVvVHlwZSA9ICR0aGlzXG4gICAgICAgIC5wYXJlbnRzKCcud3AtYmxvY2stZ3V0ZW5iZWUtdmlkZW8tYmctd3JhcHBlcicpXG4gICAgICAgIC5kYXRhKCd2aWRlby10eXBlJyk7XG4gICAgICBjb25zdCAkdmlkZW9XcmFwID0gJHRoaXMucGFyZW50cygnLndwLWJsb2NrLWd1dGVuYmVlLXZpZGVvLWJnLXdyYXBwZXInKTtcbiAgICAgIGNvbnN0ICRibG9jayA9ICR0aGlzLmNsb3Nlc3QoJy53cC1ibG9jay1ndXRlbmJlZS1iYW5uZXInKTtcblxuICAgICAgaWYgKHZpZGVvVHlwZSA9PT0gJ3lvdXR1YmUnKSB7XG4gICAgICAgIGF3YWl0IG1heWJlTG9hZFlvdVR1YmVBcGkoKTtcbiAgICAgICAgb25Zb3VUdWJlQVBJUmVhZHkoJHRoaXMpO1xuICAgICAgfSBlbHNlIGlmICh2aWRlb1R5cGUgPT09ICd2aW1lbycpIHtcbiAgICAgICAgYXdhaXQgbWF5YmVMb2FkVmltZW9BcGkoKTtcbiAgICAgICAgb25WaW1lb0FQSVJlYWR5KCR0aGlzKTtcbiAgICAgIH0gZWxzZSBpZiAodmlkZW9UeXBlID09PSAnc2VsZicpIHtcbiAgICAgICAgJHZpZGVvV3JhcC5maW5kKCd2aWRlbycpLm9uKCdwbGF5JywgKCkgPT4ge1xuICAgICAgICAgICR2aWRlb1dyYXAuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAkYmxvY2suYWRkQ2xhc3MoJ2d1dGVuYmVlLXZpZGVvLWxvYWRlZCcpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSk7XG4iLCJpbXBvcnQgalF1ZXJ5IGZyb20gJ2pxdWVyeSc7XG5cbmpRdWVyeSgkID0+IHtcbiAgY29uc3QgJGxvYWRNb3JlQnV0dG9ucyA9ICQoJy53cC1ibG9jay1ndXRlbmJlZS1wb3N0LXR5cGVzLWxvYWQtbW9yZS1idXR0b24nKTtcblxuICAkbG9hZE1vcmVCdXR0b25zLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgJHRoaXMgPSAkKHRoaXMpO1xuICAgIGNvbnN0ICRibG9jayA9ICR0aGlzLmNsb3Nlc3QoJy53cC1ibG9jay1ndXRlbmJlZS1wb3N0LXR5cGVzJyk7XG4gICAgY29uc3QgJGl0ZW1zID0gJGJsb2NrLmZpbmQoJ1tjbGFzcyo9XCJyb3ctaXRlbXNcIl0nKTtcbiAgICBjb25zdCBibG9ja0lkID0gJGJsb2NrLmF0dHIoJ2lkJyk7XG4gICAgbGV0IG5leHRMaW5rID0gJGJsb2NrLmZpbmQoJy5uYXZpZ2F0aW9uIC5wYWdlLW51bWJlcnMubmV4dCcpLmF0dHIoJ2hyZWYnKTtcblxuICAgIGlmICghbmV4dExpbmspIHtcbiAgICAgICR0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICAkdGhpcy5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAkYmxvY2suYWRkQ2xhc3MoJ2d1dGVuYmVlLWJsb2NrLWlzLWxvYWRpbmcnKTtcbiAgICAgICR0aGlzLmFkZENsYXNzKCdndXRlbmJlZS1idXR0b24taXMtbG9hZGluZycpO1xuXG4gICAgICAkLmdldChuZXh0TGluaywgZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zdCAkYm9keSA9ICQoZGF0YSk7XG4gICAgICAgIGNvbnN0ICRuZXdCbG9jayA9ICRib2R5LmZpbmQoYCMke2Jsb2NrSWR9YCk7XG4gICAgICAgIGNvbnN0ICRuZXdJdGVtcyA9ICRuZXdCbG9jay5maW5kKCdbY2xhc3MqPVwicm93LWl0ZW1zXCJdID4gZGl2Jyk7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW5rIHNvIHRoYXQgd2UgZmV0Y2ggdGhlIG5leHQgcGFnZS5cbiAgICAgICAgbmV4dExpbmsgPSAkbmV3QmxvY2tcbiAgICAgICAgICAuZmluZCgnLm5hdmlnYXRpb24gLnBhZ2UtbnVtYmVycy5uZXh0JylcbiAgICAgICAgICAuYXR0cignaHJlZicpO1xuXG4gICAgICAgIGlmICghbmV4dExpbmspIHtcbiAgICAgICAgICAkdGhpcy5mYWRlT3V0KCdmYXN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAkaXRlbXMuYXBwZW5kKCRuZXdJdGVtcyk7XG4gICAgICAgICRibG9jay5yZW1vdmVDbGFzcygnZ3V0ZW5iZWUtYmxvY2staXMtbG9hZGluZycpO1xuICAgICAgICAkdGhpcy5yZW1vdmVDbGFzcygnZ3V0ZW5iZWUtYnV0dG9uLWlzLWxvYWRpbmcnKTtcbiAgICAgICAgJCgnYm9keScpLnRyaWdnZXIoJ2d1dGVuYmVlLnBvc3RzLWxvYWRlZCcsIFskbmV3SXRlbXNdKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIiwiLy9cbi8vIFN0eWxlc2hlZXRzXG4vL1xuaW1wb3J0ICcuL3N0eWxlcy9zdHlsZS5zY3NzJztcblxuLy9cbi8vIENvbnRyb2wgc2NyaXB0c1xuLy9cbmltcG9ydCAnLi9jb21wb25lbnRzL2NvbnRyb2xzL2JhY2tncm91bmQtY29udHJvbHMvc2NyaXB0JztcblxuLy9cbi8vIEJsb2NrIHNjcmlwdHNcbi8vXG5pbXBvcnQgJy4vYmxvY2tzL3NsaWRlc2hvdy9zY3JpcHQnO1xuaW1wb3J0ICcuL2Jsb2Nrcy9jb3VudHVwL3NjcmlwdCc7XG5pbXBvcnQgJy4vYmxvY2tzL2p1c3RpZmllZC1nYWxsZXJ5L3NjcmlwdCc7XG5pbXBvcnQgJy4vYmxvY2tzL2dvb2dsZS1tYXBzL3NjcmlwdCc7XG5pbXBvcnQgJy4vYmxvY2tzL2NvdW50ZG93bi9zY3JpcHQnO1xuaW1wb3J0ICcuL2Jsb2Nrcy9pbWFnZS1jb21wYXJpc29uL3NjcmlwdCc7XG5pbXBvcnQgJy4vYmxvY2tzL2FjY29yZGlvbi9zY3JpcHQnO1xuaW1wb3J0ICcuL2Jsb2Nrcy90YWJzL3NjcmlwdCc7XG5pbXBvcnQgJy4vYmxvY2tzL3ZpZGVvLWVtYmVkL3NjcmlwdCc7XG5pbXBvcnQgJy4vYmxvY2tzL2NvbnRhaW5lci9zY3JpcHQnO1xuaW1wb3J0ICcuL2Jsb2Nrcy9iYW5uZXIvc2NyaXB0JztcbmltcG9ydCAnLi9ibG9ja3MvcG9zdC10eXBlcy9zY3JpcHQnO1xuLy8gaW1wb3J0ICcuL2Jsb2Nrcy90YWItc2xpZGVyL3NjcmlwdCc7XG4iXSwibmFtZXMiOlsialF1ZXJ5IiwiJCIsIiR3aW5kb3ciLCJ3aW5kb3ciLCJmbiIsImd1dGVuYmVlUGFyYWxsYXgiLCJvcHRzIiwib3B0aW9ucyIsImV4dGVuZCIsInNwZWVkIiwiZGlyZWN0aW9uIiwiJGVsZW1lbnRzIiwiZWFjaCIsIiR0aGlzIiwiZGF0YSIsImNzcyIsImhlaWdodCIsInVwZGF0ZSIsIndoZWlnaHQiLCJ3c2Nyb2xsIiwic2Nyb2xsVG9wIiwiJHBhcmVudCIsInBhcmVudCIsImVsSGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJoZWlnaHREZWx0YSIsImVsVG9wIiwib2Zmc2V0IiwidG9wIiwic2Nyb2xsUGVyY2VudGFnZSIsInlwb3MiLCJ0cmFuc2Zvcm0iLCJyZXF1ZXN0UGFyYWxsYXhVcGRhdGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJvbiIsImRlc3Ryb3kiLCJvZmYiLCIkc2xpZGVzaG93Iiwic2xpY2siLCJhcnJvd3MiLCJkb3RzIiwiYXV0b3BsYXkiLCJmYWRlIiwiaW5maW5pdGUiLCJhdXRvcGxheVNwZWVkIiwic2xpZGVzVG9TY3JvbGwiLCJzbGlkZXNUb1Nob3ciLCJwYXVzZU9uSG92ZXIiLCJzbGlkZSIsInByZXZBcnJvdyIsIm5leHRBcnJvdyIsImN1c3RvbVBhZ2luZyIsImJhY2tncm91bmRDb2xvciIsImlzRWxlbWVudEluVmlld3BvcnQiLCJlbCIsInNjcm9sbCIsInNjcm9sbFkiLCJwYWdlWU9mZnNldCIsImJvdW5kc1RvcCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInZpZXdwb3J0IiwiYm90dG9tIiwiaW5uZXJIZWlnaHQiLCJib3VuZHMiLCJjbGllbnRIZWlnaHQiLCJDb3VudFVwIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZWxlbWVudHMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY291bnR1cEluaXQiLCJlbGVtZW50Iiwic2VwYXJhdG9yIiwiZGF0YXNldCIsInVzZUdyb3VwaW5nIiwicHJlZml4Iiwic3VmZml4IiwiY291bnR1cCIsInN0YXJ0IiwiZW5kIiwiYW5pbWF0aW9uRHVyYXRpb24iLCJlcnJvciIsInN0YXJ0ZWQiLCJmb3JFYWNoIiwiaW52aWV3cG9ydCIsImhhbmRsZXIiLCIkanVzdGlmaWVkR2FsbGVyeSIsIiRjb250ZW50IiwiZmluZCIsIiR0eXBlIiwianVzdGlmaWVkR2FsbGVyeSIsInJvd0hlaWdodCIsIm1hcmdpbnMiLCJsYXN0Um93IiwicmFuZG9taXplIiwic2FmZUhUTUwiLCJnb29nbGUiLCIkbWFwcyIsImxvY2F0aW9uIiwibGF0IiwicGFyc2VGbG9hdCIsImxuZyIsImluZm8iLCJtYXAiLCJtYXBzIiwiTWFwIiwiZ2V0Iiwiem9vbSIsImNlbnRlciIsInNjcm9sbHdoZWVsIiwic3R5bGVzIiwibWFya2VyIiwiTWFya2VyIiwicG9zaXRpb24iLCJpY29uIiwiaW5mb1dpbmRvdyIsIkluZm9XaW5kb3ciLCJjb250ZW50IiwiU3RyaW5nIiwibWF4V2lkdGgiLCJhZGRMaXN0ZW5lciIsIm9wZW4iLCJDb3VudGRvd25UaW1lciIsImNvbnN0cnVjdG9yIiwiZW5kVGltZSIsImNsb2NrIiwidXBkYXRlQ2xvY2siLCJpbnRlcnZhbCIsInNldEludGVydmFsIiwiZ2V0UmVtYWluaW5nVGltZSIsInQiLCJEYXRlIiwicGFyc2UiLCJzZWNvbmRzIiwiTWF0aCIsImZsb29yIiwibWludXRlcyIsImhvdXJzIiwiZGF5cyIsInRvdGFsIiwiZGF5c1NwYW4iLCJxdWVyeVNlbGVjdG9yIiwiaG91cnNTcGFuIiwibWludXRlc1NwYW4iLCJzZWNvbmRzU3BhbiIsImlubmVySFRNTCIsInNsaWNlIiwic3RvcCIsImNsZWFySW50ZXJ2YWwiLCJjb3VudGRvd24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZGF0ZSIsInR3ZW50eXR3ZW50eSIsImRlZmF1bHRfb2Zmc2V0X3BjdCIsImJlZm9yZV9sYWJlbCIsImd1dGVuYmVlU3RyaW5ncyIsImltYWdlX2NvbXBhcmlzb25fYmVmb3JlX2xhYmVsIiwiYWZ0ZXJfbGFiZWwiLCJpbWFnZV9jb21wYXJpc29uX2FmdGVyX2xhYmVsIiwiZXhwYW5kZWRDbGFzcyIsIiR0aXRsZXMiLCIkZGVmYXVsdEV4cGFuZGVkIiwic2xpZGVEb3duIiwiJGFjY29yZGlvbiIsInBhcmVudHMiLCIkaXRlbSIsImNvbGxhcHNlT3RoZXJzIiwiaGFzQ2xhc3MiLCJzbGlkZVVwIiwicmVtb3ZlQ2xhc3MiLCJzaWJsaW5ncyIsImFkZENsYXNzIiwiJHRhYnMiLCIkdGFiQ29udGVudHMiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiJHRpdGxlIiwiaW5kZXgiLCJoaWRlIiwiZXEiLCJmYWRlSW4iLCJ5b3VUdWJlQXBpTG9hZGVkIiwiWVQiLCJQbGF5ZXIiLCJ2aW1lb0FwaUxvYWRlZCIsIlZpbWVvIiwibWF5YmVMb2FkWW91VHViZUFwaSIsImdldEVsZW1lbnRCeUlkIiwidGFnIiwiY3JlYXRlRWxlbWVudCIsImlkIiwic3JjIiwiZmlyc3RTY3JpcHRUYWciLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJhcGlMb2FkZWQiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIlByb21pc2UiLCJyZWplY3QiLCJtYXliZUxvYWRWaW1lb0FwaSIsIm1hdGNoZXNQYXR0ZXJucyIsInN0ciIsInBhdHRlcm5zIiwic29tZSIsInBhdHRlcm4iLCJtYXRjaCIsInlvdVR1YmVVcmxQYXR0ZXJucyIsInZpbWVvVXJsUGF0dGVybnMiLCJzZWxmSG9zdGVkVmlkZW9VcmxQYXR0ZXJucyIsImdldFlvdVR1YmVJZEJ5VXJsIiwidXJsIiwiYXJyIiwic3BsaXQiLCJ1bmRlZmluZWQiLCJnZXRWaW1lb0lkQnlVcmwiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvbmxvYWQiLCJzdGF0dXMiLCJyZXNwb25zZSIsIkpTT04iLCJyZXNwb25zZVRleHQiLCJ2aWRlb19pZCIsInNlbmQiLCJnZXRZb3VUdWJlU3RhcnRUaW1lRnJvbVVybCIsInBhcmFtcyIsIlVSTCIsInNlYXJjaFBhcmFtcyIsInRpbWUiLCJnZXRWaW1lb1N0YXJ0VGltZUZyb21VcmwiLCJyZXBsYWNlZCIsInJlcGxhY2UiLCJnZXRWaWRlb1Byb3ZpZGVySW5mb0J5VXJsIiwicHJvdmlkZXIiLCIkdmlkZW9FbWJlZCIsIiR2aWRlb1dyYXAiLCJhdHRyU3RhdGUiLCJhdHRyIiwib25Zb3VUdWJlQXBpUmVhZHkiLCJ2aWRlb0VtYmVkIiwiJGRhdGFzZXQiLCIkdmlkZW8iLCIkb3ZlcmxheSIsInl0UGxheWVyIiwidmlkZW9JZCIsInBsYXllclZhcnMiLCJ2aWRlb0F1dG9wbGF5IiwiY29udHJvbHMiLCJ2aWRlb0NvbnRyb2xzIiwic2hvd2luZm8iLCJtb2Rlc3RicmFuZGluZyIsInZpZGVvQnJhbmRpbmciLCJsb29wIiwidmlkZW9Mb29wIiwicGxheWxpc3QiLCJmcyIsImNjX2xvYWRfcG9saWN5IiwiaXZfbG9hZF9wb2xpY3kiLCJhdXRvaGlkZSIsIm11dGUiLCJ2aWRlb011dGUiLCJwYXJzZUludCIsInZpZGVvU3RhcnQiLCJ2aWRlb0VuZCIsImV2ZW50cyIsIm9uUmVhZHkiLCJ0YXJnZXQiLCJwbGF5VmlkZW8iLCJsZW5ndGgiLCJmYWRlT3V0IiwidmlkZW9MYXp5Iiwib25TdGF0ZUNoYW5nZSIsIlBsYXllclN0YXRlIiwiUExBWUlORyIsIm9uVmltZW9BcGlSZWFkeSIsInBsYXllciIsImJ5bGluZSIsInRpdGxlIiwiYXV0b3BhdXNlIiwibXV0ZWQiLCJzZXRDdXJyZW50VGltZSIsInBsYXkiLCJjcmVhdGVFbWJlZCIsImZpcnN0U2NyaXB0IiwidmlkZW9UeXBlIiwiZW1iZWRMb2FkZWQiLCIkZmlyc3RTY3JpcHQiLCIkc3RpY2t5V3JhcCIsIiRzdGlja3lWaWRlb1dyYXAiLCJ2aWRlb1dyYXBIZWlnaHQiLCJ3aW5kb3dTY3JvbGxUb3AiLCJ2aWRlb0JvdHRvbSIsImFwcGVuZCIsIiRjbG9zZSIsIiR2aWRlb0lkIiwiY29udGVudFdpbmRvdyIsInBvc3RNZXNzYWdlIiwicmVtb3ZlIiwiJHZpZGVvQmciLCIkYmxvY2siLCJjbG9zZXN0Iiwic3RhcnRUaW1lIiwidmlkZW8iLCJhZGp1c3RWaWRlb1NpemUiLCJzZXRWb2x1bWUiLCJ2aWRlb1Jlc2l6ZVRpbWVyIiwiY2xlYXJUaW1lb3V0IiwiZ2V0VmlkZW9TaXplIiwiY29udGFpbmVyV2lkdGgiLCJvdXRlcldpZHRoIiwiY29udGFpbmVySGVpZ2h0IiwiYXNwZWN0UmF0aW8iLCJyYXRpb1dpZHRoIiwicmF0aW9IZWlnaHQiLCJpc1dpZHRoRml4ZWQiLCJ3aWR0aCIsInNpemUiLCJpbm5lcldpZHRoIiwib25Zb3VUdWJlQVBJUmVhZHkiLCJvblZpbWVvQVBJUmVhZHkiLCIkbG9hZE1vcmVCdXR0b25zIiwiJGl0ZW1zIiwiYmxvY2tJZCIsIm5leHRMaW5rIiwiJGJvZHkiLCIkbmV3QmxvY2siLCIkbmV3SXRlbXMiLCJ0cmlnZ2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///59074\n")},46281:function(module,exports,__webpack_require__){eval('var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;!function(a,t){ true?!(__WEBPACK_AMD_DEFINE_FACTORY__ = (t),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === \'function\' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :\n\t\t__WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):0}(this,function(a,t,n){var e=function(a,t,n,e,i,r){for(var o=0,s=["webkit","moz","ms","o"],m=0;m<s.length&&!window.requestAnimationFrame;++m)window.requestAnimationFrame=window[s[m]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[m]+"CancelAnimationFrame"]||window[s[m]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,t){var n=(new Date).getTime(),e=Math.max(0,16-(n-o)),i=window.setTimeout(function(){a(n+e)},e);return o=n+e,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});var u=this;u.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:null,formattingFn:null};for(var l in r)r.hasOwnProperty(l)&&(u.options[l]=r[l]);""===u.options.separator&&(u.options.useGrouping=!1),u.options.prefix||(u.options.prefix=""),u.options.suffix||(u.options.suffix=""),u.d="string"==typeof a?document.getElementById(a):a,u.startVal=Number(t),u.endVal=Number(n),u.countDown=u.startVal>u.endVal,u.frameVal=u.startVal,u.decimals=Math.max(0,e||0),u.dec=Math.pow(10,u.decimals),u.duration=1e3*Number(i)||2e3,u.formatNumber=function(a){a=a.toFixed(u.decimals),a+="";var t,n,e,i;if(t=a.split("."),n=t[0],e=t.length>1?u.options.decimal+t[1]:"",i=/(\\d+)(\\d{3})/,u.options.useGrouping)for(;i.test(n);)n=n.replace(i,"$1"+u.options.separator+"$2");return u.options.prefix+n+e+u.options.suffix},u.easeOutExpo=function(a,t,n,e){return n*(-Math.pow(2,-10*a/e)+1)*1024/1023+t},u.easingFn=u.options.easingFn?u.options.easingFn:u.easeOutExpo,u.formattingFn=u.options.formattingFn?u.options.formattingFn:u.formatNumber,u.version=function(){return"1.7.1"},u.printValue=function(a){var t=u.formattingFn(a);"INPUT"===u.d.tagName?this.d.value=t:"text"===u.d.tagName||"tspan"===u.d.tagName?this.d.textContent=t:this.d.innerHTML=t},u.count=function(a){u.startTime||(u.startTime=a),u.timestamp=a;var t=a-u.startTime;u.remaining=u.duration-t,u.options.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(t,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(t,u.startVal,u.endVal-u.startVal,u.duration):u.countDown?u.frameVal=u.startVal-(u.startVal-u.endVal)*(t/u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(t/u.duration),u.countDown?u.frameVal=u.frameVal<u.endVal?u.endVal:u.frameVal:u.frameVal=u.frameVal>u.endVal?u.endVal:u.frameVal,u.frameVal=Math.round(u.frameVal*u.dec)/u.dec,u.printValue(u.frameVal),t<u.duration?u.rAF=requestAnimationFrame(u.count):u.callback&&u.callback()},u.start=function(a){return u.callback=a,u.rAF=requestAnimationFrame(u.count),!1},u.pauseResume=function(){u.paused?(u.paused=!1,delete u.startTime,u.duration=u.remaining,u.startVal=u.frameVal,requestAnimationFrame(u.count)):(u.paused=!0,cancelAnimationFrame(u.rAF))},u.reset=function(){u.paused=!1,delete u.startTime,u.startVal=t,cancelAnimationFrame(u.rAF),u.printValue(u.startVal)},u.update=function(a){cancelAnimationFrame(u.rAF),u.paused=!1,delete u.startTime,u.startVal=u.frameVal,u.endVal=Number(a),u.countDown=u.startVal>u.endVal,u.rAF=requestAnimationFrame(u.count)},u.printValue(u.startVal)};return e});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYyODEuanMiLCJtYXBwaW5ncyI6IkFBQUEsaUZBQWUsS0FBcUMsQ0FBQyxvQ0FBTyxDQUFDO0FBQUE7QUFBQTtBQUFBO0FBQUEsa0dBQUMsQ0FBQyxDQUErRSxDQUFDLHNCQUFzQiw0QkFBNEIsNENBQTRDLDBDQUEwQyxrTEFBa0wsMEVBQTBFLGlGQUFpRixPQUFPLElBQUksZUFBZSx3RUFBd0UsZ0JBQWdCLEVBQUUsV0FBVyxXQUFXLHVGQUF1Rix3REFBd0QsMFlBQTBZLDhCQUE4QixZQUFZLDRFQUE0RSxFQUFFLDhCQUE4QixVQUFVLDhDQUE4Qyw2Q0FBNkMsaUNBQWlDLDhDQUE4QyxpS0FBaUssY0FBYywwQkFBMEIsd0JBQXdCLHlIQUF5SCxxQkFBcUIsMkNBQTJDLG9CQUFvQix1a0JBQXVrQixxQkFBcUIsNERBQTRELDBCQUEwQixnS0FBZ0ssb0JBQW9CLGlHQUFpRyxzQkFBc0IseUtBQXlLLDJCQUEyQixTQUFTIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3AvLi9ub2RlX21vZHVsZXMvY291bnR1cC9kaXN0L2NvdW50VXAubWluLmpzPzU3ZjIiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKGEsdCl7XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZSh0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz10KHJlcXVpcmUsZXhwb3J0cyxtb2R1bGUpOmEuQ291bnRVcD10KCl9KHRoaXMsZnVuY3Rpb24oYSx0LG4pe3ZhciBlPWZ1bmN0aW9uKGEsdCxuLGUsaSxyKXtmb3IodmFyIG89MCxzPVtcIndlYmtpdFwiLFwibW96XCIsXCJtc1wiLFwib1wiXSxtPTA7bTxzLmxlbmd0aCYmIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7KyttKXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9d2luZG93W3NbbV0rXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIl0sd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPXdpbmRvd1tzW21dK1wiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIl18fHdpbmRvd1tzW21dK1wiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKGEsdCl7dmFyIG49KG5ldyBEYXRlKS5nZXRUaW1lKCksZT1NYXRoLm1heCgwLDE2LShuLW8pKSxpPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YShuK2UpfSxlKTtyZXR1cm4gbz1uK2UsaX0pLHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZXx8KHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZT1mdW5jdGlvbihhKXtjbGVhclRpbWVvdXQoYSl9KTt2YXIgdT10aGlzO3Uub3B0aW9ucz17dXNlRWFzaW5nOiEwLHVzZUdyb3VwaW5nOiEwLHNlcGFyYXRvcjpcIixcIixkZWNpbWFsOlwiLlwiLGVhc2luZ0ZuOm51bGwsZm9ybWF0dGluZ0ZuOm51bGx9O2Zvcih2YXIgbCBpbiByKXIuaGFzT3duUHJvcGVydHkobCkmJih1Lm9wdGlvbnNbbF09cltsXSk7XCJcIj09PXUub3B0aW9ucy5zZXBhcmF0b3ImJih1Lm9wdGlvbnMudXNlR3JvdXBpbmc9ITEpLHUub3B0aW9ucy5wcmVmaXh8fCh1Lm9wdGlvbnMucHJlZml4PVwiXCIpLHUub3B0aW9ucy5zdWZmaXh8fCh1Lm9wdGlvbnMuc3VmZml4PVwiXCIpLHUuZD1cInN0cmluZ1wiPT10eXBlb2YgYT9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKTphLHUuc3RhcnRWYWw9TnVtYmVyKHQpLHUuZW5kVmFsPU51bWJlcihuKSx1LmNvdW50RG93bj11LnN0YXJ0VmFsPnUuZW5kVmFsLHUuZnJhbWVWYWw9dS5zdGFydFZhbCx1LmRlY2ltYWxzPU1hdGgubWF4KDAsZXx8MCksdS5kZWM9TWF0aC5wb3coMTAsdS5kZWNpbWFscyksdS5kdXJhdGlvbj0xZTMqTnVtYmVyKGkpfHwyZTMsdS5mb3JtYXROdW1iZXI9ZnVuY3Rpb24oYSl7YT1hLnRvRml4ZWQodS5kZWNpbWFscyksYSs9XCJcIjt2YXIgdCxuLGUsaTtpZih0PWEuc3BsaXQoXCIuXCIpLG49dFswXSxlPXQubGVuZ3RoPjE/dS5vcHRpb25zLmRlY2ltYWwrdFsxXTpcIlwiLGk9LyhcXGQrKShcXGR7M30pLyx1Lm9wdGlvbnMudXNlR3JvdXBpbmcpZm9yKDtpLnRlc3Qobik7KW49bi5yZXBsYWNlKGksXCIkMVwiK3Uub3B0aW9ucy5zZXBhcmF0b3IrXCIkMlwiKTtyZXR1cm4gdS5vcHRpb25zLnByZWZpeCtuK2UrdS5vcHRpb25zLnN1ZmZpeH0sdS5lYXNlT3V0RXhwbz1mdW5jdGlvbihhLHQsbixlKXtyZXR1cm4gbiooLU1hdGgucG93KDIsLTEwKmEvZSkrMSkqMTAyNC8xMDIzK3R9LHUuZWFzaW5nRm49dS5vcHRpb25zLmVhc2luZ0ZuP3Uub3B0aW9ucy5lYXNpbmdGbjp1LmVhc2VPdXRFeHBvLHUuZm9ybWF0dGluZ0ZuPXUub3B0aW9ucy5mb3JtYXR0aW5nRm4/dS5vcHRpb25zLmZvcm1hdHRpbmdGbjp1LmZvcm1hdE51bWJlcix1LnZlcnNpb249ZnVuY3Rpb24oKXtyZXR1cm5cIjEuNy4xXCJ9LHUucHJpbnRWYWx1ZT1mdW5jdGlvbihhKXt2YXIgdD11LmZvcm1hdHRpbmdGbihhKTtcIklOUFVUXCI9PT11LmQudGFnTmFtZT90aGlzLmQudmFsdWU9dDpcInRleHRcIj09PXUuZC50YWdOYW1lfHxcInRzcGFuXCI9PT11LmQudGFnTmFtZT90aGlzLmQudGV4dENvbnRlbnQ9dDp0aGlzLmQuaW5uZXJIVE1MPXR9LHUuY291bnQ9ZnVuY3Rpb24oYSl7dS5zdGFydFRpbWV8fCh1LnN0YXJ0VGltZT1hKSx1LnRpbWVzdGFtcD1hO3ZhciB0PWEtdS5zdGFydFRpbWU7dS5yZW1haW5pbmc9dS5kdXJhdGlvbi10LHUub3B0aW9ucy51c2VFYXNpbmc/dS5jb3VudERvd24/dS5mcmFtZVZhbD11LnN0YXJ0VmFsLXUuZWFzaW5nRm4odCwwLHUuc3RhcnRWYWwtdS5lbmRWYWwsdS5kdXJhdGlvbik6dS5mcmFtZVZhbD11LmVhc2luZ0ZuKHQsdS5zdGFydFZhbCx1LmVuZFZhbC11LnN0YXJ0VmFsLHUuZHVyYXRpb24pOnUuY291bnREb3duP3UuZnJhbWVWYWw9dS5zdGFydFZhbC0odS5zdGFydFZhbC11LmVuZFZhbCkqKHQvdS5kdXJhdGlvbik6dS5mcmFtZVZhbD11LnN0YXJ0VmFsKyh1LmVuZFZhbC11LnN0YXJ0VmFsKSoodC91LmR1cmF0aW9uKSx1LmNvdW50RG93bj91LmZyYW1lVmFsPXUuZnJhbWVWYWw8dS5lbmRWYWw/dS5lbmRWYWw6dS5mcmFtZVZhbDp1LmZyYW1lVmFsPXUuZnJhbWVWYWw+dS5lbmRWYWw/dS5lbmRWYWw6dS5mcmFtZVZhbCx1LmZyYW1lVmFsPU1hdGgucm91bmQodS5mcmFtZVZhbCp1LmRlYykvdS5kZWMsdS5wcmludFZhbHVlKHUuZnJhbWVWYWwpLHQ8dS5kdXJhdGlvbj91LnJBRj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodS5jb3VudCk6dS5jYWxsYmFjayYmdS5jYWxsYmFjaygpfSx1LnN0YXJ0PWZ1bmN0aW9uKGEpe3JldHVybiB1LmNhbGxiYWNrPWEsdS5yQUY9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHUuY291bnQpLCExfSx1LnBhdXNlUmVzdW1lPWZ1bmN0aW9uKCl7dS5wYXVzZWQ/KHUucGF1c2VkPSExLGRlbGV0ZSB1LnN0YXJ0VGltZSx1LmR1cmF0aW9uPXUucmVtYWluaW5nLHUuc3RhcnRWYWw9dS5mcmFtZVZhbCxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodS5jb3VudCkpOih1LnBhdXNlZD0hMCxjYW5jZWxBbmltYXRpb25GcmFtZSh1LnJBRikpfSx1LnJlc2V0PWZ1bmN0aW9uKCl7dS5wYXVzZWQ9ITEsZGVsZXRlIHUuc3RhcnRUaW1lLHUuc3RhcnRWYWw9dCxjYW5jZWxBbmltYXRpb25GcmFtZSh1LnJBRiksdS5wcmludFZhbHVlKHUuc3RhcnRWYWwpfSx1LnVwZGF0ZT1mdW5jdGlvbihhKXtjYW5jZWxBbmltYXRpb25GcmFtZSh1LnJBRiksdS5wYXVzZWQ9ITEsZGVsZXRlIHUuc3RhcnRUaW1lLHUuc3RhcnRWYWw9dS5mcmFtZVZhbCx1LmVuZFZhbD1OdW1iZXIoYSksdS5jb3VudERvd249dS5zdGFydFZhbD51LmVuZFZhbCx1LnJBRj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodS5jb3VudCl9LHUucHJpbnRWYWx1ZSh1LnN0YXJ0VmFsKX07cmV0dXJuIGV9KTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///46281\n')},26857:(module,exports,__webpack_require__)=>{eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!\n * justifiedGallery - v3.7.0\n * http://miromannino.github.io/Justified-Gallery/\n * Copyright (c) 2018 Miro Mannino\n * Licensed under the MIT license.\n */\n(function (factory) {\n  if (true) {\n    // AMD. Register as an anonymous module.\n    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(19567)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n  } else {}\n}(function ($) {\n\n  /**\n   * Justified Gallery controller constructor\n   *\n   * @param $gallery the gallery to build\n   * @param settings the settings (the defaults are in JustifiedGallery.defaults)\n   * @constructor\n   */\n  var JustifiedGallery = function ($gallery, settings) {\n  \n    this.settings = settings;\n    this.checkSettings();\n  \n    this.imgAnalyzerTimeout = null;\n    this.entries = null;\n    this.buildingRow = {\n      entriesBuff : [],\n      width : 0,\n      height : 0,\n      aspectRatio : 0\n    };\n    this.lastFetchedEntry = null;\n    this.lastAnalyzedIndex = -1;\n    this.yield = {\n      every : 2, // do a flush every n flushes (must be greater than 1)\n      flushed : 0 // flushed rows without a yield\n    };\n    this.border = settings.border >= 0 ? settings.border : settings.margins;\n    this.maxRowHeight = this.retrieveMaxRowHeight();\n    this.suffixRanges = this.retrieveSuffixRanges();\n    this.offY = this.border;\n    this.rows = 0;\n    this.spinner = {\n      phase : 0,\n      timeSlot : 150,\n      $el : $('<div class=\"spinner\"><span></span><span></span><span></span></div>'),\n      intervalId : null\n    };\n    this.scrollBarOn = false;\n    this.checkWidthIntervalId = null;\n    this.galleryWidth = $gallery.width();\n    this.$gallery = $gallery;\n  \n  };\n  \n  /** @returns {String} the best suffix given the width and the height */\n  JustifiedGallery.prototype.getSuffix = function (width, height) {\n    var longestSide, i;\n    longestSide = (width > height) ? width : height;\n    for (i = 0; i < this.suffixRanges.length; i++) {\n      if (longestSide <= this.suffixRanges[i]) {\n        return this.settings.sizeRangeSuffixes[this.suffixRanges[i]];\n      }\n    }\n    return this.settings.sizeRangeSuffixes[this.suffixRanges[i - 1]];\n  };\n  \n  /**\n   * Remove the suffix from the string\n   *\n   * @returns {string} a new string without the suffix\n   */\n  JustifiedGallery.prototype.removeSuffix = function (str, suffix) {\n    return str.substring(0, str.length - suffix.length);\n  };\n  \n  /**\n   * @returns {boolean} a boolean to say if the suffix is contained in the str or not\n   */\n  JustifiedGallery.prototype.endsWith = function (str, suffix) {\n    return str.indexOf(suffix, str.length - suffix.length) !== -1;\n  };\n  \n  /**\n   * Get the used suffix of a particular url\n   *\n   * @param str\n   * @returns {String} return the used suffix\n   */\n  JustifiedGallery.prototype.getUsedSuffix = function (str) {\n    for (var si in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(si)) {\n        if (this.settings.sizeRangeSuffixes[si].length === 0) continue;\n        if (this.endsWith(str, this.settings.sizeRangeSuffixes[si])) return this.settings.sizeRangeSuffixes[si];\n      }\n    }\n    return '';\n  };\n  \n  /**\n   * Given an image src, with the width and the height, returns the new image src with the\n   * best suffix to show the best quality thumbnail.\n   *\n   * @returns {String} the suffix to use\n   */\n  JustifiedGallery.prototype.newSrc = function (imageSrc, imgWidth, imgHeight, image) {\n    var newImageSrc;\n  \n    if (this.settings.thumbnailPath) {\n      newImageSrc = this.settings.thumbnailPath(imageSrc, imgWidth, imgHeight, image);\n    } else {\n      var matchRes = imageSrc.match(this.settings.extension);\n      var ext = (matchRes !== null) ? matchRes[0] : '';\n      newImageSrc = imageSrc.replace(this.settings.extension, '');\n      newImageSrc = this.removeSuffix(newImageSrc, this.getUsedSuffix(newImageSrc));\n      newImageSrc += this.getSuffix(imgWidth, imgHeight) + ext;\n    }\n  \n    return newImageSrc;\n  };\n  \n  /**\n   * Shows the images that is in the given entry\n   *\n   * @param $entry the entry\n   * @param callback the callback that is called when the show animation is finished\n   */\n  JustifiedGallery.prototype.showImg = function ($entry, callback) {\n    if (this.settings.cssAnimation) {\n      $entry.addClass('entry-visible');\n      if (callback) callback();\n    } else {\n      $entry.stop().fadeTo(this.settings.imagesAnimationDuration, 1.0, callback);\n      $entry.find(this.settings.imgSelector).stop().fadeTo(this.settings.imagesAnimationDuration, 1.0, callback);\n    }\n  };\n  \n  /**\n   * Extract the image src form the image, looking from the 'safe-src', and if it can't be found, from the\n   * 'src' attribute. It saves in the image data the 'jg.originalSrc' field, with the extracted src.\n   *\n   * @param $image the image to analyze\n   * @returns {String} the extracted src\n   */\n  JustifiedGallery.prototype.extractImgSrcFromImage = function ($image) {\n    var imageSrc = (typeof $image.data('safe-src') !== 'undefined') ? $image.data('safe-src') : $image.attr('src');\n    $image.data('jg.originalSrc', imageSrc);\n    return imageSrc;\n  };\n  \n  /** @returns {jQuery} the image in the given entry */\n  JustifiedGallery.prototype.imgFromEntry = function ($entry) {\n    var $img = $entry.find(this.settings.imgSelector);\n    return $img.length === 0 ? null : $img;\n  };\n  \n  /** @returns {jQuery} the caption in the given entry */\n  JustifiedGallery.prototype.captionFromEntry = function ($entry) {\n    var $caption = $entry.find('> .caption');\n    return $caption.length === 0 ? null : $caption;\n  };\n  \n  /**\n   * Display the entry\n   *\n   * @param {jQuery} $entry the entry to display\n   * @param {int} x the x position where the entry must be positioned\n   * @param y the y position where the entry must be positioned\n   * @param imgWidth the image width\n   * @param imgHeight the image height\n   * @param rowHeight the row height of the row that owns the entry\n   */\n  JustifiedGallery.prototype.displayEntry = function ($entry, x, y, imgWidth, imgHeight, rowHeight) {\n    $entry.width(imgWidth);\n    $entry.height(rowHeight);\n    $entry.css('top', y);\n    $entry.css('left', x);\n  \n    var $image = this.imgFromEntry($entry);\n    if ($image !== null) {\n      $image.css('width', imgWidth);\n      $image.css('height', imgHeight);\n      $image.css('margin-left', - imgWidth / 2);\n      $image.css('margin-top', - imgHeight / 2);\n  \n      // Image reloading for an high quality of thumbnails\n      var imageSrc = $image.attr('src');\n      var newImageSrc = this.newSrc(imageSrc, imgWidth, imgHeight, $image[0]);\n  \n      $image.one('error', function () {\n        $image.attr('src', $image.data('jg.originalSrc')); //revert to the original thumbnail, we got it.\n      });\n  \n      var loadNewImage = function () {\n        if (imageSrc !== newImageSrc) { //load the new image after the fadeIn\n          $image.attr('src', newImageSrc);\n        }\n      };\n  \n      if ($entry.data('jg.loaded') === 'skipped') {\n        this.onImageEvent(imageSrc, $.proxy(function() {\n          this.showImg($entry, loadNewImage);\n          $entry.data('jg.loaded', true);\n        }, this));\n      } else {\n        this.showImg($entry, loadNewImage);\n      }\n  \n    } else {\n      this.showImg($entry);\n    }\n  \n    this.displayEntryCaption($entry);\n  };\n  \n  /**\n   * Display the entry caption. If the caption element doesn't exists, it creates the caption using the 'alt'\n   * or the 'title' attributes.\n   *\n   * @param {jQuery} $entry the entry to process\n   */\n  JustifiedGallery.prototype.displayEntryCaption = function ($entry) {\n    var $image = this.imgFromEntry($entry);\n    if ($image !== null && this.settings.captions) {\n      var $imgCaption = this.captionFromEntry($entry);\n  \n      // Create it if it doesn't exists\n      if ($imgCaption === null) {\n        var caption = $image.attr('alt');\n        if (!this.isValidCaption(caption)) caption = $entry.attr('title');\n        if (this.isValidCaption(caption)) { // Create only we found something\n          $imgCaption = $('<div class=\"caption\">' + caption + '</div>');\n          $entry.append($imgCaption);\n          $entry.data('jg.createdCaption', true);\n        }\n      }\n  \n      // Create events (we check again the $imgCaption because it can be still inexistent)\n      if ($imgCaption !== null) {\n        if (!this.settings.cssAnimation) $imgCaption.stop().fadeTo(0, this.settings.captionSettings.nonVisibleOpacity);\n        this.addCaptionEventsHandlers($entry);\n      }\n    } else {\n      this.removeCaptionEventsHandlers($entry);\n    }\n  };\n  \n  /**\n   * Validates the caption\n   *\n   * @param caption The caption that should be validated\n   * @return {boolean} Validation result\n   */\n  JustifiedGallery.prototype.isValidCaption = function (caption) {\n    return (typeof caption !== 'undefined' && caption.length > 0);\n  };\n  \n  /**\n   * The callback for the event 'mouseenter'. It assumes that the event currentTarget is an entry.\n   * It shows the caption using jQuery (or using CSS if it is configured so)\n   *\n   * @param {Event} eventObject the event object\n   */\n  JustifiedGallery.prototype.onEntryMouseEnterForCaption = function (eventObject) {\n    var $caption = this.captionFromEntry($(eventObject.currentTarget));\n    if (this.settings.cssAnimation) {\n      $caption.addClass('caption-visible').removeClass('caption-hidden');\n    } else {\n      $caption.stop().fadeTo(this.settings.captionSettings.animationDuration,\n          this.settings.captionSettings.visibleOpacity);\n    }\n  };\n  \n  /**\n   * The callback for the event 'mouseleave'. It assumes that the event currentTarget is an entry.\n   * It hides the caption using jQuery (or using CSS if it is configured so)\n   *\n   * @param {Event} eventObject the event object\n   */\n  JustifiedGallery.prototype.onEntryMouseLeaveForCaption = function (eventObject) {\n    var $caption = this.captionFromEntry($(eventObject.currentTarget));\n    if (this.settings.cssAnimation) {\n      $caption.removeClass('caption-visible').removeClass('caption-hidden');\n    } else {\n      $caption.stop().fadeTo(this.settings.captionSettings.animationDuration,\n          this.settings.captionSettings.nonVisibleOpacity);\n    }\n  };\n  \n  /**\n   * Add the handlers of the entry for the caption\n   *\n   * @param $entry the entry to modify\n   */\n  JustifiedGallery.prototype.addCaptionEventsHandlers = function ($entry) {\n    var captionMouseEvents = $entry.data('jg.captionMouseEvents');\n    if (typeof captionMouseEvents === 'undefined') {\n      captionMouseEvents = {\n        mouseenter: $.proxy(this.onEntryMouseEnterForCaption, this),\n        mouseleave: $.proxy(this.onEntryMouseLeaveForCaption, this)\n      };\n      $entry.on('mouseenter', undefined, undefined, captionMouseEvents.mouseenter);\n      $entry.on('mouseleave', undefined, undefined, captionMouseEvents.mouseleave);\n      $entry.data('jg.captionMouseEvents', captionMouseEvents);\n    }\n  };\n  \n  /**\n   * Remove the handlers of the entry for the caption\n   *\n   * @param $entry the entry to modify\n   */\n  JustifiedGallery.prototype.removeCaptionEventsHandlers = function ($entry) {\n    var captionMouseEvents = $entry.data('jg.captionMouseEvents');\n    if (typeof captionMouseEvents !== 'undefined') {\n      $entry.off('mouseenter', undefined, captionMouseEvents.mouseenter);\n      $entry.off('mouseleave', undefined, captionMouseEvents.mouseleave);\n      $entry.removeData('jg.captionMouseEvents');\n    }\n  };\n  \n  /**\n   * Clear the building row data to be used for a new row\n   */\n  JustifiedGallery.prototype.clearBuildingRow = function () {\n    this.buildingRow.entriesBuff = [];\n    this.buildingRow.aspectRatio = 0;\n    this.buildingRow.width = 0;\n  };\n  \n  /**\n   * Justify the building row, preparing it to\n   *\n   * @param isLastRow\n   * @returns a boolean to know if the row has been justified or not\n   */\n  JustifiedGallery.prototype.prepareBuildingRow = function (isLastRow) {\n    var i, $entry, imgAspectRatio, newImgW, newImgH, justify = true;\n    var minHeight = 0;\n    var availableWidth = this.galleryWidth - 2 * this.border - (\n        (this.buildingRow.entriesBuff.length - 1) * this.settings.margins);\n    var rowHeight = availableWidth / this.buildingRow.aspectRatio;\n    var defaultRowHeight = this.settings.rowHeight;\n    var justifiable = this.buildingRow.width / availableWidth > this.settings.justifyThreshold;\n  \n    //Skip the last row if we can't justify it and the lastRow == 'hide'\n    if (isLastRow && this.settings.lastRow === 'hide' && !justifiable) {\n      for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n        $entry = this.buildingRow.entriesBuff[i];\n        if (this.settings.cssAnimation)\n          $entry.removeClass('entry-visible');\n        else {\n          $entry.stop().fadeTo(0, 0.1);\n          $entry.find('> img, > a > img').fadeTo(0, 0);\n        }\n      }\n      return -1;\n    }\n  \n    // With lastRow = nojustify, justify if is justificable (the images will not become too big)\n    if (isLastRow && !justifiable && this.settings.lastRow !== 'justify' && this.settings.lastRow !== 'hide') {\n      justify = false;\n  \n      if (this.rows > 0) {\n        defaultRowHeight = (this.offY - this.border - this.settings.margins * this.rows) / this.rows;\n        justify = defaultRowHeight * this.buildingRow.aspectRatio / availableWidth > this.settings.justifyThreshold;\n      }\n    }\n  \n    for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n      $entry = this.buildingRow.entriesBuff[i];\n      imgAspectRatio = $entry.data('jg.width') / $entry.data('jg.height');\n  \n      if (justify) {\n        newImgW = (i === this.buildingRow.entriesBuff.length - 1) ? availableWidth : rowHeight * imgAspectRatio;\n        newImgH = rowHeight;\n      } else {\n        newImgW = defaultRowHeight * imgAspectRatio;\n        newImgH = defaultRowHeight;\n      }\n  \n      availableWidth -= Math.round(newImgW);\n      $entry.data('jg.jwidth', Math.round(newImgW));\n      $entry.data('jg.jheight', Math.ceil(newImgH));\n      if (i === 0 || minHeight > newImgH) minHeight = newImgH;\n    }\n  \n    this.buildingRow.height = minHeight;\n    return justify;\n  };\n  \n  /**\n   * Flush a row: justify it, modify the gallery height accordingly to the row height\n   *\n   * @param isLastRow\n   */\n  JustifiedGallery.prototype.flushRow = function (isLastRow) {\n    var settings = this.settings;\n    var $entry, buildingRowRes, offX = this.border, i;\n  \n    buildingRowRes = this.prepareBuildingRow(isLastRow);\n    if (isLastRow && settings.lastRow === 'hide' && buildingRowRes === -1) {\n      this.clearBuildingRow();\n      return;\n    }\n  \n    if(this.maxRowHeight) {\n      if(this.maxRowHeight < this.buildingRow.height)  this.buildingRow.height = this.maxRowHeight;\n    }\n  \n    //Align last (unjustified) row\n    if (isLastRow && (settings.lastRow === 'center' || settings.lastRow === 'right')) {\n      var availableWidth = this.galleryWidth - 2 * this.border - (this.buildingRow.entriesBuff.length - 1) * settings.margins;\n  \n      for (i = 0; i < this.buildingRow.entriesBuff.length; i++) {\n        $entry = this.buildingRow.entriesBuff[i];\n        availableWidth -= $entry.data('jg.jwidth');\n      }\n  \n      if (settings.lastRow === 'center')\n        offX += availableWidth / 2;\n      else if (settings.lastRow === 'right')\n        offX += availableWidth;\n    }\n  \n    var lastEntryIdx = this.buildingRow.entriesBuff.length - 1;\n    for (i = 0; i <= lastEntryIdx; i++) {\n      $entry = this.buildingRow.entriesBuff[ this.settings.rtl ? lastEntryIdx - i : i ];\n      this.displayEntry($entry, offX, this.offY, $entry.data('jg.jwidth'), $entry.data('jg.jheight'), this.buildingRow.height);\n      offX += $entry.data('jg.jwidth') + settings.margins;\n    }\n  \n    //Gallery Height\n    this.galleryHeightToSet = this.offY + this.buildingRow.height + this.border;\n    this.setGalleryTempHeight(this.galleryHeightToSet + this.getSpinnerHeight());\n  \n    if (!isLastRow || (this.buildingRow.height <= settings.rowHeight && buildingRowRes)) {\n      //Ready for a new row\n      this.offY += this.buildingRow.height + settings.margins;\n      this.rows += 1;\n      this.clearBuildingRow();\n      this.settings.triggerEvent.call(this, 'jg.rowflush');\n    }\n  };\n  \n  \n  // Scroll position not restoring: https://github.com/miromannino/Justified-Gallery/issues/221\n  var galleryPrevStaticHeight = 0;\n  \n  JustifiedGallery.prototype.rememberGalleryHeight = function () {\n    galleryPrevStaticHeight = this.$gallery.height();\n    this.$gallery.height(galleryPrevStaticHeight);\n  };\n  \n  // grow only\n  JustifiedGallery.prototype.setGalleryTempHeight = function (height) {\n    galleryPrevStaticHeight = Math.max(height, galleryPrevStaticHeight);\n    this.$gallery.height(galleryPrevStaticHeight);\n  };\n  \n  JustifiedGallery.prototype.setGalleryFinalHeight = function (height) {\n    galleryPrevStaticHeight = height;\n    this.$gallery.height(height);\n  };\n  \n  /**\n   * @returns {boolean} a boolean saying if the scrollbar is active or not\n   */\n  function hasScrollBar() {\n    return $(\"body\").height() > $(window).height();\n  }\n  \n  /**\n   * Checks the width of the gallery container, to know if a new justification is needed\n   */\n  JustifiedGallery.prototype.checkWidth = function () {\n    this.checkWidthIntervalId = setInterval($.proxy(function () {\n  \n      // if the gallery is not currently visible, abort.\n      if (!this.$gallery.is(\":visible\")) return;\n  \n      var galleryWidth = parseFloat(this.$gallery.width());\n      if (hasScrollBar() === this.scrollBarOn) {\n        if (Math.abs(galleryWidth - this.galleryWidth) > this.settings.refreshSensitivity) {\n          this.galleryWidth = galleryWidth;\n          this.rewind();\n  \n          this.rememberGalleryHeight();\n  \n          // Restart to analyze\n          this.startImgAnalyzer(true);\n        }\n      } else {\n        this.scrollBarOn = hasScrollBar();\n        this.galleryWidth = galleryWidth;\n      }\n    }, this), this.settings.refreshTime);\n  };\n  \n  /**\n   * @returns {boolean} a boolean saying if the spinner is active or not\n   */\n  JustifiedGallery.prototype.isSpinnerActive = function () {\n    return this.spinner.intervalId !== null;\n  };\n  \n  /**\n   * @returns {int} the spinner height\n   */\n  JustifiedGallery.prototype.getSpinnerHeight = function () {\n    return this.spinner.$el.innerHeight();\n  };\n  \n  /**\n   * Stops the spinner animation and modify the gallery height to exclude the spinner\n   */\n  JustifiedGallery.prototype.stopLoadingSpinnerAnimation = function () {\n    clearInterval(this.spinner.intervalId);\n    this.spinner.intervalId = null;\n    this.setGalleryTempHeight(this.$gallery.height() - this.getSpinnerHeight());\n    this.spinner.$el.detach();\n  };\n  \n  /**\n   * Starts the spinner animation\n   */\n  JustifiedGallery.prototype.startLoadingSpinnerAnimation = function () {\n    var spinnerContext = this.spinner;\n    var $spinnerPoints = spinnerContext.$el.find('span');\n    clearInterval(spinnerContext.intervalId);\n    this.$gallery.append(spinnerContext.$el);\n    this.setGalleryTempHeight(this.offY + this.buildingRow.height + this.getSpinnerHeight());\n    spinnerContext.intervalId = setInterval(function () {\n      if (spinnerContext.phase < $spinnerPoints.length) {\n        $spinnerPoints.eq(spinnerContext.phase).fadeTo(spinnerContext.timeSlot, 1);\n      } else {\n        $spinnerPoints.eq(spinnerContext.phase - $spinnerPoints.length).fadeTo(spinnerContext.timeSlot, 0);\n      }\n      spinnerContext.phase = (spinnerContext.phase + 1) % ($spinnerPoints.length * 2);\n    }, spinnerContext.timeSlot);\n  };\n  \n  /**\n   * Rewind the image analysis to start from the first entry.\n   */\n  JustifiedGallery.prototype.rewind = function () {\n    this.lastFetchedEntry = null;\n    this.lastAnalyzedIndex = -1;\n    this.offY = this.border;\n    this.rows = 0;\n    this.clearBuildingRow();\n  };\n  \n  /**\n   * Update the entries searching it from the justified gallery HTML element\n   *\n   * @param norewind if norewind only the new entries will be changed (i.e. randomized, sorted or filtered)\n   * @returns {boolean} true if some entries has been founded\n   */\n  JustifiedGallery.prototype.updateEntries = function (norewind) {\n    var newEntries;\n  \n    if (norewind && this.lastFetchedEntry != null) {\n      newEntries = $(this.lastFetchedEntry).nextAll(this.settings.selector).toArray();\n    } else {\n      this.entries = [];\n      newEntries = this.$gallery.children(this.settings.selector).toArray();\n    }\n  \n    if (newEntries.length > 0) {\n  \n      // Sort or randomize\n      if ($.isFunction(this.settings.sort)) {\n        newEntries = this.sortArray(newEntries);\n      } else if (this.settings.randomize) {\n        newEntries = this.shuffleArray(newEntries);\n      }\n      this.lastFetchedEntry = newEntries[newEntries.length - 1];\n  \n      // Filter\n      if (this.settings.filter) {\n        newEntries = this.filterArray(newEntries);\n      } else {\n        this.resetFilters(newEntries);\n      }\n  \n    }\n  \n    this.entries = this.entries.concat(newEntries);\n    return true;\n  };\n  \n  /**\n   * Apply the entries order to the DOM, iterating the entries and appending the images\n   *\n   * @param entries the entries that has been modified and that must be re-ordered in the DOM\n   */\n  JustifiedGallery.prototype.insertToGallery = function (entries) {\n    var that = this;\n    $.each(entries, function () {\n      $(this).appendTo(that.$gallery);\n    });\n  };\n  \n  /**\n   * Shuffle the array using the Fisher-Yates shuffle algorithm\n   *\n   * @param a the array to shuffle\n   * @return the shuffled array\n   */\n  JustifiedGallery.prototype.shuffleArray = function (a) {\n    var i, j, temp;\n    for (i = a.length - 1; i > 0; i--) {\n      j = Math.floor(Math.random() * (i + 1));\n      temp = a[i];\n      a[i] = a[j];\n      a[j] = temp;\n    }\n    this.insertToGallery(a);\n    return a;\n  };\n  \n  /**\n   * Sort the array using settings.comparator as comparator\n   *\n   * @param a the array to sort (it is sorted)\n   * @return the sorted array\n   */\n  JustifiedGallery.prototype.sortArray = function (a) {\n    a.sort(this.settings.sort);\n    this.insertToGallery(a);\n    return a;\n  };\n  \n  /**\n   * Reset the filters removing the 'jg-filtered' class from all the entries\n   *\n   * @param a the array to reset\n   */\n  JustifiedGallery.prototype.resetFilters = function (a) {\n    for (var i = 0; i < a.length; i++) $(a[i]).removeClass('jg-filtered');\n  };\n  \n  /**\n   * Filter the entries considering theirs classes (if a string has been passed) or using a function for filtering.\n   *\n   * @param a the array to filter\n   * @return the filtered array\n   */\n  JustifiedGallery.prototype.filterArray = function (a) {\n    var settings = this.settings;\n    if ($.type(settings.filter) === 'string') {\n      // Filter only keeping the entries passed in the string\n      return a.filter(function (el) {\n        var $el = $(el);\n        if ($el.is(settings.filter)) {\n          $el.removeClass('jg-filtered');\n          return true;\n        } else {\n          $el.addClass('jg-filtered').removeClass('jg-visible');\n          return false;\n        }\n      });\n    } else if ($.isFunction(settings.filter)) {\n      // Filter using the passed function\n      var filteredArr = a.filter(settings.filter);\n      for (var i = 0; i < a.length; i++) {\n        if (filteredArr.indexOf(a[i]) === -1) {\n          $(a[i]).addClass('jg-filtered').removeClass('jg-visible');\n        } else {\n          $(a[i]).removeClass('jg-filtered');\n        }\n      }\n      return filteredArr;\n    }\n  };\n  \n  /**\n   * Destroy the Justified Gallery instance.\n   *\n   * It clears all the css properties added in the style attributes. We doesn't backup the original\n   * values for those css attributes, because it costs (performance) and because in general one\n   * shouldn't use the style attribute for an uniform set of images (where we suppose the use of\n   * classes). Creating a backup is also difficult because JG could be called multiple times and\n   * with different style attributes.\n   */\n  JustifiedGallery.prototype.destroy = function () {\n    clearInterval(this.checkWidthIntervalId);\n  \n    $.each(this.entries, $.proxy(function(_, entry) {\n      var $entry = $(entry);\n  \n      // Reset entry style\n      $entry.css('width', '');\n      $entry.css('height', '');\n      $entry.css('top', '');\n      $entry.css('left', '');\n      $entry.data('jg.loaded', undefined);\n      $entry.removeClass('jg-entry');\n  \n      // Reset image style\n      var $img = this.imgFromEntry($entry);\n      $img.css('width', '');\n      $img.css('height', '');\n      $img.css('margin-left', '');\n      $img.css('margin-top', '');\n      $img.attr('src', $img.data('jg.originalSrc'));\n      $img.data('jg.originalSrc', undefined);\n  \n      // Remove caption\n      this.removeCaptionEventsHandlers($entry);\n      var $caption = this.captionFromEntry($entry);\n      if ($entry.data('jg.createdCaption')) {\n        // remove also the caption element (if created by jg)\n        $entry.data('jg.createdCaption', undefined);\n        if ($caption !== null) $caption.remove();\n      } else {\n        if ($caption !== null) $caption.fadeTo(0, 1);\n      }\n  \n    }, this));\n  \n    this.$gallery.css('height', '');\n    this.$gallery.removeClass('justified-gallery');\n    this.$gallery.data('jg.controller', undefined);\n  };\n  \n  /**\n   * Analyze the images and builds the rows. It returns if it found an image that is not loaded.\n   *\n   * @param isForResize if the image analyzer is called for resizing or not, to call a different callback at the end\n   */\n  JustifiedGallery.prototype.analyzeImages = function (isForResize) {\n    for (var i = this.lastAnalyzedIndex + 1; i < this.entries.length; i++) {\n      var $entry = $(this.entries[i]);\n      if ($entry.data('jg.loaded') === true || $entry.data('jg.loaded') === 'skipped') {\n        var availableWidth = this.galleryWidth - 2 * this.border - (\n            (this.buildingRow.entriesBuff.length - 1) * this.settings.margins);\n        var imgAspectRatio = $entry.data('jg.width') / $entry.data('jg.height');\n        if (availableWidth / (this.buildingRow.aspectRatio + imgAspectRatio) < this.settings.rowHeight) {\n          this.flushRow(false);\n  \n          if(++this.yield.flushed >= this.yield.every) {\n            this.startImgAnalyzer(isForResize);\n            return;\n          }\n        }\n  \n        this.buildingRow.entriesBuff.push($entry);\n        this.buildingRow.aspectRatio += imgAspectRatio;\n        this.buildingRow.width += imgAspectRatio * this.settings.rowHeight;\n        this.lastAnalyzedIndex = i;\n  \n      } else if ($entry.data('jg.loaded') !== 'error') {\n        return;\n      }\n    }\n  \n    // Last row flush (the row is not full)\n    if (this.buildingRow.entriesBuff.length > 0) this.flushRow(true);\n  \n    if (this.isSpinnerActive()) {\n      this.stopLoadingSpinnerAnimation();\n    }\n  \n    /* Stop, if there is, the timeout to start the analyzeImages.\n     This is because an image can be set loaded, and the timeout can be set,\n     but this image can be analyzed yet.\n     */\n    this.stopImgAnalyzerStarter();\n  \n    //On complete callback\n    this.settings.triggerEvent.call(this, isForResize ? 'jg.resize' : 'jg.complete');\n    this.setGalleryFinalHeight(this.galleryHeightToSet);\n  };\n  \n  /**\n   * Stops any ImgAnalyzer starter (that has an assigned timeout)\n   */\n  JustifiedGallery.prototype.stopImgAnalyzerStarter = function () {\n    this.yield.flushed = 0;\n    if (this.imgAnalyzerTimeout !== null) {\n      clearTimeout(this.imgAnalyzerTimeout);\n      this.imgAnalyzerTimeout = null;\n    }\n  };\n  \n  /**\n   * Starts the image analyzer. It is not immediately called to let the browser to update the view\n   *\n   * @param isForResize specifies if the image analyzer must be called for resizing or not\n   */\n  JustifiedGallery.prototype.startImgAnalyzer = function (isForResize) {\n    var that = this;\n    this.stopImgAnalyzerStarter();\n    this.imgAnalyzerTimeout = setTimeout(function () {\n      that.analyzeImages(isForResize);\n    }, 0.001); // we can't start it immediately due to a IE different behaviour\n  };\n  \n  /**\n   * Checks if the image is loaded or not using another image object. We cannot use the 'complete' image property,\n   * because some browsers, with a 404 set complete = true.\n   *\n   * @param imageSrc the image src to load\n   * @param onLoad callback that is called when the image has been loaded\n   * @param onError callback that is called in case of an error\n   */\n  JustifiedGallery.prototype.onImageEvent = function (imageSrc, onLoad, onError) {\n    if (!onLoad && !onError) return;\n  \n    var memImage = new Image();\n    var $memImage = $(memImage);\n    if (onLoad) {\n      $memImage.one('load', function () {\n        $memImage.off('load error');\n        onLoad(memImage);\n      });\n    }\n    if (onError) {\n      $memImage.one('error', function() {\n        $memImage.off('load error');\n        onError(memImage);\n      });\n    }\n    memImage.src = imageSrc;\n  };\n  \n  /**\n   * Init of Justified Gallery controlled\n   * It analyzes all the entries starting theirs loading and calling the image analyzer (that works with loaded images)\n   */\n  JustifiedGallery.prototype.init = function () {\n    var imagesToLoad = false, skippedImages = false, that = this;\n    $.each(this.entries, function (index, entry) {\n      var $entry = $(entry);\n      var $image = that.imgFromEntry($entry);\n  \n      $entry.addClass('jg-entry');\n  \n      if ($entry.data('jg.loaded') !== true && $entry.data('jg.loaded') !== 'skipped') {\n  \n        // Link Rel global overwrite\n        if (that.settings.rel !== null) $entry.attr('rel', that.settings.rel);\n  \n        // Link Target global overwrite\n        if (that.settings.target !== null) $entry.attr('target', that.settings.target);\n  \n        if ($image !== null) {\n  \n          // Image src\n          var imageSrc = that.extractImgSrcFromImage($image);\n          $image.attr('src', imageSrc);\n  \n          /* If we have the height and the width, we don't wait that the image is loaded, but we start directly\n           * with the justification */\n          if (that.settings.waitThumbnailsLoad === false) {\n            var width = parseFloat($image.prop('width'));\n            var height = parseFloat($image.prop('height'));\n            if (!isNaN(width) && !isNaN(height)) {\n              $entry.data('jg.width', width);\n              $entry.data('jg.height', height);\n              $entry.data('jg.loaded', 'skipped');\n              skippedImages = true;\n              that.startImgAnalyzer(false);\n              return true; // continue\n            }\n          }\n  \n          $entry.data('jg.loaded', false);\n          imagesToLoad = true;\n  \n          // Spinner start\n          if (!that.isSpinnerActive()) that.startLoadingSpinnerAnimation();\n  \n          that.onImageEvent(imageSrc, function (loadImg) { // image loaded\n            $entry.data('jg.width', loadImg.width);\n            $entry.data('jg.height', loadImg.height);\n            $entry.data('jg.loaded', true);\n            that.startImgAnalyzer(false);\n          }, function () { // image load error\n            $entry.data('jg.loaded', 'error');\n            that.startImgAnalyzer(false);\n          });\n  \n        } else {\n          $entry.data('jg.loaded', true);\n          $entry.data('jg.width', $entry.width() | parseFloat($entry.css('width')) | 1);\n          $entry.data('jg.height', $entry.height() | parseFloat($entry.css('height')) | 1);\n        }\n  \n      }\n  \n    });\n  \n    if (!imagesToLoad && !skippedImages) this.startImgAnalyzer(false);\n    this.checkWidth();\n  };\n  \n  /**\n   * Checks that it is a valid number. If a string is passed it is converted to a number\n   *\n   * @param settingContainer the object that contains the setting (to allow the conversion)\n   * @param settingName the setting name\n   */\n  JustifiedGallery.prototype.checkOrConvertNumber = function (settingContainer, settingName) {\n    if ($.type(settingContainer[settingName]) === 'string') {\n      settingContainer[settingName] = parseFloat(settingContainer[settingName]);\n    }\n  \n    if ($.type(settingContainer[settingName]) === 'number') {\n      if (isNaN(settingContainer[settingName])) throw 'invalid number for ' + settingName;\n    } else {\n      throw settingName + ' must be a number';\n    }\n  };\n  \n  /**\n   * Checks the sizeRangeSuffixes and, if necessary, converts\n   * its keys from string (e.g. old settings with 'lt100') to int.\n   */\n  JustifiedGallery.prototype.checkSizeRangesSuffixes = function () {\n    if ($.type(this.settings.sizeRangeSuffixes) !== 'object') {\n      throw 'sizeRangeSuffixes must be defined and must be an object';\n    }\n  \n    var suffixRanges = [];\n    for (var rangeIdx in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(rangeIdx)) suffixRanges.push(rangeIdx);\n    }\n  \n    var newSizeRngSuffixes = {0: ''};\n    for (var i = 0; i < suffixRanges.length; i++) {\n      if ($.type(suffixRanges[i]) === 'string') {\n        try {\n          var numIdx = parseInt(suffixRanges[i].replace(/^[a-z]+/, ''), 10);\n          newSizeRngSuffixes[numIdx] = this.settings.sizeRangeSuffixes[suffixRanges[i]];\n        } catch (e) {\n          throw 'sizeRangeSuffixes keys must contains correct numbers (' + e + ')';\n        }\n      } else {\n        newSizeRngSuffixes[suffixRanges[i]] = this.settings.sizeRangeSuffixes[suffixRanges[i]];\n      }\n    }\n  \n    this.settings.sizeRangeSuffixes = newSizeRngSuffixes;\n  };\n  \n  /**\n   * check and convert the maxRowHeight setting\n   * requires rowHeight to be already set\n   * TODO: should be always called when only rowHeight is changed\n   * @return number or null\n   */\n  JustifiedGallery.prototype.retrieveMaxRowHeight = function () {\n    var newMaxRowHeight = null;\n    var rowHeight = this.settings.rowHeight;\n  \n    if ($.type(this.settings.maxRowHeight) === 'string') {\n      if (this.settings.maxRowHeight.match(/^[0-9]+%$/)) {\n        newMaxRowHeight = rowHeight * parseFloat(this.settings.maxRowHeight.match(/^([0-9]+)%$/)[1]) / 100;\n      } else {\n        newMaxRowHeight = parseFloat(this.settings.maxRowHeight);\n      }\n    } else if ($.type(this.settings.maxRowHeight) === 'number') {\n      newMaxRowHeight = this.settings.maxRowHeight;\n    } else if (this.settings.maxRowHeight === false || this.settings.maxRowHeight == null) {\n      return null;\n    } else {\n      throw 'maxRowHeight must be a number or a percentage';\n    }\n  \n    // check if the converted value is not a number\n    if (isNaN(newMaxRowHeight)) throw 'invalid number for maxRowHeight';\n  \n    // check values, maxRowHeight must be >= rowHeight\n    if (newMaxRowHeight < rowHeight) newMaxRowHeight = rowHeight;\n  \n    return newMaxRowHeight;\n  };\n  \n  /**\n   * Checks the settings\n   */\n  JustifiedGallery.prototype.checkSettings = function () {\n    this.checkSizeRangesSuffixes();\n  \n    this.checkOrConvertNumber(this.settings, 'rowHeight');\n    this.checkOrConvertNumber(this.settings, 'margins');\n    this.checkOrConvertNumber(this.settings, 'border');\n  \n    var lastRowModes = [\n      'justify',\n      'nojustify',\n      'left',\n      'center',\n      'right',\n      'hide'\n    ];\n    if (lastRowModes.indexOf(this.settings.lastRow) === -1) {\n      throw 'lastRow must be one of: ' + lastRowModes.join(', ');\n    }\n  \n    this.checkOrConvertNumber(this.settings, 'justifyThreshold');\n    if (this.settings.justifyThreshold < 0 || this.settings.justifyThreshold > 1) {\n      throw 'justifyThreshold must be in the interval [0,1]';\n    }\n    if ($.type(this.settings.cssAnimation) !== 'boolean') {\n      throw 'cssAnimation must be a boolean';\n    }\n  \n    if ($.type(this.settings.captions) !== 'boolean') throw 'captions must be a boolean';\n    this.checkOrConvertNumber(this.settings.captionSettings, 'animationDuration');\n  \n    this.checkOrConvertNumber(this.settings.captionSettings, 'visibleOpacity');\n    if (this.settings.captionSettings.visibleOpacity < 0 ||\n        this.settings.captionSettings.visibleOpacity > 1) {\n      throw 'captionSettings.visibleOpacity must be in the interval [0, 1]';\n    }\n  \n    this.checkOrConvertNumber(this.settings.captionSettings, 'nonVisibleOpacity');\n    if (this.settings.captionSettings.nonVisibleOpacity < 0 ||\n        this.settings.captionSettings.nonVisibleOpacity > 1) {\n      throw 'captionSettings.nonVisibleOpacity must be in the interval [0, 1]';\n    }\n  \n    this.checkOrConvertNumber(this.settings, 'imagesAnimationDuration');\n    this.checkOrConvertNumber(this.settings, 'refreshTime');\n    this.checkOrConvertNumber(this.settings, 'refreshSensitivity');\n    if ($.type(this.settings.randomize) !== 'boolean') throw 'randomize must be a boolean';\n    if ($.type(this.settings.selector) !== 'string') throw 'selector must be a string';\n  \n    if (this.settings.sort !== false && !$.isFunction(this.settings.sort)) {\n      throw 'sort must be false or a comparison function';\n    }\n  \n    if (this.settings.filter !== false && !$.isFunction(this.settings.filter) &&\n        $.type(this.settings.filter) !== 'string') {\n      throw 'filter must be false, a string or a filter function';\n    }\n  };\n  \n  /**\n   * It brings all the indexes from the sizeRangeSuffixes and it orders them. They are then sorted and returned.\n   * @returns {Array} sorted suffix ranges\n   */\n  JustifiedGallery.prototype.retrieveSuffixRanges = function () {\n    var suffixRanges = [];\n    for (var rangeIdx in this.settings.sizeRangeSuffixes) {\n      if (this.settings.sizeRangeSuffixes.hasOwnProperty(rangeIdx)) suffixRanges.push(parseInt(rangeIdx, 10));\n    }\n    suffixRanges.sort(function (a, b) { return a > b ? 1 : a < b ? -1 : 0; });\n    return suffixRanges;\n  };\n  \n  /**\n   * Update the existing settings only changing some of them\n   *\n   * @param newSettings the new settings (or a subgroup of them)\n   */\n  JustifiedGallery.prototype.updateSettings = function (newSettings) {\n    // In this case Justified Gallery has been called again changing only some options\n    this.settings = $.extend({}, this.settings, newSettings);\n    this.checkSettings();\n  \n    // As reported in the settings: negative value = same as margins, 0 = disabled\n    this.border = this.settings.border >= 0 ? this.settings.border : this.settings.margins;\n  \n    this.maxRowHeight = this.retrieveMaxRowHeight();\n    this.suffixRanges = this.retrieveSuffixRanges();\n  };\n  \n  JustifiedGallery.prototype.defaults = {\n    sizeRangeSuffixes: { }, /* e.g. Flickr configuration\n        {\n          100: '_t',  // used when longest is less than 100px\n          240: '_m',  // used when longest is between 101px and 240px\n          320: '_n',  // ...\n          500: '',\n          640: '_z',\n          1024: '_b'  // used as else case because it is the last\n        }\n    */\n    thumbnailPath: undefined, /* If defined, sizeRangeSuffixes is not used, and this function is used to determine the\n    path relative to a specific thumbnail size. The function should accept respectively three arguments:\n    current path, width and height */\n    rowHeight: 120, // required? required to be > 0?\n    maxRowHeight: false, // false or negative value to deactivate. Positive number to express the value in pixels,\n                         // A string '[0-9]+%' to express in percentage (e.g. 300% means that the row height\n                         // can't exceed 3 * rowHeight)\n    margins: 1,\n    border: -1, // negative value = same as margins, 0 = disabled, any other value to set the border\n  \n    lastRow: 'nojustify', // â€¦ which is the same as 'left', or can be 'justify', 'center', 'right' or 'hide'\n  \n    justifyThreshold: 0.90, /* if row width / available space > 0.90 it will be always justified\n                             * (i.e. lastRow setting is not considered) */\n    waitThumbnailsLoad: true,\n    captions: true,\n    cssAnimation: true,\n    imagesAnimationDuration: 500, // ignored with css animations\n    captionSettings: { // ignored with css animations\n      animationDuration: 500,\n      visibleOpacity: 0.7,\n      nonVisibleOpacity: 0.0\n    },\n    rel: null, // rewrite the rel of each analyzed links\n    target: null, // rewrite the target of all links\n    extension: /\\.[^.\\\\/]+$/, // regexp to capture the extension of an image\n    refreshTime: 200, // time interval (in ms) to check if the page changes its width\n    refreshSensitivity: 0, // change in width allowed (in px) without re-building the gallery\n    randomize: false,\n    rtl: false, // right-to-left mode\n    sort: false, /*\n      - false: to do not sort\n      - function: to sort them using the function as comparator (see Array.prototype.sort())\n    */\n    filter: false, /*\n      - false, null or undefined: for a disabled filter\n      - a string: an entry is kept if entry.is(filter string) returns true\n                  see jQuery's .is() function for further information\n      - a function: invoked with arguments (entry, index, array). Return true to keep the entry, false otherwise.\n                    It follows the specifications of the Array.prototype.filter() function of JavaScript.\n    */\n    selector: 'a, div:not(.spinner)', // The selector that is used to know what are the entries of the gallery\n    imgSelector: '> img, > a > img', // The selector that is used to know what are the images of each entry\n    triggerEvent: function (event) { // This is called to trigger events, the default behavior is to call $.trigger\n      this.$gallery.trigger(event);  // Consider that 'this' is this set to the JustifiedGallery object, so it can\n    }                                // access to fields such as $gallery, useful to trigger events with jQuery.\n  };\n\n  /**\n   * Justified Gallery plugin for jQuery\n   *\n   * Events\n   *  - jg.complete : called when all the gallery has been created\n   *  - jg.resize : called when the gallery has been resized\n   *  - jg.rowflush : when a new row appears\n   *\n   * @param arg the action (or the settings) passed when the plugin is called\n   * @returns {*} the object itself\n   */\n  $.fn.justifiedGallery = function (arg) {\n    return this.each(function (index, gallery) {\n\n      var $gallery = $(gallery);\n      $gallery.addClass('justified-gallery');\n\n      var controller = $gallery.data('jg.controller');\n      if (typeof controller === 'undefined') {\n        // Create controller and assign it to the object data\n        if (typeof arg !== 'undefined' && arg !== null && $.type(arg) !== 'object') {\n          if (arg === 'destroy') return; // Just a call to an unexisting object\n          throw 'The argument must be an object';\n        }\n        controller = new JustifiedGallery($gallery, $.extend({}, JustifiedGallery.prototype.defaults, arg));\n        $gallery.data('jg.controller', controller);\n      } else if (arg === 'norewind') {\n        // In this case we don't rewind: we analyze only the latest images (e.g. to complete the last unfinished row\n        // ... left to be more readable\n      } else if (arg === 'destroy') {\n        controller.destroy();\n        return;\n      } else {\n        // In this case Justified Gallery has been called again changing only some options\n        controller.updateSettings(arg);\n        controller.rewind();\n      }\n\n      // Update the entries list\n      if (!controller.updateEntries(arg === 'norewind')) return;\n\n      // Init justified gallery\n      controller.init();\n\n    });\n  };\n\n}));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IseUNBQXlDO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix5Q0FBeUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlDQUF5QztBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1CQUFtQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFNBQVM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGVBQWUsU0FBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEtBQUs7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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O0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0Msb0NBQW9DO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQyxxQ0FBcUM7QUFDckMscUNBQXFDO0FBQ3JDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsR0FBRztBQUNsQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0EsK0RBQStEO0FBQy9EO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsS0FBSztBQUNMOztBQUVBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93cC8uL25vZGVfbW9kdWxlcy9qdXN0aWZpZWRHYWxsZXJ5L2Rpc3QvanMvanF1ZXJ5Lmp1c3RpZmllZEdhbGxlcnkuanM/MTIxMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGp1c3RpZmllZEdhbGxlcnkgLSB2My43LjBcbiAqIGh0dHA6Ly9taXJvbWFubmluby5naXRodWIuaW8vSnVzdGlmaWVkLUdhbGxlcnkvXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggTWlybyBNYW5uaW5vXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgLy8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxuICAgIGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgIC8vIE5vZGUvQ29tbW9uSlNcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCByb290LCBqUXVlcnkgKSB7XG4gICAgICBpZiAoIGpRdWVyeSA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAvLyByZXF1aXJlKCdqUXVlcnknKSByZXR1cm5zIGEgZmFjdG9yeSB0aGF0IHJlcXVpcmVzIHdpbmRvdyB0b1xuICAgICAgICAvLyBidWlsZCBhIGpRdWVyeSBpbnN0YW5jZSwgd2Ugbm9ybWFsaXplIGhvdyB3ZSB1c2UgbW9kdWxlc1xuICAgICAgICAvLyB0aGF0IHJlcXVpcmUgdGhpcyBwYXR0ZXJuIGJ1dCB0aGUgd2luZG93IHByb3ZpZGVkIGlzIGEgbm9vcFxuICAgICAgICAvLyBpZiBpdCdzIGRlZmluZWQgKGhvdyBqcXVlcnkgd29ya3MpXG4gICAgICAgIGlmICggdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgICAgICAgalF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgalF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jykocm9vdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZhY3RvcnkoalF1ZXJ5KTtcbiAgICAgIHJldHVybiBqUXVlcnk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICBmYWN0b3J5KGpRdWVyeSk7XG4gIH1cbn0oZnVuY3Rpb24gKCQpIHtcblxuICAvKipcbiAgICogSnVzdGlmaWVkIEdhbGxlcnkgY29udHJvbGxlciBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0gJGdhbGxlcnkgdGhlIGdhbGxlcnkgdG8gYnVpbGRcbiAgICogQHBhcmFtIHNldHRpbmdzIHRoZSBzZXR0aW5ncyAodGhlIGRlZmF1bHRzIGFyZSBpbiBKdXN0aWZpZWRHYWxsZXJ5LmRlZmF1bHRzKVxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBKdXN0aWZpZWRHYWxsZXJ5ID0gZnVuY3Rpb24gKCRnYWxsZXJ5LCBzZXR0aW5ncykge1xuICBcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgdGhpcy5jaGVja1NldHRpbmdzKCk7XG4gIFxuICAgIHRoaXMuaW1nQW5hbHl6ZXJUaW1lb3V0ID0gbnVsbDtcbiAgICB0aGlzLmVudHJpZXMgPSBudWxsO1xuICAgIHRoaXMuYnVpbGRpbmdSb3cgPSB7XG4gICAgICBlbnRyaWVzQnVmZiA6IFtdLFxuICAgICAgd2lkdGggOiAwLFxuICAgICAgaGVpZ2h0IDogMCxcbiAgICAgIGFzcGVjdFJhdGlvIDogMFxuICAgIH07XG4gICAgdGhpcy5sYXN0RmV0Y2hlZEVudHJ5ID0gbnVsbDtcbiAgICB0aGlzLmxhc3RBbmFseXplZEluZGV4ID0gLTE7XG4gICAgdGhpcy55aWVsZCA9IHtcbiAgICAgIGV2ZXJ5IDogMiwgLy8gZG8gYSBmbHVzaCBldmVyeSBuIGZsdXNoZXMgKG11c3QgYmUgZ3JlYXRlciB0aGFuIDEpXG4gICAgICBmbHVzaGVkIDogMCAvLyBmbHVzaGVkIHJvd3Mgd2l0aG91dCBhIHlpZWxkXG4gICAgfTtcbiAgICB0aGlzLmJvcmRlciA9IHNldHRpbmdzLmJvcmRlciA+PSAwID8gc2V0dGluZ3MuYm9yZGVyIDogc2V0dGluZ3MubWFyZ2lucztcbiAgICB0aGlzLm1heFJvd0hlaWdodCA9IHRoaXMucmV0cmlldmVNYXhSb3dIZWlnaHQoKTtcbiAgICB0aGlzLnN1ZmZpeFJhbmdlcyA9IHRoaXMucmV0cmlldmVTdWZmaXhSYW5nZXMoKTtcbiAgICB0aGlzLm9mZlkgPSB0aGlzLmJvcmRlcjtcbiAgICB0aGlzLnJvd3MgPSAwO1xuICAgIHRoaXMuc3Bpbm5lciA9IHtcbiAgICAgIHBoYXNlIDogMCxcbiAgICAgIHRpbWVTbG90IDogMTUwLFxuICAgICAgJGVsIDogJCgnPGRpdiBjbGFzcz1cInNwaW5uZXJcIj48c3Bhbj48L3NwYW4+PHNwYW4+PC9zcGFuPjxzcGFuPjwvc3Bhbj48L2Rpdj4nKSxcbiAgICAgIGludGVydmFsSWQgOiBudWxsXG4gICAgfTtcbiAgICB0aGlzLnNjcm9sbEJhck9uID0gZmFsc2U7XG4gICAgdGhpcy5jaGVja1dpZHRoSW50ZXJ2YWxJZCA9IG51bGw7XG4gICAgdGhpcy5nYWxsZXJ5V2lkdGggPSAkZ2FsbGVyeS53aWR0aCgpO1xuICAgIHRoaXMuJGdhbGxlcnkgPSAkZ2FsbGVyeTtcbiAgXG4gIH07XG4gIFxuICAvKiogQHJldHVybnMge1N0cmluZ30gdGhlIGJlc3Qgc3VmZml4IGdpdmVuIHRoZSB3aWR0aCBhbmQgdGhlIGhlaWdodCAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5nZXRTdWZmaXggPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBsb25nZXN0U2lkZSwgaTtcbiAgICBsb25nZXN0U2lkZSA9ICh3aWR0aCA+IGhlaWdodCkgPyB3aWR0aCA6IGhlaWdodDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5zdWZmaXhSYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsb25nZXN0U2lkZSA8PSB0aGlzLnN1ZmZpeFJhbmdlc1tpXSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5zaXplUmFuZ2VTdWZmaXhlc1t0aGlzLnN1ZmZpeFJhbmdlc1tpXV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnNpemVSYW5nZVN1ZmZpeGVzW3RoaXMuc3VmZml4UmFuZ2VzW2kgLSAxXV07XG4gIH07XG4gIFxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBzdWZmaXggZnJvbSB0aGUgc3RyaW5nXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IGEgbmV3IHN0cmluZyB3aXRob3V0IHRoZSBzdWZmaXhcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnJlbW92ZVN1ZmZpeCA9IGZ1bmN0aW9uIChzdHIsIHN1ZmZpeCkge1xuICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIHN0ci5sZW5ndGggLSBzdWZmaXgubGVuZ3RoKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYSBib29sZWFuIHRvIHNheSBpZiB0aGUgc3VmZml4IGlzIGNvbnRhaW5lZCBpbiB0aGUgc3RyIG9yIG5vdFxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuZW5kc1dpdGggPSBmdW5jdGlvbiAoc3RyLCBzdWZmaXgpIHtcbiAgICByZXR1cm4gc3RyLmluZGV4T2Yoc3VmZml4LCBzdHIubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aCkgIT09IC0xO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEdldCB0aGUgdXNlZCBzdWZmaXggb2YgYSBwYXJ0aWN1bGFyIHVybFxuICAgKlxuICAgKiBAcGFyYW0gc3RyXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHJldHVybiB0aGUgdXNlZCBzdWZmaXhcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmdldFVzZWRTdWZmaXggPSBmdW5jdGlvbiAoc3RyKSB7XG4gICAgZm9yICh2YXIgc2kgaW4gdGhpcy5zZXR0aW5ncy5zaXplUmFuZ2VTdWZmaXhlcykge1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXMuaGFzT3duUHJvcGVydHkoc2kpKSB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNpemVSYW5nZVN1ZmZpeGVzW3NpXS5sZW5ndGggPT09IDApIGNvbnRpbnVlO1xuICAgICAgICBpZiAodGhpcy5lbmRzV2l0aChzdHIsIHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXNbc2ldKSkgcmV0dXJuIHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXNbc2ldO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH07XG4gIFxuICAvKipcbiAgICogR2l2ZW4gYW4gaW1hZ2Ugc3JjLCB3aXRoIHRoZSB3aWR0aCBhbmQgdGhlIGhlaWdodCwgcmV0dXJucyB0aGUgbmV3IGltYWdlIHNyYyB3aXRoIHRoZVxuICAgKiBiZXN0IHN1ZmZpeCB0byBzaG93IHRoZSBiZXN0IHF1YWxpdHkgdGh1bWJuYWlsLlxuICAgKlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgc3VmZml4IHRvIHVzZVxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUubmV3U3JjID0gZnVuY3Rpb24gKGltYWdlU3JjLCBpbWdXaWR0aCwgaW1nSGVpZ2h0LCBpbWFnZSkge1xuICAgIHZhciBuZXdJbWFnZVNyYztcbiAgXG4gICAgaWYgKHRoaXMuc2V0dGluZ3MudGh1bWJuYWlsUGF0aCkge1xuICAgICAgbmV3SW1hZ2VTcmMgPSB0aGlzLnNldHRpbmdzLnRodW1ibmFpbFBhdGgoaW1hZ2VTcmMsIGltZ1dpZHRoLCBpbWdIZWlnaHQsIGltYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIG1hdGNoUmVzID0gaW1hZ2VTcmMubWF0Y2godGhpcy5zZXR0aW5ncy5leHRlbnNpb24pO1xuICAgICAgdmFyIGV4dCA9IChtYXRjaFJlcyAhPT0gbnVsbCkgPyBtYXRjaFJlc1swXSA6ICcnO1xuICAgICAgbmV3SW1hZ2VTcmMgPSBpbWFnZVNyYy5yZXBsYWNlKHRoaXMuc2V0dGluZ3MuZXh0ZW5zaW9uLCAnJyk7XG4gICAgICBuZXdJbWFnZVNyYyA9IHRoaXMucmVtb3ZlU3VmZml4KG5ld0ltYWdlU3JjLCB0aGlzLmdldFVzZWRTdWZmaXgobmV3SW1hZ2VTcmMpKTtcbiAgICAgIG5ld0ltYWdlU3JjICs9IHRoaXMuZ2V0U3VmZml4KGltZ1dpZHRoLCBpbWdIZWlnaHQpICsgZXh0O1xuICAgIH1cbiAgXG4gICAgcmV0dXJuIG5ld0ltYWdlU3JjO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFNob3dzIHRoZSBpbWFnZXMgdGhhdCBpcyBpbiB0aGUgZ2l2ZW4gZW50cnlcbiAgICpcbiAgICogQHBhcmFtICRlbnRyeSB0aGUgZW50cnlcbiAgICogQHBhcmFtIGNhbGxiYWNrIHRoZSBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSBzaG93IGFuaW1hdGlvbiBpcyBmaW5pc2hlZFxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuc2hvd0ltZyA9IGZ1bmN0aW9uICgkZW50cnksIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuY3NzQW5pbWF0aW9uKSB7XG4gICAgICAkZW50cnkuYWRkQ2xhc3MoJ2VudHJ5LXZpc2libGUnKTtcbiAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVudHJ5LnN0b3AoKS5mYWRlVG8odGhpcy5zZXR0aW5ncy5pbWFnZXNBbmltYXRpb25EdXJhdGlvbiwgMS4wLCBjYWxsYmFjayk7XG4gICAgICAkZW50cnkuZmluZCh0aGlzLnNldHRpbmdzLmltZ1NlbGVjdG9yKS5zdG9wKCkuZmFkZVRvKHRoaXMuc2V0dGluZ3MuaW1hZ2VzQW5pbWF0aW9uRHVyYXRpb24sIDEuMCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBFeHRyYWN0IHRoZSBpbWFnZSBzcmMgZm9ybSB0aGUgaW1hZ2UsIGxvb2tpbmcgZnJvbSB0aGUgJ3NhZmUtc3JjJywgYW5kIGlmIGl0IGNhbid0IGJlIGZvdW5kLCBmcm9tIHRoZVxuICAgKiAnc3JjJyBhdHRyaWJ1dGUuIEl0IHNhdmVzIGluIHRoZSBpbWFnZSBkYXRhIHRoZSAnamcub3JpZ2luYWxTcmMnIGZpZWxkLCB3aXRoIHRoZSBleHRyYWN0ZWQgc3JjLlxuICAgKlxuICAgKiBAcGFyYW0gJGltYWdlIHRoZSBpbWFnZSB0byBhbmFseXplXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBleHRyYWN0ZWQgc3JjXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5leHRyYWN0SW1nU3JjRnJvbUltYWdlID0gZnVuY3Rpb24gKCRpbWFnZSkge1xuICAgIHZhciBpbWFnZVNyYyA9ICh0eXBlb2YgJGltYWdlLmRhdGEoJ3NhZmUtc3JjJykgIT09ICd1bmRlZmluZWQnKSA/ICRpbWFnZS5kYXRhKCdzYWZlLXNyYycpIDogJGltYWdlLmF0dHIoJ3NyYycpO1xuICAgICRpbWFnZS5kYXRhKCdqZy5vcmlnaW5hbFNyYycsIGltYWdlU3JjKTtcbiAgICByZXR1cm4gaW1hZ2VTcmM7XG4gIH07XG4gIFxuICAvKiogQHJldHVybnMge2pRdWVyeX0gdGhlIGltYWdlIGluIHRoZSBnaXZlbiBlbnRyeSAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5pbWdGcm9tRW50cnkgPSBmdW5jdGlvbiAoJGVudHJ5KSB7XG4gICAgdmFyICRpbWcgPSAkZW50cnkuZmluZCh0aGlzLnNldHRpbmdzLmltZ1NlbGVjdG9yKTtcbiAgICByZXR1cm4gJGltZy5sZW5ndGggPT09IDAgPyBudWxsIDogJGltZztcbiAgfTtcbiAgXG4gIC8qKiBAcmV0dXJucyB7alF1ZXJ5fSB0aGUgY2FwdGlvbiBpbiB0aGUgZ2l2ZW4gZW50cnkgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuY2FwdGlvbkZyb21FbnRyeSA9IGZ1bmN0aW9uICgkZW50cnkpIHtcbiAgICB2YXIgJGNhcHRpb24gPSAkZW50cnkuZmluZCgnPiAuY2FwdGlvbicpO1xuICAgIHJldHVybiAkY2FwdGlvbi5sZW5ndGggPT09IDAgPyBudWxsIDogJGNhcHRpb247XG4gIH07XG4gIFxuICAvKipcbiAgICogRGlzcGxheSB0aGUgZW50cnlcbiAgICpcbiAgICogQHBhcmFtIHtqUXVlcnl9ICRlbnRyeSB0aGUgZW50cnkgdG8gZGlzcGxheVxuICAgKiBAcGFyYW0ge2ludH0geCB0aGUgeCBwb3NpdGlvbiB3aGVyZSB0aGUgZW50cnkgbXVzdCBiZSBwb3NpdGlvbmVkXG4gICAqIEBwYXJhbSB5IHRoZSB5IHBvc2l0aW9uIHdoZXJlIHRoZSBlbnRyeSBtdXN0IGJlIHBvc2l0aW9uZWRcbiAgICogQHBhcmFtIGltZ1dpZHRoIHRoZSBpbWFnZSB3aWR0aFxuICAgKiBAcGFyYW0gaW1nSGVpZ2h0IHRoZSBpbWFnZSBoZWlnaHRcbiAgICogQHBhcmFtIHJvd0hlaWdodCB0aGUgcm93IGhlaWdodCBvZiB0aGUgcm93IHRoYXQgb3ducyB0aGUgZW50cnlcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmRpc3BsYXlFbnRyeSA9IGZ1bmN0aW9uICgkZW50cnksIHgsIHksIGltZ1dpZHRoLCBpbWdIZWlnaHQsIHJvd0hlaWdodCkge1xuICAgICRlbnRyeS53aWR0aChpbWdXaWR0aCk7XG4gICAgJGVudHJ5LmhlaWdodChyb3dIZWlnaHQpO1xuICAgICRlbnRyeS5jc3MoJ3RvcCcsIHkpO1xuICAgICRlbnRyeS5jc3MoJ2xlZnQnLCB4KTtcbiAgXG4gICAgdmFyICRpbWFnZSA9IHRoaXMuaW1nRnJvbUVudHJ5KCRlbnRyeSk7XG4gICAgaWYgKCRpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgJGltYWdlLmNzcygnd2lkdGgnLCBpbWdXaWR0aCk7XG4gICAgICAkaW1hZ2UuY3NzKCdoZWlnaHQnLCBpbWdIZWlnaHQpO1xuICAgICAgJGltYWdlLmNzcygnbWFyZ2luLWxlZnQnLCAtIGltZ1dpZHRoIC8gMik7XG4gICAgICAkaW1hZ2UuY3NzKCdtYXJnaW4tdG9wJywgLSBpbWdIZWlnaHQgLyAyKTtcbiAgXG4gICAgICAvLyBJbWFnZSByZWxvYWRpbmcgZm9yIGFuIGhpZ2ggcXVhbGl0eSBvZiB0aHVtYm5haWxzXG4gICAgICB2YXIgaW1hZ2VTcmMgPSAkaW1hZ2UuYXR0cignc3JjJyk7XG4gICAgICB2YXIgbmV3SW1hZ2VTcmMgPSB0aGlzLm5ld1NyYyhpbWFnZVNyYywgaW1nV2lkdGgsIGltZ0hlaWdodCwgJGltYWdlWzBdKTtcbiAgXG4gICAgICAkaW1hZ2Uub25lKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGltYWdlLmF0dHIoJ3NyYycsICRpbWFnZS5kYXRhKCdqZy5vcmlnaW5hbFNyYycpKTsgLy9yZXZlcnQgdG8gdGhlIG9yaWdpbmFsIHRodW1ibmFpbCwgd2UgZ290IGl0LlxuICAgICAgfSk7XG4gIFxuICAgICAgdmFyIGxvYWROZXdJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGltYWdlU3JjICE9PSBuZXdJbWFnZVNyYykgeyAvL2xvYWQgdGhlIG5ldyBpbWFnZSBhZnRlciB0aGUgZmFkZUluXG4gICAgICAgICAgJGltYWdlLmF0dHIoJ3NyYycsIG5ld0ltYWdlU3JjKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgXG4gICAgICBpZiAoJGVudHJ5LmRhdGEoJ2pnLmxvYWRlZCcpID09PSAnc2tpcHBlZCcpIHtcbiAgICAgICAgdGhpcy5vbkltYWdlRXZlbnQoaW1hZ2VTcmMsICQucHJveHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdGhpcy5zaG93SW1nKCRlbnRyeSwgbG9hZE5ld0ltYWdlKTtcbiAgICAgICAgICAkZW50cnkuZGF0YSgnamcubG9hZGVkJywgdHJ1ZSk7XG4gICAgICAgIH0sIHRoaXMpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2hvd0ltZygkZW50cnksIGxvYWROZXdJbWFnZSk7XG4gICAgICB9XG4gIFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNob3dJbWcoJGVudHJ5KTtcbiAgICB9XG4gIFxuICAgIHRoaXMuZGlzcGxheUVudHJ5Q2FwdGlvbigkZW50cnkpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIERpc3BsYXkgdGhlIGVudHJ5IGNhcHRpb24uIElmIHRoZSBjYXB0aW9uIGVsZW1lbnQgZG9lc24ndCBleGlzdHMsIGl0IGNyZWF0ZXMgdGhlIGNhcHRpb24gdXNpbmcgdGhlICdhbHQnXG4gICAqIG9yIHRoZSAndGl0bGUnIGF0dHJpYnV0ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSAkZW50cnkgdGhlIGVudHJ5IHRvIHByb2Nlc3NcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmRpc3BsYXlFbnRyeUNhcHRpb24gPSBmdW5jdGlvbiAoJGVudHJ5KSB7XG4gICAgdmFyICRpbWFnZSA9IHRoaXMuaW1nRnJvbUVudHJ5KCRlbnRyeSk7XG4gICAgaWYgKCRpbWFnZSAhPT0gbnVsbCAmJiB0aGlzLnNldHRpbmdzLmNhcHRpb25zKSB7XG4gICAgICB2YXIgJGltZ0NhcHRpb24gPSB0aGlzLmNhcHRpb25Gcm9tRW50cnkoJGVudHJ5KTtcbiAgXG4gICAgICAvLyBDcmVhdGUgaXQgaWYgaXQgZG9lc24ndCBleGlzdHNcbiAgICAgIGlmICgkaW1nQ2FwdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICB2YXIgY2FwdGlvbiA9ICRpbWFnZS5hdHRyKCdhbHQnKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRDYXB0aW9uKGNhcHRpb24pKSBjYXB0aW9uID0gJGVudHJ5LmF0dHIoJ3RpdGxlJyk7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRDYXB0aW9uKGNhcHRpb24pKSB7IC8vIENyZWF0ZSBvbmx5IHdlIGZvdW5kIHNvbWV0aGluZ1xuICAgICAgICAgICRpbWdDYXB0aW9uID0gJCgnPGRpdiBjbGFzcz1cImNhcHRpb25cIj4nICsgY2FwdGlvbiArICc8L2Rpdj4nKTtcbiAgICAgICAgICAkZW50cnkuYXBwZW5kKCRpbWdDYXB0aW9uKTtcbiAgICAgICAgICAkZW50cnkuZGF0YSgnamcuY3JlYXRlZENhcHRpb24nLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICBcbiAgICAgIC8vIENyZWF0ZSBldmVudHMgKHdlIGNoZWNrIGFnYWluIHRoZSAkaW1nQ2FwdGlvbiBiZWNhdXNlIGl0IGNhbiBiZSBzdGlsbCBpbmV4aXN0ZW50KVxuICAgICAgaWYgKCRpbWdDYXB0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5jc3NBbmltYXRpb24pICRpbWdDYXB0aW9uLnN0b3AoKS5mYWRlVG8oMCwgdGhpcy5zZXR0aW5ncy5jYXB0aW9uU2V0dGluZ3Mubm9uVmlzaWJsZU9wYWNpdHkpO1xuICAgICAgICB0aGlzLmFkZENhcHRpb25FdmVudHNIYW5kbGVycygkZW50cnkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUNhcHRpb25FdmVudHNIYW5kbGVycygkZW50cnkpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgdGhlIGNhcHRpb25cbiAgICpcbiAgICogQHBhcmFtIGNhcHRpb24gVGhlIGNhcHRpb24gdGhhdCBzaG91bGQgYmUgdmFsaWRhdGVkXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFZhbGlkYXRpb24gcmVzdWx0XG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5pc1ZhbGlkQ2FwdGlvbiA9IGZ1bmN0aW9uIChjYXB0aW9uKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgY2FwdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FwdGlvbi5sZW5ndGggPiAwKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBUaGUgY2FsbGJhY2sgZm9yIHRoZSBldmVudCAnbW91c2VlbnRlcicuIEl0IGFzc3VtZXMgdGhhdCB0aGUgZXZlbnQgY3VycmVudFRhcmdldCBpcyBhbiBlbnRyeS5cbiAgICogSXQgc2hvd3MgdGhlIGNhcHRpb24gdXNpbmcgalF1ZXJ5IChvciB1c2luZyBDU1MgaWYgaXQgaXMgY29uZmlndXJlZCBzbylcbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRPYmplY3QgdGhlIGV2ZW50IG9iamVjdFxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUub25FbnRyeU1vdXNlRW50ZXJGb3JDYXB0aW9uID0gZnVuY3Rpb24gKGV2ZW50T2JqZWN0KSB7XG4gICAgdmFyICRjYXB0aW9uID0gdGhpcy5jYXB0aW9uRnJvbUVudHJ5KCQoZXZlbnRPYmplY3QuY3VycmVudFRhcmdldCkpO1xuICAgIGlmICh0aGlzLnNldHRpbmdzLmNzc0FuaW1hdGlvbikge1xuICAgICAgJGNhcHRpb24uYWRkQ2xhc3MoJ2NhcHRpb24tdmlzaWJsZScpLnJlbW92ZUNsYXNzKCdjYXB0aW9uLWhpZGRlbicpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkY2FwdGlvbi5zdG9wKCkuZmFkZVRvKHRoaXMuc2V0dGluZ3MuY2FwdGlvblNldHRpbmdzLmFuaW1hdGlvbkR1cmF0aW9uLFxuICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2FwdGlvblNldHRpbmdzLnZpc2libGVPcGFjaXR5KTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogVGhlIGNhbGxiYWNrIGZvciB0aGUgZXZlbnQgJ21vdXNlbGVhdmUnLiBJdCBhc3N1bWVzIHRoYXQgdGhlIGV2ZW50IGN1cnJlbnRUYXJnZXQgaXMgYW4gZW50cnkuXG4gICAqIEl0IGhpZGVzIHRoZSBjYXB0aW9uIHVzaW5nIGpRdWVyeSAob3IgdXNpbmcgQ1NTIGlmIGl0IGlzIGNvbmZpZ3VyZWQgc28pXG4gICAqXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50T2JqZWN0IHRoZSBldmVudCBvYmplY3RcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLm9uRW50cnlNb3VzZUxlYXZlRm9yQ2FwdGlvbiA9IGZ1bmN0aW9uIChldmVudE9iamVjdCkge1xuICAgIHZhciAkY2FwdGlvbiA9IHRoaXMuY2FwdGlvbkZyb21FbnRyeSgkKGV2ZW50T2JqZWN0LmN1cnJlbnRUYXJnZXQpKTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jc3NBbmltYXRpb24pIHtcbiAgICAgICRjYXB0aW9uLnJlbW92ZUNsYXNzKCdjYXB0aW9uLXZpc2libGUnKS5yZW1vdmVDbGFzcygnY2FwdGlvbi1oaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGNhcHRpb24uc3RvcCgpLmZhZGVUbyh0aGlzLnNldHRpbmdzLmNhcHRpb25TZXR0aW5ncy5hbmltYXRpb25EdXJhdGlvbixcbiAgICAgICAgICB0aGlzLnNldHRpbmdzLmNhcHRpb25TZXR0aW5ncy5ub25WaXNpYmxlT3BhY2l0eSk7XG4gICAgfVxuICB9O1xuICBcbiAgLyoqXG4gICAqIEFkZCB0aGUgaGFuZGxlcnMgb2YgdGhlIGVudHJ5IGZvciB0aGUgY2FwdGlvblxuICAgKlxuICAgKiBAcGFyYW0gJGVudHJ5IHRoZSBlbnRyeSB0byBtb2RpZnlcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmFkZENhcHRpb25FdmVudHNIYW5kbGVycyA9IGZ1bmN0aW9uICgkZW50cnkpIHtcbiAgICB2YXIgY2FwdGlvbk1vdXNlRXZlbnRzID0gJGVudHJ5LmRhdGEoJ2pnLmNhcHRpb25Nb3VzZUV2ZW50cycpO1xuICAgIGlmICh0eXBlb2YgY2FwdGlvbk1vdXNlRXZlbnRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY2FwdGlvbk1vdXNlRXZlbnRzID0ge1xuICAgICAgICBtb3VzZWVudGVyOiAkLnByb3h5KHRoaXMub25FbnRyeU1vdXNlRW50ZXJGb3JDYXB0aW9uLCB0aGlzKSxcbiAgICAgICAgbW91c2VsZWF2ZTogJC5wcm94eSh0aGlzLm9uRW50cnlNb3VzZUxlYXZlRm9yQ2FwdGlvbiwgdGhpcylcbiAgICAgIH07XG4gICAgICAkZW50cnkub24oJ21vdXNlZW50ZXInLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY2FwdGlvbk1vdXNlRXZlbnRzLm1vdXNlZW50ZXIpO1xuICAgICAgJGVudHJ5Lm9uKCdtb3VzZWxlYXZlJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNhcHRpb25Nb3VzZUV2ZW50cy5tb3VzZWxlYXZlKTtcbiAgICAgICRlbnRyeS5kYXRhKCdqZy5jYXB0aW9uTW91c2VFdmVudHMnLCBjYXB0aW9uTW91c2VFdmVudHMpO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGhhbmRsZXJzIG9mIHRoZSBlbnRyeSBmb3IgdGhlIGNhcHRpb25cbiAgICpcbiAgICogQHBhcmFtICRlbnRyeSB0aGUgZW50cnkgdG8gbW9kaWZ5XG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5yZW1vdmVDYXB0aW9uRXZlbnRzSGFuZGxlcnMgPSBmdW5jdGlvbiAoJGVudHJ5KSB7XG4gICAgdmFyIGNhcHRpb25Nb3VzZUV2ZW50cyA9ICRlbnRyeS5kYXRhKCdqZy5jYXB0aW9uTW91c2VFdmVudHMnKTtcbiAgICBpZiAodHlwZW9mIGNhcHRpb25Nb3VzZUV2ZW50cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICRlbnRyeS5vZmYoJ21vdXNlZW50ZXInLCB1bmRlZmluZWQsIGNhcHRpb25Nb3VzZUV2ZW50cy5tb3VzZWVudGVyKTtcbiAgICAgICRlbnRyeS5vZmYoJ21vdXNlbGVhdmUnLCB1bmRlZmluZWQsIGNhcHRpb25Nb3VzZUV2ZW50cy5tb3VzZWxlYXZlKTtcbiAgICAgICRlbnRyeS5yZW1vdmVEYXRhKCdqZy5jYXB0aW9uTW91c2VFdmVudHMnKTtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogQ2xlYXIgdGhlIGJ1aWxkaW5nIHJvdyBkYXRhIHRvIGJlIHVzZWQgZm9yIGEgbmV3IHJvd1xuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuY2xlYXJCdWlsZGluZ1JvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmID0gW107XG4gICAgdGhpcy5idWlsZGluZ1Jvdy5hc3BlY3RSYXRpbyA9IDA7XG4gICAgdGhpcy5idWlsZGluZ1Jvdy53aWR0aCA9IDA7XG4gIH07XG4gIFxuICAvKipcbiAgICogSnVzdGlmeSB0aGUgYnVpbGRpbmcgcm93LCBwcmVwYXJpbmcgaXQgdG9cbiAgICpcbiAgICogQHBhcmFtIGlzTGFzdFJvd1xuICAgKiBAcmV0dXJucyBhIGJvb2xlYW4gdG8ga25vdyBpZiB0aGUgcm93IGhhcyBiZWVuIGp1c3RpZmllZCBvciBub3RcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnByZXBhcmVCdWlsZGluZ1JvdyA9IGZ1bmN0aW9uIChpc0xhc3RSb3cpIHtcbiAgICB2YXIgaSwgJGVudHJ5LCBpbWdBc3BlY3RSYXRpbywgbmV3SW1nVywgbmV3SW1nSCwganVzdGlmeSA9IHRydWU7XG4gICAgdmFyIG1pbkhlaWdodCA9IDA7XG4gICAgdmFyIGF2YWlsYWJsZVdpZHRoID0gdGhpcy5nYWxsZXJ5V2lkdGggLSAyICogdGhpcy5ib3JkZXIgLSAoXG4gICAgICAgICh0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmLmxlbmd0aCAtIDEpICogdGhpcy5zZXR0aW5ncy5tYXJnaW5zKTtcbiAgICB2YXIgcm93SGVpZ2h0ID0gYXZhaWxhYmxlV2lkdGggLyB0aGlzLmJ1aWxkaW5nUm93LmFzcGVjdFJhdGlvO1xuICAgIHZhciBkZWZhdWx0Um93SGVpZ2h0ID0gdGhpcy5zZXR0aW5ncy5yb3dIZWlnaHQ7XG4gICAgdmFyIGp1c3RpZmlhYmxlID0gdGhpcy5idWlsZGluZ1Jvdy53aWR0aCAvIGF2YWlsYWJsZVdpZHRoID4gdGhpcy5zZXR0aW5ncy5qdXN0aWZ5VGhyZXNob2xkO1xuICBcbiAgICAvL1NraXAgdGhlIGxhc3Qgcm93IGlmIHdlIGNhbid0IGp1c3RpZnkgaXQgYW5kIHRoZSBsYXN0Um93ID09ICdoaWRlJ1xuICAgIGlmIChpc0xhc3RSb3cgJiYgdGhpcy5zZXR0aW5ncy5sYXN0Um93ID09PSAnaGlkZScgJiYgIWp1c3RpZmlhYmxlKSB7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5idWlsZGluZ1Jvdy5lbnRyaWVzQnVmZi5sZW5ndGg7IGkrKykge1xuICAgICAgICAkZW50cnkgPSB0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmW2ldO1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jc3NBbmltYXRpb24pXG4gICAgICAgICAgJGVudHJ5LnJlbW92ZUNsYXNzKCdlbnRyeS12aXNpYmxlJyk7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICRlbnRyeS5zdG9wKCkuZmFkZVRvKDAsIDAuMSk7XG4gICAgICAgICAgJGVudHJ5LmZpbmQoJz4gaW1nLCA+IGEgPiBpbWcnKS5mYWRlVG8oMCwgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIFxuICAgIC8vIFdpdGggbGFzdFJvdyA9IG5vanVzdGlmeSwganVzdGlmeSBpZiBpcyBqdXN0aWZpY2FibGUgKHRoZSBpbWFnZXMgd2lsbCBub3QgYmVjb21lIHRvbyBiaWcpXG4gICAgaWYgKGlzTGFzdFJvdyAmJiAhanVzdGlmaWFibGUgJiYgdGhpcy5zZXR0aW5ncy5sYXN0Um93ICE9PSAnanVzdGlmeScgJiYgdGhpcy5zZXR0aW5ncy5sYXN0Um93ICE9PSAnaGlkZScpIHtcbiAgICAgIGp1c3RpZnkgPSBmYWxzZTtcbiAgXG4gICAgICBpZiAodGhpcy5yb3dzID4gMCkge1xuICAgICAgICBkZWZhdWx0Um93SGVpZ2h0ID0gKHRoaXMub2ZmWSAtIHRoaXMuYm9yZGVyIC0gdGhpcy5zZXR0aW5ncy5tYXJnaW5zICogdGhpcy5yb3dzKSAvIHRoaXMucm93cztcbiAgICAgICAganVzdGlmeSA9IGRlZmF1bHRSb3dIZWlnaHQgKiB0aGlzLmJ1aWxkaW5nUm93LmFzcGVjdFJhdGlvIC8gYXZhaWxhYmxlV2lkdGggPiB0aGlzLnNldHRpbmdzLmp1c3RpZnlUaHJlc2hvbGQ7XG4gICAgICB9XG4gICAgfVxuICBcbiAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5idWlsZGluZ1Jvdy5lbnRyaWVzQnVmZi5sZW5ndGg7IGkrKykge1xuICAgICAgJGVudHJ5ID0gdGhpcy5idWlsZGluZ1Jvdy5lbnRyaWVzQnVmZltpXTtcbiAgICAgIGltZ0FzcGVjdFJhdGlvID0gJGVudHJ5LmRhdGEoJ2pnLndpZHRoJykgLyAkZW50cnkuZGF0YSgnamcuaGVpZ2h0Jyk7XG4gIFxuICAgICAgaWYgKGp1c3RpZnkpIHtcbiAgICAgICAgbmV3SW1nVyA9IChpID09PSB0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmLmxlbmd0aCAtIDEpID8gYXZhaWxhYmxlV2lkdGggOiByb3dIZWlnaHQgKiBpbWdBc3BlY3RSYXRpbztcbiAgICAgICAgbmV3SW1nSCA9IHJvd0hlaWdodDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0ltZ1cgPSBkZWZhdWx0Um93SGVpZ2h0ICogaW1nQXNwZWN0UmF0aW87XG4gICAgICAgIG5ld0ltZ0ggPSBkZWZhdWx0Um93SGVpZ2h0O1xuICAgICAgfVxuICBcbiAgICAgIGF2YWlsYWJsZVdpZHRoIC09IE1hdGgucm91bmQobmV3SW1nVyk7XG4gICAgICAkZW50cnkuZGF0YSgnamcuandpZHRoJywgTWF0aC5yb3VuZChuZXdJbWdXKSk7XG4gICAgICAkZW50cnkuZGF0YSgnamcuamhlaWdodCcsIE1hdGguY2VpbChuZXdJbWdIKSk7XG4gICAgICBpZiAoaSA9PT0gMCB8fCBtaW5IZWlnaHQgPiBuZXdJbWdIKSBtaW5IZWlnaHQgPSBuZXdJbWdIO1xuICAgIH1cbiAgXG4gICAgdGhpcy5idWlsZGluZ1Jvdy5oZWlnaHQgPSBtaW5IZWlnaHQ7XG4gICAgcmV0dXJuIGp1c3RpZnk7XG4gIH07XG4gIFxuICAvKipcbiAgICogRmx1c2ggYSByb3c6IGp1c3RpZnkgaXQsIG1vZGlmeSB0aGUgZ2FsbGVyeSBoZWlnaHQgYWNjb3JkaW5nbHkgdG8gdGhlIHJvdyBoZWlnaHRcbiAgICpcbiAgICogQHBhcmFtIGlzTGFzdFJvd1xuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuZmx1c2hSb3cgPSBmdW5jdGlvbiAoaXNMYXN0Um93KSB7XG4gICAgdmFyIHNldHRpbmdzID0gdGhpcy5zZXR0aW5ncztcbiAgICB2YXIgJGVudHJ5LCBidWlsZGluZ1Jvd1Jlcywgb2ZmWCA9IHRoaXMuYm9yZGVyLCBpO1xuICBcbiAgICBidWlsZGluZ1Jvd1JlcyA9IHRoaXMucHJlcGFyZUJ1aWxkaW5nUm93KGlzTGFzdFJvdyk7XG4gICAgaWYgKGlzTGFzdFJvdyAmJiBzZXR0aW5ncy5sYXN0Um93ID09PSAnaGlkZScgJiYgYnVpbGRpbmdSb3dSZXMgPT09IC0xKSB7XG4gICAgICB0aGlzLmNsZWFyQnVpbGRpbmdSb3coKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIFxuICAgIGlmKHRoaXMubWF4Um93SGVpZ2h0KSB7XG4gICAgICBpZih0aGlzLm1heFJvd0hlaWdodCA8IHRoaXMuYnVpbGRpbmdSb3cuaGVpZ2h0KSAgdGhpcy5idWlsZGluZ1Jvdy5oZWlnaHQgPSB0aGlzLm1heFJvd0hlaWdodDtcbiAgICB9XG4gIFxuICAgIC8vQWxpZ24gbGFzdCAodW5qdXN0aWZpZWQpIHJvd1xuICAgIGlmIChpc0xhc3RSb3cgJiYgKHNldHRpbmdzLmxhc3RSb3cgPT09ICdjZW50ZXInIHx8IHNldHRpbmdzLmxhc3RSb3cgPT09ICdyaWdodCcpKSB7XG4gICAgICB2YXIgYXZhaWxhYmxlV2lkdGggPSB0aGlzLmdhbGxlcnlXaWR0aCAtIDIgKiB0aGlzLmJvcmRlciAtICh0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmLmxlbmd0aCAtIDEpICogc2V0dGluZ3MubWFyZ2lucztcbiAgXG4gICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5idWlsZGluZ1Jvdy5lbnRyaWVzQnVmZi5sZW5ndGg7IGkrKykge1xuICAgICAgICAkZW50cnkgPSB0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmW2ldO1xuICAgICAgICBhdmFpbGFibGVXaWR0aCAtPSAkZW50cnkuZGF0YSgnamcuandpZHRoJyk7XG4gICAgICB9XG4gIFxuICAgICAgaWYgKHNldHRpbmdzLmxhc3RSb3cgPT09ICdjZW50ZXInKVxuICAgICAgICBvZmZYICs9IGF2YWlsYWJsZVdpZHRoIC8gMjtcbiAgICAgIGVsc2UgaWYgKHNldHRpbmdzLmxhc3RSb3cgPT09ICdyaWdodCcpXG4gICAgICAgIG9mZlggKz0gYXZhaWxhYmxlV2lkdGg7XG4gICAgfVxuICBcbiAgICB2YXIgbGFzdEVudHJ5SWR4ID0gdGhpcy5idWlsZGluZ1Jvdy5lbnRyaWVzQnVmZi5sZW5ndGggLSAxO1xuICAgIGZvciAoaSA9IDA7IGkgPD0gbGFzdEVudHJ5SWR4OyBpKyspIHtcbiAgICAgICRlbnRyeSA9IHRoaXMuYnVpbGRpbmdSb3cuZW50cmllc0J1ZmZbIHRoaXMuc2V0dGluZ3MucnRsID8gbGFzdEVudHJ5SWR4IC0gaSA6IGkgXTtcbiAgICAgIHRoaXMuZGlzcGxheUVudHJ5KCRlbnRyeSwgb2ZmWCwgdGhpcy5vZmZZLCAkZW50cnkuZGF0YSgnamcuandpZHRoJyksICRlbnRyeS5kYXRhKCdqZy5qaGVpZ2h0JyksIHRoaXMuYnVpbGRpbmdSb3cuaGVpZ2h0KTtcbiAgICAgIG9mZlggKz0gJGVudHJ5LmRhdGEoJ2pnLmp3aWR0aCcpICsgc2V0dGluZ3MubWFyZ2lucztcbiAgICB9XG4gIFxuICAgIC8vR2FsbGVyeSBIZWlnaHRcbiAgICB0aGlzLmdhbGxlcnlIZWlnaHRUb1NldCA9IHRoaXMub2ZmWSArIHRoaXMuYnVpbGRpbmdSb3cuaGVpZ2h0ICsgdGhpcy5ib3JkZXI7XG4gICAgdGhpcy5zZXRHYWxsZXJ5VGVtcEhlaWdodCh0aGlzLmdhbGxlcnlIZWlnaHRUb1NldCArIHRoaXMuZ2V0U3Bpbm5lckhlaWdodCgpKTtcbiAgXG4gICAgaWYgKCFpc0xhc3RSb3cgfHwgKHRoaXMuYnVpbGRpbmdSb3cuaGVpZ2h0IDw9IHNldHRpbmdzLnJvd0hlaWdodCAmJiBidWlsZGluZ1Jvd1JlcykpIHtcbiAgICAgIC8vUmVhZHkgZm9yIGEgbmV3IHJvd1xuICAgICAgdGhpcy5vZmZZICs9IHRoaXMuYnVpbGRpbmdSb3cuaGVpZ2h0ICsgc2V0dGluZ3MubWFyZ2lucztcbiAgICAgIHRoaXMucm93cyArPSAxO1xuICAgICAgdGhpcy5jbGVhckJ1aWxkaW5nUm93KCk7XG4gICAgICB0aGlzLnNldHRpbmdzLnRyaWdnZXJFdmVudC5jYWxsKHRoaXMsICdqZy5yb3dmbHVzaCcpO1xuICAgIH1cbiAgfTtcbiAgXG4gIFxuICAvLyBTY3JvbGwgcG9zaXRpb24gbm90IHJlc3RvcmluZzogaHR0cHM6Ly9naXRodWIuY29tL21pcm9tYW5uaW5vL0p1c3RpZmllZC1HYWxsZXJ5L2lzc3Vlcy8yMjFcbiAgdmFyIGdhbGxlcnlQcmV2U3RhdGljSGVpZ2h0ID0gMDtcbiAgXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnJlbWVtYmVyR2FsbGVyeUhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICBnYWxsZXJ5UHJldlN0YXRpY0hlaWdodCA9IHRoaXMuJGdhbGxlcnkuaGVpZ2h0KCk7XG4gICAgdGhpcy4kZ2FsbGVyeS5oZWlnaHQoZ2FsbGVyeVByZXZTdGF0aWNIZWlnaHQpO1xuICB9O1xuICBcbiAgLy8gZ3JvdyBvbmx5XG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnNldEdhbGxlcnlUZW1wSGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICAgIGdhbGxlcnlQcmV2U3RhdGljSGVpZ2h0ID0gTWF0aC5tYXgoaGVpZ2h0LCBnYWxsZXJ5UHJldlN0YXRpY0hlaWdodCk7XG4gICAgdGhpcy4kZ2FsbGVyeS5oZWlnaHQoZ2FsbGVyeVByZXZTdGF0aWNIZWlnaHQpO1xuICB9O1xuICBcbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuc2V0R2FsbGVyeUZpbmFsSGVpZ2h0ID0gZnVuY3Rpb24gKGhlaWdodCkge1xuICAgIGdhbGxlcnlQcmV2U3RhdGljSGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuJGdhbGxlcnkuaGVpZ2h0KGhlaWdodCk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQHJldHVybnMge2Jvb2xlYW59IGEgYm9vbGVhbiBzYXlpbmcgaWYgdGhlIHNjcm9sbGJhciBpcyBhY3RpdmUgb3Igbm90XG4gICAqL1xuICBmdW5jdGlvbiBoYXNTY3JvbGxCYXIoKSB7XG4gICAgcmV0dXJuICQoXCJib2R5XCIpLmhlaWdodCgpID4gJCh3aW5kb3cpLmhlaWdodCgpO1xuICB9XG4gIFxuICAvKipcbiAgICogQ2hlY2tzIHRoZSB3aWR0aCBvZiB0aGUgZ2FsbGVyeSBjb250YWluZXIsIHRvIGtub3cgaWYgYSBuZXcganVzdGlmaWNhdGlvbiBpcyBuZWVkZWRcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmNoZWNrV2lkdGggPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jaGVja1dpZHRoSW50ZXJ2YWxJZCA9IHNldEludGVydmFsKCQucHJveHkoZnVuY3Rpb24gKCkge1xuICBcbiAgICAgIC8vIGlmIHRoZSBnYWxsZXJ5IGlzIG5vdCBjdXJyZW50bHkgdmlzaWJsZSwgYWJvcnQuXG4gICAgICBpZiAoIXRoaXMuJGdhbGxlcnkuaXMoXCI6dmlzaWJsZVwiKSkgcmV0dXJuO1xuICBcbiAgICAgIHZhciBnYWxsZXJ5V2lkdGggPSBwYXJzZUZsb2F0KHRoaXMuJGdhbGxlcnkud2lkdGgoKSk7XG4gICAgICBpZiAoaGFzU2Nyb2xsQmFyKCkgPT09IHRoaXMuc2Nyb2xsQmFyT24pIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKGdhbGxlcnlXaWR0aCAtIHRoaXMuZ2FsbGVyeVdpZHRoKSA+IHRoaXMuc2V0dGluZ3MucmVmcmVzaFNlbnNpdGl2aXR5KSB7XG4gICAgICAgICAgdGhpcy5nYWxsZXJ5V2lkdGggPSBnYWxsZXJ5V2lkdGg7XG4gICAgICAgICAgdGhpcy5yZXdpbmQoKTtcbiAgXG4gICAgICAgICAgdGhpcy5yZW1lbWJlckdhbGxlcnlIZWlnaHQoKTtcbiAgXG4gICAgICAgICAgLy8gUmVzdGFydCB0byBhbmFseXplXG4gICAgICAgICAgdGhpcy5zdGFydEltZ0FuYWx5emVyKHRydWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNjcm9sbEJhck9uID0gaGFzU2Nyb2xsQmFyKCk7XG4gICAgICAgIHRoaXMuZ2FsbGVyeVdpZHRoID0gZ2FsbGVyeVdpZHRoO1xuICAgICAgfVxuICAgIH0sIHRoaXMpLCB0aGlzLnNldHRpbmdzLnJlZnJlc2hUaW1lKTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gYSBib29sZWFuIHNheWluZyBpZiB0aGUgc3Bpbm5lciBpcyBhY3RpdmUgb3Igbm90XG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5pc1NwaW5uZXJBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Bpbm5lci5pbnRlcnZhbElkICE9PSBudWxsO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEByZXR1cm5zIHtpbnR9IHRoZSBzcGlubmVyIGhlaWdodFxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuZ2V0U3Bpbm5lckhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGlubmVyLiRlbC5pbm5lckhlaWdodCgpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFN0b3BzIHRoZSBzcGlubmVyIGFuaW1hdGlvbiBhbmQgbW9kaWZ5IHRoZSBnYWxsZXJ5IGhlaWdodCB0byBleGNsdWRlIHRoZSBzcGlubmVyXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5zdG9wTG9hZGluZ1NwaW5uZXJBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXIuaW50ZXJ2YWxJZCk7XG4gICAgdGhpcy5zcGlubmVyLmludGVydmFsSWQgPSBudWxsO1xuICAgIHRoaXMuc2V0R2FsbGVyeVRlbXBIZWlnaHQodGhpcy4kZ2FsbGVyeS5oZWlnaHQoKSAtIHRoaXMuZ2V0U3Bpbm5lckhlaWdodCgpKTtcbiAgICB0aGlzLnNwaW5uZXIuJGVsLmRldGFjaCgpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFN0YXJ0cyB0aGUgc3Bpbm5lciBhbmltYXRpb25cbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnN0YXJ0TG9hZGluZ1NwaW5uZXJBbmltYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNwaW5uZXJDb250ZXh0ID0gdGhpcy5zcGlubmVyO1xuICAgIHZhciAkc3Bpbm5lclBvaW50cyA9IHNwaW5uZXJDb250ZXh0LiRlbC5maW5kKCdzcGFuJyk7XG4gICAgY2xlYXJJbnRlcnZhbChzcGlubmVyQ29udGV4dC5pbnRlcnZhbElkKTtcbiAgICB0aGlzLiRnYWxsZXJ5LmFwcGVuZChzcGlubmVyQ29udGV4dC4kZWwpO1xuICAgIHRoaXMuc2V0R2FsbGVyeVRlbXBIZWlnaHQodGhpcy5vZmZZICsgdGhpcy5idWlsZGluZ1Jvdy5oZWlnaHQgKyB0aGlzLmdldFNwaW5uZXJIZWlnaHQoKSk7XG4gICAgc3Bpbm5lckNvbnRleHQuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzcGlubmVyQ29udGV4dC5waGFzZSA8ICRzcGlubmVyUG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAkc3Bpbm5lclBvaW50cy5lcShzcGlubmVyQ29udGV4dC5waGFzZSkuZmFkZVRvKHNwaW5uZXJDb250ZXh0LnRpbWVTbG90LCAxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRzcGlubmVyUG9pbnRzLmVxKHNwaW5uZXJDb250ZXh0LnBoYXNlIC0gJHNwaW5uZXJQb2ludHMubGVuZ3RoKS5mYWRlVG8oc3Bpbm5lckNvbnRleHQudGltZVNsb3QsIDApO1xuICAgICAgfVxuICAgICAgc3Bpbm5lckNvbnRleHQucGhhc2UgPSAoc3Bpbm5lckNvbnRleHQucGhhc2UgKyAxKSAlICgkc3Bpbm5lclBvaW50cy5sZW5ndGggKiAyKTtcbiAgICB9LCBzcGlubmVyQ29udGV4dC50aW1lU2xvdCk7XG4gIH07XG4gIFxuICAvKipcbiAgICogUmV3aW5kIHRoZSBpbWFnZSBhbmFseXNpcyB0byBzdGFydCBmcm9tIHRoZSBmaXJzdCBlbnRyeS5cbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnJld2luZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmxhc3RGZXRjaGVkRW50cnkgPSBudWxsO1xuICAgIHRoaXMubGFzdEFuYWx5emVkSW5kZXggPSAtMTtcbiAgICB0aGlzLm9mZlkgPSB0aGlzLmJvcmRlcjtcbiAgICB0aGlzLnJvd3MgPSAwO1xuICAgIHRoaXMuY2xlYXJCdWlsZGluZ1JvdygpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgZW50cmllcyBzZWFyY2hpbmcgaXQgZnJvbSB0aGUganVzdGlmaWVkIGdhbGxlcnkgSFRNTCBlbGVtZW50XG4gICAqXG4gICAqIEBwYXJhbSBub3Jld2luZCBpZiBub3Jld2luZCBvbmx5IHRoZSBuZXcgZW50cmllcyB3aWxsIGJlIGNoYW5nZWQgKGkuZS4gcmFuZG9taXplZCwgc29ydGVkIG9yIGZpbHRlcmVkKVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gdHJ1ZSBpZiBzb21lIGVudHJpZXMgaGFzIGJlZW4gZm91bmRlZFxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUudXBkYXRlRW50cmllcyA9IGZ1bmN0aW9uIChub3Jld2luZCkge1xuICAgIHZhciBuZXdFbnRyaWVzO1xuICBcbiAgICBpZiAobm9yZXdpbmQgJiYgdGhpcy5sYXN0RmV0Y2hlZEVudHJ5ICE9IG51bGwpIHtcbiAgICAgIG5ld0VudHJpZXMgPSAkKHRoaXMubGFzdEZldGNoZWRFbnRyeSkubmV4dEFsbCh0aGlzLnNldHRpbmdzLnNlbGVjdG9yKS50b0FycmF5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW50cmllcyA9IFtdO1xuICAgICAgbmV3RW50cmllcyA9IHRoaXMuJGdhbGxlcnkuY2hpbGRyZW4odGhpcy5zZXR0aW5ncy5zZWxlY3RvcikudG9BcnJheSgpO1xuICAgIH1cbiAgXG4gICAgaWYgKG5ld0VudHJpZXMubGVuZ3RoID4gMCkge1xuICBcbiAgICAgIC8vIFNvcnQgb3IgcmFuZG9taXplXG4gICAgICBpZiAoJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3Muc29ydCkpIHtcbiAgICAgICAgbmV3RW50cmllcyA9IHRoaXMuc29ydEFycmF5KG5ld0VudHJpZXMpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnJhbmRvbWl6ZSkge1xuICAgICAgICBuZXdFbnRyaWVzID0gdGhpcy5zaHVmZmxlQXJyYXkobmV3RW50cmllcyk7XG4gICAgICB9XG4gICAgICB0aGlzLmxhc3RGZXRjaGVkRW50cnkgPSBuZXdFbnRyaWVzW25ld0VudHJpZXMubGVuZ3RoIC0gMV07XG4gIFxuICAgICAgLy8gRmlsdGVyXG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5maWx0ZXIpIHtcbiAgICAgICAgbmV3RW50cmllcyA9IHRoaXMuZmlsdGVyQXJyYXkobmV3RW50cmllcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlc2V0RmlsdGVycyhuZXdFbnRyaWVzKTtcbiAgICAgIH1cbiAgXG4gICAgfVxuICBcbiAgICB0aGlzLmVudHJpZXMgPSB0aGlzLmVudHJpZXMuY29uY2F0KG5ld0VudHJpZXMpO1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEFwcGx5IHRoZSBlbnRyaWVzIG9yZGVyIHRvIHRoZSBET00sIGl0ZXJhdGluZyB0aGUgZW50cmllcyBhbmQgYXBwZW5kaW5nIHRoZSBpbWFnZXNcbiAgICpcbiAgICogQHBhcmFtIGVudHJpZXMgdGhlIGVudHJpZXMgdGhhdCBoYXMgYmVlbiBtb2RpZmllZCBhbmQgdGhhdCBtdXN0IGJlIHJlLW9yZGVyZWQgaW4gdGhlIERPTVxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuaW5zZXJ0VG9HYWxsZXJ5ID0gZnVuY3Rpb24gKGVudHJpZXMpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgJC5lYWNoKGVudHJpZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICQodGhpcykuYXBwZW5kVG8odGhhdC4kZ2FsbGVyeSk7XG4gICAgfSk7XG4gIH07XG4gIFxuICAvKipcbiAgICogU2h1ZmZsZSB0aGUgYXJyYXkgdXNpbmcgdGhlIEZpc2hlci1ZYXRlcyBzaHVmZmxlIGFsZ29yaXRobVxuICAgKlxuICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gc2h1ZmZsZVxuICAgKiBAcmV0dXJuIHRoZSBzaHVmZmxlZCBhcnJheVxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuc2h1ZmZsZUFycmF5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgaSwgaiwgdGVtcDtcbiAgICBmb3IgKGkgPSBhLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICAgIGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICAgIHRlbXAgPSBhW2ldO1xuICAgICAgYVtpXSA9IGFbal07XG4gICAgICBhW2pdID0gdGVtcDtcbiAgICB9XG4gICAgdGhpcy5pbnNlcnRUb0dhbGxlcnkoYSk7XG4gICAgcmV0dXJuIGE7XG4gIH07XG4gIFxuICAvKipcbiAgICogU29ydCB0aGUgYXJyYXkgdXNpbmcgc2V0dGluZ3MuY29tcGFyYXRvciBhcyBjb21wYXJhdG9yXG4gICAqXG4gICAqIEBwYXJhbSBhIHRoZSBhcnJheSB0byBzb3J0IChpdCBpcyBzb3J0ZWQpXG4gICAqIEByZXR1cm4gdGhlIHNvcnRlZCBhcnJheVxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuc29ydEFycmF5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICBhLnNvcnQodGhpcy5zZXR0aW5ncy5zb3J0KTtcbiAgICB0aGlzLmluc2VydFRvR2FsbGVyeShhKTtcbiAgICByZXR1cm4gYTtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgZmlsdGVycyByZW1vdmluZyB0aGUgJ2pnLWZpbHRlcmVkJyBjbGFzcyBmcm9tIGFsbCB0aGUgZW50cmllc1xuICAgKlxuICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gcmVzZXRcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnJlc2V0RmlsdGVycyA9IGZ1bmN0aW9uIChhKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSAkKGFbaV0pLnJlbW92ZUNsYXNzKCdqZy1maWx0ZXJlZCcpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEZpbHRlciB0aGUgZW50cmllcyBjb25zaWRlcmluZyB0aGVpcnMgY2xhc3NlcyAoaWYgYSBzdHJpbmcgaGFzIGJlZW4gcGFzc2VkKSBvciB1c2luZyBhIGZ1bmN0aW9uIGZvciBmaWx0ZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSBhIHRoZSBhcnJheSB0byBmaWx0ZXJcbiAgICogQHJldHVybiB0aGUgZmlsdGVyZWQgYXJyYXlcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmZpbHRlckFycmF5ID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzO1xuICAgIGlmICgkLnR5cGUoc2V0dGluZ3MuZmlsdGVyKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEZpbHRlciBvbmx5IGtlZXBpbmcgdGhlIGVudHJpZXMgcGFzc2VkIGluIHRoZSBzdHJpbmdcbiAgICAgIHJldHVybiBhLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgdmFyICRlbCA9ICQoZWwpO1xuICAgICAgICBpZiAoJGVsLmlzKHNldHRpbmdzLmZpbHRlcikpIHtcbiAgICAgICAgICAkZWwucmVtb3ZlQ2xhc3MoJ2pnLWZpbHRlcmVkJyk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGVsLmFkZENsYXNzKCdqZy1maWx0ZXJlZCcpLnJlbW92ZUNsYXNzKCdqZy12aXNpYmxlJyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKCQuaXNGdW5jdGlvbihzZXR0aW5ncy5maWx0ZXIpKSB7XG4gICAgICAvLyBGaWx0ZXIgdXNpbmcgdGhlIHBhc3NlZCBmdW5jdGlvblxuICAgICAgdmFyIGZpbHRlcmVkQXJyID0gYS5maWx0ZXIoc2V0dGluZ3MuZmlsdGVyKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZmlsdGVyZWRBcnIuaW5kZXhPZihhW2ldKSA9PT0gLTEpIHtcbiAgICAgICAgICAkKGFbaV0pLmFkZENsYXNzKCdqZy1maWx0ZXJlZCcpLnJlbW92ZUNsYXNzKCdqZy12aXNpYmxlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJChhW2ldKS5yZW1vdmVDbGFzcygnamctZmlsdGVyZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZpbHRlcmVkQXJyO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBEZXN0cm95IHRoZSBKdXN0aWZpZWQgR2FsbGVyeSBpbnN0YW5jZS5cbiAgICpcbiAgICogSXQgY2xlYXJzIGFsbCB0aGUgY3NzIHByb3BlcnRpZXMgYWRkZWQgaW4gdGhlIHN0eWxlIGF0dHJpYnV0ZXMuIFdlIGRvZXNuJ3QgYmFja3VwIHRoZSBvcmlnaW5hbFxuICAgKiB2YWx1ZXMgZm9yIHRob3NlIGNzcyBhdHRyaWJ1dGVzLCBiZWNhdXNlIGl0IGNvc3RzIChwZXJmb3JtYW5jZSkgYW5kIGJlY2F1c2UgaW4gZ2VuZXJhbCBvbmVcbiAgICogc2hvdWxkbid0IHVzZSB0aGUgc3R5bGUgYXR0cmlidXRlIGZvciBhbiB1bmlmb3JtIHNldCBvZiBpbWFnZXMgKHdoZXJlIHdlIHN1cHBvc2UgdGhlIHVzZSBvZlxuICAgKiBjbGFzc2VzKS4gQ3JlYXRpbmcgYSBiYWNrdXAgaXMgYWxzbyBkaWZmaWN1bHQgYmVjYXVzZSBKRyBjb3VsZCBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgYW5kXG4gICAqIHdpdGggZGlmZmVyZW50IHN0eWxlIGF0dHJpYnV0ZXMuXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jaGVja1dpZHRoSW50ZXJ2YWxJZCk7XG4gIFxuICAgICQuZWFjaCh0aGlzLmVudHJpZXMsICQucHJveHkoZnVuY3Rpb24oXywgZW50cnkpIHtcbiAgICAgIHZhciAkZW50cnkgPSAkKGVudHJ5KTtcbiAgXG4gICAgICAvLyBSZXNldCBlbnRyeSBzdHlsZVxuICAgICAgJGVudHJ5LmNzcygnd2lkdGgnLCAnJyk7XG4gICAgICAkZW50cnkuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICAkZW50cnkuY3NzKCd0b3AnLCAnJyk7XG4gICAgICAkZW50cnkuY3NzKCdsZWZ0JywgJycpO1xuICAgICAgJGVudHJ5LmRhdGEoJ2pnLmxvYWRlZCcsIHVuZGVmaW5lZCk7XG4gICAgICAkZW50cnkucmVtb3ZlQ2xhc3MoJ2pnLWVudHJ5Jyk7XG4gIFxuICAgICAgLy8gUmVzZXQgaW1hZ2Ugc3R5bGVcbiAgICAgIHZhciAkaW1nID0gdGhpcy5pbWdGcm9tRW50cnkoJGVudHJ5KTtcbiAgICAgICRpbWcuY3NzKCd3aWR0aCcsICcnKTtcbiAgICAgICRpbWcuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgICAkaW1nLmNzcygnbWFyZ2luLWxlZnQnLCAnJyk7XG4gICAgICAkaW1nLmNzcygnbWFyZ2luLXRvcCcsICcnKTtcbiAgICAgICRpbWcuYXR0cignc3JjJywgJGltZy5kYXRhKCdqZy5vcmlnaW5hbFNyYycpKTtcbiAgICAgICRpbWcuZGF0YSgnamcub3JpZ2luYWxTcmMnLCB1bmRlZmluZWQpO1xuICBcbiAgICAgIC8vIFJlbW92ZSBjYXB0aW9uXG4gICAgICB0aGlzLnJlbW92ZUNhcHRpb25FdmVudHNIYW5kbGVycygkZW50cnkpO1xuICAgICAgdmFyICRjYXB0aW9uID0gdGhpcy5jYXB0aW9uRnJvbUVudHJ5KCRlbnRyeSk7XG4gICAgICBpZiAoJGVudHJ5LmRhdGEoJ2pnLmNyZWF0ZWRDYXB0aW9uJykpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGFsc28gdGhlIGNhcHRpb24gZWxlbWVudCAoaWYgY3JlYXRlZCBieSBqZylcbiAgICAgICAgJGVudHJ5LmRhdGEoJ2pnLmNyZWF0ZWRDYXB0aW9uJywgdW5kZWZpbmVkKTtcbiAgICAgICAgaWYgKCRjYXB0aW9uICE9PSBudWxsKSAkY2FwdGlvbi5yZW1vdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICgkY2FwdGlvbiAhPT0gbnVsbCkgJGNhcHRpb24uZmFkZVRvKDAsIDEpO1xuICAgICAgfVxuICBcbiAgICB9LCB0aGlzKSk7XG4gIFxuICAgIHRoaXMuJGdhbGxlcnkuY3NzKCdoZWlnaHQnLCAnJyk7XG4gICAgdGhpcy4kZ2FsbGVyeS5yZW1vdmVDbGFzcygnanVzdGlmaWVkLWdhbGxlcnknKTtcbiAgICB0aGlzLiRnYWxsZXJ5LmRhdGEoJ2pnLmNvbnRyb2xsZXInLCB1bmRlZmluZWQpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIEFuYWx5emUgdGhlIGltYWdlcyBhbmQgYnVpbGRzIHRoZSByb3dzLiBJdCByZXR1cm5zIGlmIGl0IGZvdW5kIGFuIGltYWdlIHRoYXQgaXMgbm90IGxvYWRlZC5cbiAgICpcbiAgICogQHBhcmFtIGlzRm9yUmVzaXplIGlmIHRoZSBpbWFnZSBhbmFseXplciBpcyBjYWxsZWQgZm9yIHJlc2l6aW5nIG9yIG5vdCwgdG8gY2FsbCBhIGRpZmZlcmVudCBjYWxsYmFjayBhdCB0aGUgZW5kXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5hbmFseXplSW1hZ2VzID0gZnVuY3Rpb24gKGlzRm9yUmVzaXplKSB7XG4gICAgZm9yICh2YXIgaSA9IHRoaXMubGFzdEFuYWx5emVkSW5kZXggKyAxOyBpIDwgdGhpcy5lbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgJGVudHJ5ID0gJCh0aGlzLmVudHJpZXNbaV0pO1xuICAgICAgaWYgKCRlbnRyeS5kYXRhKCdqZy5sb2FkZWQnKSA9PT0gdHJ1ZSB8fCAkZW50cnkuZGF0YSgnamcubG9hZGVkJykgPT09ICdza2lwcGVkJykge1xuICAgICAgICB2YXIgYXZhaWxhYmxlV2lkdGggPSB0aGlzLmdhbGxlcnlXaWR0aCAtIDIgKiB0aGlzLmJvcmRlciAtIChcbiAgICAgICAgICAgICh0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmLmxlbmd0aCAtIDEpICogdGhpcy5zZXR0aW5ncy5tYXJnaW5zKTtcbiAgICAgICAgdmFyIGltZ0FzcGVjdFJhdGlvID0gJGVudHJ5LmRhdGEoJ2pnLndpZHRoJykgLyAkZW50cnkuZGF0YSgnamcuaGVpZ2h0Jyk7XG4gICAgICAgIGlmIChhdmFpbGFibGVXaWR0aCAvICh0aGlzLmJ1aWxkaW5nUm93LmFzcGVjdFJhdGlvICsgaW1nQXNwZWN0UmF0aW8pIDwgdGhpcy5zZXR0aW5ncy5yb3dIZWlnaHQpIHtcbiAgICAgICAgICB0aGlzLmZsdXNoUm93KGZhbHNlKTtcbiAgXG4gICAgICAgICAgaWYoKyt0aGlzLnlpZWxkLmZsdXNoZWQgPj0gdGhpcy55aWVsZC5ldmVyeSkge1xuICAgICAgICAgICAgdGhpcy5zdGFydEltZ0FuYWx5emVyKGlzRm9yUmVzaXplKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgXG4gICAgICAgIHRoaXMuYnVpbGRpbmdSb3cuZW50cmllc0J1ZmYucHVzaCgkZW50cnkpO1xuICAgICAgICB0aGlzLmJ1aWxkaW5nUm93LmFzcGVjdFJhdGlvICs9IGltZ0FzcGVjdFJhdGlvO1xuICAgICAgICB0aGlzLmJ1aWxkaW5nUm93LndpZHRoICs9IGltZ0FzcGVjdFJhdGlvICogdGhpcy5zZXR0aW5ncy5yb3dIZWlnaHQ7XG4gICAgICAgIHRoaXMubGFzdEFuYWx5emVkSW5kZXggPSBpO1xuICBcbiAgICAgIH0gZWxzZSBpZiAoJGVudHJ5LmRhdGEoJ2pnLmxvYWRlZCcpICE9PSAnZXJyb3InKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIC8vIExhc3Qgcm93IGZsdXNoICh0aGUgcm93IGlzIG5vdCBmdWxsKVxuICAgIGlmICh0aGlzLmJ1aWxkaW5nUm93LmVudHJpZXNCdWZmLmxlbmd0aCA+IDApIHRoaXMuZmx1c2hSb3codHJ1ZSk7XG4gIFxuICAgIGlmICh0aGlzLmlzU3Bpbm5lckFjdGl2ZSgpKSB7XG4gICAgICB0aGlzLnN0b3BMb2FkaW5nU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cbiAgXG4gICAgLyogU3RvcCwgaWYgdGhlcmUgaXMsIHRoZSB0aW1lb3V0IHRvIHN0YXJ0IHRoZSBhbmFseXplSW1hZ2VzLlxuICAgICBUaGlzIGlzIGJlY2F1c2UgYW4gaW1hZ2UgY2FuIGJlIHNldCBsb2FkZWQsIGFuZCB0aGUgdGltZW91dCBjYW4gYmUgc2V0LFxuICAgICBidXQgdGhpcyBpbWFnZSBjYW4gYmUgYW5hbHl6ZWQgeWV0LlxuICAgICAqL1xuICAgIHRoaXMuc3RvcEltZ0FuYWx5emVyU3RhcnRlcigpO1xuICBcbiAgICAvL09uIGNvbXBsZXRlIGNhbGxiYWNrXG4gICAgdGhpcy5zZXR0aW5ncy50cmlnZ2VyRXZlbnQuY2FsbCh0aGlzLCBpc0ZvclJlc2l6ZSA/ICdqZy5yZXNpemUnIDogJ2pnLmNvbXBsZXRlJyk7XG4gICAgdGhpcy5zZXRHYWxsZXJ5RmluYWxIZWlnaHQodGhpcy5nYWxsZXJ5SGVpZ2h0VG9TZXQpO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFN0b3BzIGFueSBJbWdBbmFseXplciBzdGFydGVyICh0aGF0IGhhcyBhbiBhc3NpZ25lZCB0aW1lb3V0KVxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuc3RvcEltZ0FuYWx5emVyU3RhcnRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnlpZWxkLmZsdXNoZWQgPSAwO1xuICAgIGlmICh0aGlzLmltZ0FuYWx5emVyVGltZW91dCAhPT0gbnVsbCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaW1nQW5hbHl6ZXJUaW1lb3V0KTtcbiAgICAgIHRoaXMuaW1nQW5hbHl6ZXJUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIFxuICAvKipcbiAgICogU3RhcnRzIHRoZSBpbWFnZSBhbmFseXplci4gSXQgaXMgbm90IGltbWVkaWF0ZWx5IGNhbGxlZCB0byBsZXQgdGhlIGJyb3dzZXIgdG8gdXBkYXRlIHRoZSB2aWV3XG4gICAqXG4gICAqIEBwYXJhbSBpc0ZvclJlc2l6ZSBzcGVjaWZpZXMgaWYgdGhlIGltYWdlIGFuYWx5emVyIG11c3QgYmUgY2FsbGVkIGZvciByZXNpemluZyBvciBub3RcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnN0YXJ0SW1nQW5hbHl6ZXIgPSBmdW5jdGlvbiAoaXNGb3JSZXNpemUpIHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgdGhpcy5zdG9wSW1nQW5hbHl6ZXJTdGFydGVyKCk7XG4gICAgdGhpcy5pbWdBbmFseXplclRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoYXQuYW5hbHl6ZUltYWdlcyhpc0ZvclJlc2l6ZSk7XG4gICAgfSwgMC4wMDEpOyAvLyB3ZSBjYW4ndCBzdGFydCBpdCBpbW1lZGlhdGVseSBkdWUgdG8gYSBJRSBkaWZmZXJlbnQgYmVoYXZpb3VyXG4gIH07XG4gIFxuICAvKipcbiAgICogQ2hlY2tzIGlmIHRoZSBpbWFnZSBpcyBsb2FkZWQgb3Igbm90IHVzaW5nIGFub3RoZXIgaW1hZ2Ugb2JqZWN0LiBXZSBjYW5ub3QgdXNlIHRoZSAnY29tcGxldGUnIGltYWdlIHByb3BlcnR5LFxuICAgKiBiZWNhdXNlIHNvbWUgYnJvd3NlcnMsIHdpdGggYSA0MDQgc2V0IGNvbXBsZXRlID0gdHJ1ZS5cbiAgICpcbiAgICogQHBhcmFtIGltYWdlU3JjIHRoZSBpbWFnZSBzcmMgdG8gbG9hZFxuICAgKiBAcGFyYW0gb25Mb2FkIGNhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIGltYWdlIGhhcyBiZWVuIGxvYWRlZFxuICAgKiBAcGFyYW0gb25FcnJvciBjYWxsYmFjayB0aGF0IGlzIGNhbGxlZCBpbiBjYXNlIG9mIGFuIGVycm9yXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5vbkltYWdlRXZlbnQgPSBmdW5jdGlvbiAoaW1hZ2VTcmMsIG9uTG9hZCwgb25FcnJvcikge1xuICAgIGlmICghb25Mb2FkICYmICFvbkVycm9yKSByZXR1cm47XG4gIFxuICAgIHZhciBtZW1JbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHZhciAkbWVtSW1hZ2UgPSAkKG1lbUltYWdlKTtcbiAgICBpZiAob25Mb2FkKSB7XG4gICAgICAkbWVtSW1hZ2Uub25lKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAkbWVtSW1hZ2Uub2ZmKCdsb2FkIGVycm9yJyk7XG4gICAgICAgIG9uTG9hZChtZW1JbWFnZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG9uRXJyb3IpIHtcbiAgICAgICRtZW1JbWFnZS5vbmUoJ2Vycm9yJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRtZW1JbWFnZS5vZmYoJ2xvYWQgZXJyb3InKTtcbiAgICAgICAgb25FcnJvcihtZW1JbWFnZSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgbWVtSW1hZ2Uuc3JjID0gaW1hZ2VTcmM7XG4gIH07XG4gIFxuICAvKipcbiAgICogSW5pdCBvZiBKdXN0aWZpZWQgR2FsbGVyeSBjb250cm9sbGVkXG4gICAqIEl0IGFuYWx5emVzIGFsbCB0aGUgZW50cmllcyBzdGFydGluZyB0aGVpcnMgbG9hZGluZyBhbmQgY2FsbGluZyB0aGUgaW1hZ2UgYW5hbHl6ZXIgKHRoYXQgd29ya3Mgd2l0aCBsb2FkZWQgaW1hZ2VzKVxuICAgKi9cbiAgSnVzdGlmaWVkR2FsbGVyeS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW1hZ2VzVG9Mb2FkID0gZmFsc2UsIHNraXBwZWRJbWFnZXMgPSBmYWxzZSwgdGhhdCA9IHRoaXM7XG4gICAgJC5lYWNoKHRoaXMuZW50cmllcywgZnVuY3Rpb24gKGluZGV4LCBlbnRyeSkge1xuICAgICAgdmFyICRlbnRyeSA9ICQoZW50cnkpO1xuICAgICAgdmFyICRpbWFnZSA9IHRoYXQuaW1nRnJvbUVudHJ5KCRlbnRyeSk7XG4gIFxuICAgICAgJGVudHJ5LmFkZENsYXNzKCdqZy1lbnRyeScpO1xuICBcbiAgICAgIGlmICgkZW50cnkuZGF0YSgnamcubG9hZGVkJykgIT09IHRydWUgJiYgJGVudHJ5LmRhdGEoJ2pnLmxvYWRlZCcpICE9PSAnc2tpcHBlZCcpIHtcbiAgXG4gICAgICAgIC8vIExpbmsgUmVsIGdsb2JhbCBvdmVyd3JpdGVcbiAgICAgICAgaWYgKHRoYXQuc2V0dGluZ3MucmVsICE9PSBudWxsKSAkZW50cnkuYXR0cigncmVsJywgdGhhdC5zZXR0aW5ncy5yZWwpO1xuICBcbiAgICAgICAgLy8gTGluayBUYXJnZXQgZ2xvYmFsIG92ZXJ3cml0ZVxuICAgICAgICBpZiAodGhhdC5zZXR0aW5ncy50YXJnZXQgIT09IG51bGwpICRlbnRyeS5hdHRyKCd0YXJnZXQnLCB0aGF0LnNldHRpbmdzLnRhcmdldCk7XG4gIFxuICAgICAgICBpZiAoJGltYWdlICE9PSBudWxsKSB7XG4gIFxuICAgICAgICAgIC8vIEltYWdlIHNyY1xuICAgICAgICAgIHZhciBpbWFnZVNyYyA9IHRoYXQuZXh0cmFjdEltZ1NyY0Zyb21JbWFnZSgkaW1hZ2UpO1xuICAgICAgICAgICRpbWFnZS5hdHRyKCdzcmMnLCBpbWFnZVNyYyk7XG4gIFxuICAgICAgICAgIC8qIElmIHdlIGhhdmUgdGhlIGhlaWdodCBhbmQgdGhlIHdpZHRoLCB3ZSBkb24ndCB3YWl0IHRoYXQgdGhlIGltYWdlIGlzIGxvYWRlZCwgYnV0IHdlIHN0YXJ0IGRpcmVjdGx5XG4gICAgICAgICAgICogd2l0aCB0aGUganVzdGlmaWNhdGlvbiAqL1xuICAgICAgICAgIGlmICh0aGF0LnNldHRpbmdzLndhaXRUaHVtYm5haWxzTG9hZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlRmxvYXQoJGltYWdlLnByb3AoJ3dpZHRoJykpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHBhcnNlRmxvYXQoJGltYWdlLnByb3AoJ2hlaWdodCcpKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4od2lkdGgpICYmICFpc05hTihoZWlnaHQpKSB7XG4gICAgICAgICAgICAgICRlbnRyeS5kYXRhKCdqZy53aWR0aCcsIHdpZHRoKTtcbiAgICAgICAgICAgICAgJGVudHJ5LmRhdGEoJ2pnLmhlaWdodCcsIGhlaWdodCk7XG4gICAgICAgICAgICAgICRlbnRyeS5kYXRhKCdqZy5sb2FkZWQnLCAnc2tpcHBlZCcpO1xuICAgICAgICAgICAgICBza2lwcGVkSW1hZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdGhhdC5zdGFydEltZ0FuYWx5emVyKGZhbHNlKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICBcbiAgICAgICAgICAkZW50cnkuZGF0YSgnamcubG9hZGVkJywgZmFsc2UpO1xuICAgICAgICAgIGltYWdlc1RvTG9hZCA9IHRydWU7XG4gIFxuICAgICAgICAgIC8vIFNwaW5uZXIgc3RhcnRcbiAgICAgICAgICBpZiAoIXRoYXQuaXNTcGlubmVyQWN0aXZlKCkpIHRoYXQuc3RhcnRMb2FkaW5nU3Bpbm5lckFuaW1hdGlvbigpO1xuICBcbiAgICAgICAgICB0aGF0Lm9uSW1hZ2VFdmVudChpbWFnZVNyYywgZnVuY3Rpb24gKGxvYWRJbWcpIHsgLy8gaW1hZ2UgbG9hZGVkXG4gICAgICAgICAgICAkZW50cnkuZGF0YSgnamcud2lkdGgnLCBsb2FkSW1nLndpZHRoKTtcbiAgICAgICAgICAgICRlbnRyeS5kYXRhKCdqZy5oZWlnaHQnLCBsb2FkSW1nLmhlaWdodCk7XG4gICAgICAgICAgICAkZW50cnkuZGF0YSgnamcubG9hZGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICB0aGF0LnN0YXJ0SW1nQW5hbHl6ZXIoZmFsc2UpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHsgLy8gaW1hZ2UgbG9hZCBlcnJvclxuICAgICAgICAgICAgJGVudHJ5LmRhdGEoJ2pnLmxvYWRlZCcsICdlcnJvcicpO1xuICAgICAgICAgICAgdGhhdC5zdGFydEltZ0FuYWx5emVyKGZhbHNlKTtcbiAgICAgICAgICB9KTtcbiAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGVudHJ5LmRhdGEoJ2pnLmxvYWRlZCcsIHRydWUpO1xuICAgICAgICAgICRlbnRyeS5kYXRhKCdqZy53aWR0aCcsICRlbnRyeS53aWR0aCgpIHwgcGFyc2VGbG9hdCgkZW50cnkuY3NzKCd3aWR0aCcpKSB8IDEpO1xuICAgICAgICAgICRlbnRyeS5kYXRhKCdqZy5oZWlnaHQnLCAkZW50cnkuaGVpZ2h0KCkgfCBwYXJzZUZsb2F0KCRlbnRyeS5jc3MoJ2hlaWdodCcpKSB8IDEpO1xuICAgICAgICB9XG4gIFxuICAgICAgfVxuICBcbiAgICB9KTtcbiAgXG4gICAgaWYgKCFpbWFnZXNUb0xvYWQgJiYgIXNraXBwZWRJbWFnZXMpIHRoaXMuc3RhcnRJbWdBbmFseXplcihmYWxzZSk7XG4gICAgdGhpcy5jaGVja1dpZHRoKCk7XG4gIH07XG4gIFxuICAvKipcbiAgICogQ2hlY2tzIHRoYXQgaXQgaXMgYSB2YWxpZCBudW1iZXIuIElmIGEgc3RyaW5nIGlzIHBhc3NlZCBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBudW1iZXJcbiAgICpcbiAgICogQHBhcmFtIHNldHRpbmdDb250YWluZXIgdGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBzZXR0aW5nICh0byBhbGxvdyB0aGUgY29udmVyc2lvbilcbiAgICogQHBhcmFtIHNldHRpbmdOYW1lIHRoZSBzZXR0aW5nIG5hbWVcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLmNoZWNrT3JDb252ZXJ0TnVtYmVyID0gZnVuY3Rpb24gKHNldHRpbmdDb250YWluZXIsIHNldHRpbmdOYW1lKSB7XG4gICAgaWYgKCQudHlwZShzZXR0aW5nQ29udGFpbmVyW3NldHRpbmdOYW1lXSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBzZXR0aW5nQ29udGFpbmVyW3NldHRpbmdOYW1lXSA9IHBhcnNlRmxvYXQoc2V0dGluZ0NvbnRhaW5lcltzZXR0aW5nTmFtZV0pO1xuICAgIH1cbiAgXG4gICAgaWYgKCQudHlwZShzZXR0aW5nQ29udGFpbmVyW3NldHRpbmdOYW1lXSkgPT09ICdudW1iZXInKSB7XG4gICAgICBpZiAoaXNOYU4oc2V0dGluZ0NvbnRhaW5lcltzZXR0aW5nTmFtZV0pKSB0aHJvdyAnaW52YWxpZCBudW1iZXIgZm9yICcgKyBzZXR0aW5nTmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgc2V0dGluZ05hbWUgKyAnIG11c3QgYmUgYSBudW1iZXInO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDaGVja3MgdGhlIHNpemVSYW5nZVN1ZmZpeGVzIGFuZCwgaWYgbmVjZXNzYXJ5LCBjb252ZXJ0c1xuICAgKiBpdHMga2V5cyBmcm9tIHN0cmluZyAoZS5nLiBvbGQgc2V0dGluZ3Mgd2l0aCAnbHQxMDAnKSB0byBpbnQuXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5jaGVja1NpemVSYW5nZXNTdWZmaXhlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJC50eXBlKHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXMpICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgJ3NpemVSYW5nZVN1ZmZpeGVzIG11c3QgYmUgZGVmaW5lZCBhbmQgbXVzdCBiZSBhbiBvYmplY3QnO1xuICAgIH1cbiAgXG4gICAgdmFyIHN1ZmZpeFJhbmdlcyA9IFtdO1xuICAgIGZvciAodmFyIHJhbmdlSWR4IGluIHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXMpIHtcbiAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNpemVSYW5nZVN1ZmZpeGVzLmhhc093blByb3BlcnR5KHJhbmdlSWR4KSkgc3VmZml4UmFuZ2VzLnB1c2gocmFuZ2VJZHgpO1xuICAgIH1cbiAgXG4gICAgdmFyIG5ld1NpemVSbmdTdWZmaXhlcyA9IHswOiAnJ307XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWZmaXhSYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICgkLnR5cGUoc3VmZml4UmFuZ2VzW2ldKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgbnVtSWR4ID0gcGFyc2VJbnQoc3VmZml4UmFuZ2VzW2ldLnJlcGxhY2UoL15bYS16XSsvLCAnJyksIDEwKTtcbiAgICAgICAgICBuZXdTaXplUm5nU3VmZml4ZXNbbnVtSWR4XSA9IHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXNbc3VmZml4UmFuZ2VzW2ldXTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHRocm93ICdzaXplUmFuZ2VTdWZmaXhlcyBrZXlzIG11c3QgY29udGFpbnMgY29ycmVjdCBudW1iZXJzICgnICsgZSArICcpJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3U2l6ZVJuZ1N1ZmZpeGVzW3N1ZmZpeFJhbmdlc1tpXV0gPSB0aGlzLnNldHRpbmdzLnNpemVSYW5nZVN1ZmZpeGVzW3N1ZmZpeFJhbmdlc1tpXV07XG4gICAgICB9XG4gICAgfVxuICBcbiAgICB0aGlzLnNldHRpbmdzLnNpemVSYW5nZVN1ZmZpeGVzID0gbmV3U2l6ZVJuZ1N1ZmZpeGVzO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIGNoZWNrIGFuZCBjb252ZXJ0IHRoZSBtYXhSb3dIZWlnaHQgc2V0dGluZ1xuICAgKiByZXF1aXJlcyByb3dIZWlnaHQgdG8gYmUgYWxyZWFkeSBzZXRcbiAgICogVE9ETzogc2hvdWxkIGJlIGFsd2F5cyBjYWxsZWQgd2hlbiBvbmx5IHJvd0hlaWdodCBpcyBjaGFuZ2VkXG4gICAqIEByZXR1cm4gbnVtYmVyIG9yIG51bGxcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnJldHJpZXZlTWF4Um93SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXdNYXhSb3dIZWlnaHQgPSBudWxsO1xuICAgIHZhciByb3dIZWlnaHQgPSB0aGlzLnNldHRpbmdzLnJvd0hlaWdodDtcbiAgXG4gICAgaWYgKCQudHlwZSh0aGlzLnNldHRpbmdzLm1heFJvd0hlaWdodCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodGhpcy5zZXR0aW5ncy5tYXhSb3dIZWlnaHQubWF0Y2goL15bMC05XSslJC8pKSB7XG4gICAgICAgIG5ld01heFJvd0hlaWdodCA9IHJvd0hlaWdodCAqIHBhcnNlRmxvYXQodGhpcy5zZXR0aW5ncy5tYXhSb3dIZWlnaHQubWF0Y2goL14oWzAtOV0rKSUkLylbMV0pIC8gMTAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3TWF4Um93SGVpZ2h0ID0gcGFyc2VGbG9hdCh0aGlzLnNldHRpbmdzLm1heFJvd0hlaWdodCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgkLnR5cGUodGhpcy5zZXR0aW5ncy5tYXhSb3dIZWlnaHQpID09PSAnbnVtYmVyJykge1xuICAgICAgbmV3TWF4Um93SGVpZ2h0ID0gdGhpcy5zZXR0aW5ncy5tYXhSb3dIZWlnaHQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLm1heFJvd0hlaWdodCA9PT0gZmFsc2UgfHwgdGhpcy5zZXR0aW5ncy5tYXhSb3dIZWlnaHQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93ICdtYXhSb3dIZWlnaHQgbXVzdCBiZSBhIG51bWJlciBvciBhIHBlcmNlbnRhZ2UnO1xuICAgIH1cbiAgXG4gICAgLy8gY2hlY2sgaWYgdGhlIGNvbnZlcnRlZCB2YWx1ZSBpcyBub3QgYSBudW1iZXJcbiAgICBpZiAoaXNOYU4obmV3TWF4Um93SGVpZ2h0KSkgdGhyb3cgJ2ludmFsaWQgbnVtYmVyIGZvciBtYXhSb3dIZWlnaHQnO1xuICBcbiAgICAvLyBjaGVjayB2YWx1ZXMsIG1heFJvd0hlaWdodCBtdXN0IGJlID49IHJvd0hlaWdodFxuICAgIGlmIChuZXdNYXhSb3dIZWlnaHQgPCByb3dIZWlnaHQpIG5ld01heFJvd0hlaWdodCA9IHJvd0hlaWdodDtcbiAgXG4gICAgcmV0dXJuIG5ld01heFJvd0hlaWdodDtcbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBDaGVja3MgdGhlIHNldHRpbmdzXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5jaGVja1NldHRpbmdzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuY2hlY2tTaXplUmFuZ2VzU3VmZml4ZXMoKTtcbiAgXG4gICAgdGhpcy5jaGVja09yQ29udmVydE51bWJlcih0aGlzLnNldHRpbmdzLCAncm93SGVpZ2h0Jyk7XG4gICAgdGhpcy5jaGVja09yQ29udmVydE51bWJlcih0aGlzLnNldHRpbmdzLCAnbWFyZ2lucycpO1xuICAgIHRoaXMuY2hlY2tPckNvbnZlcnROdW1iZXIodGhpcy5zZXR0aW5ncywgJ2JvcmRlcicpO1xuICBcbiAgICB2YXIgbGFzdFJvd01vZGVzID0gW1xuICAgICAgJ2p1c3RpZnknLFxuICAgICAgJ25vanVzdGlmeScsXG4gICAgICAnbGVmdCcsXG4gICAgICAnY2VudGVyJyxcbiAgICAgICdyaWdodCcsXG4gICAgICAnaGlkZSdcbiAgICBdO1xuICAgIGlmIChsYXN0Um93TW9kZXMuaW5kZXhPZih0aGlzLnNldHRpbmdzLmxhc3RSb3cpID09PSAtMSkge1xuICAgICAgdGhyb3cgJ2xhc3RSb3cgbXVzdCBiZSBvbmUgb2Y6ICcgKyBsYXN0Um93TW9kZXMuam9pbignLCAnKTtcbiAgICB9XG4gIFxuICAgIHRoaXMuY2hlY2tPckNvbnZlcnROdW1iZXIodGhpcy5zZXR0aW5ncywgJ2p1c3RpZnlUaHJlc2hvbGQnKTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5qdXN0aWZ5VGhyZXNob2xkIDwgMCB8fCB0aGlzLnNldHRpbmdzLmp1c3RpZnlUaHJlc2hvbGQgPiAxKSB7XG4gICAgICB0aHJvdyAnanVzdGlmeVRocmVzaG9sZCBtdXN0IGJlIGluIHRoZSBpbnRlcnZhbCBbMCwxXSc7XG4gICAgfVxuICAgIGlmICgkLnR5cGUodGhpcy5zZXR0aW5ncy5jc3NBbmltYXRpb24pICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHRocm93ICdjc3NBbmltYXRpb24gbXVzdCBiZSBhIGJvb2xlYW4nO1xuICAgIH1cbiAgXG4gICAgaWYgKCQudHlwZSh0aGlzLnNldHRpbmdzLmNhcHRpb25zKSAhPT0gJ2Jvb2xlYW4nKSB0aHJvdyAnY2FwdGlvbnMgbXVzdCBiZSBhIGJvb2xlYW4nO1xuICAgIHRoaXMuY2hlY2tPckNvbnZlcnROdW1iZXIodGhpcy5zZXR0aW5ncy5jYXB0aW9uU2V0dGluZ3MsICdhbmltYXRpb25EdXJhdGlvbicpO1xuICBcbiAgICB0aGlzLmNoZWNrT3JDb252ZXJ0TnVtYmVyKHRoaXMuc2V0dGluZ3MuY2FwdGlvblNldHRpbmdzLCAndmlzaWJsZU9wYWNpdHknKTtcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5jYXB0aW9uU2V0dGluZ3MudmlzaWJsZU9wYWNpdHkgPCAwIHx8XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuY2FwdGlvblNldHRpbmdzLnZpc2libGVPcGFjaXR5ID4gMSkge1xuICAgICAgdGhyb3cgJ2NhcHRpb25TZXR0aW5ncy52aXNpYmxlT3BhY2l0eSBtdXN0IGJlIGluIHRoZSBpbnRlcnZhbCBbMCwgMV0nO1xuICAgIH1cbiAgXG4gICAgdGhpcy5jaGVja09yQ29udmVydE51bWJlcih0aGlzLnNldHRpbmdzLmNhcHRpb25TZXR0aW5ncywgJ25vblZpc2libGVPcGFjaXR5Jyk7XG4gICAgaWYgKHRoaXMuc2V0dGluZ3MuY2FwdGlvblNldHRpbmdzLm5vblZpc2libGVPcGFjaXR5IDwgMCB8fFxuICAgICAgICB0aGlzLnNldHRpbmdzLmNhcHRpb25TZXR0aW5ncy5ub25WaXNpYmxlT3BhY2l0eSA+IDEpIHtcbiAgICAgIHRocm93ICdjYXB0aW9uU2V0dGluZ3Mubm9uVmlzaWJsZU9wYWNpdHkgbXVzdCBiZSBpbiB0aGUgaW50ZXJ2YWwgWzAsIDFdJztcbiAgICB9XG4gIFxuICAgIHRoaXMuY2hlY2tPckNvbnZlcnROdW1iZXIodGhpcy5zZXR0aW5ncywgJ2ltYWdlc0FuaW1hdGlvbkR1cmF0aW9uJyk7XG4gICAgdGhpcy5jaGVja09yQ29udmVydE51bWJlcih0aGlzLnNldHRpbmdzLCAncmVmcmVzaFRpbWUnKTtcbiAgICB0aGlzLmNoZWNrT3JDb252ZXJ0TnVtYmVyKHRoaXMuc2V0dGluZ3MsICdyZWZyZXNoU2Vuc2l0aXZpdHknKTtcbiAgICBpZiAoJC50eXBlKHRoaXMuc2V0dGluZ3MucmFuZG9taXplKSAhPT0gJ2Jvb2xlYW4nKSB0aHJvdyAncmFuZG9taXplIG11c3QgYmUgYSBib29sZWFuJztcbiAgICBpZiAoJC50eXBlKHRoaXMuc2V0dGluZ3Muc2VsZWN0b3IpICE9PSAnc3RyaW5nJykgdGhyb3cgJ3NlbGVjdG9yIG11c3QgYmUgYSBzdHJpbmcnO1xuICBcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5zb3J0ICE9PSBmYWxzZSAmJiAhJC5pc0Z1bmN0aW9uKHRoaXMuc2V0dGluZ3Muc29ydCkpIHtcbiAgICAgIHRocm93ICdzb3J0IG11c3QgYmUgZmFsc2Ugb3IgYSBjb21wYXJpc29uIGZ1bmN0aW9uJztcbiAgICB9XG4gIFxuICAgIGlmICh0aGlzLnNldHRpbmdzLmZpbHRlciAhPT0gZmFsc2UgJiYgISQuaXNGdW5jdGlvbih0aGlzLnNldHRpbmdzLmZpbHRlcikgJiZcbiAgICAgICAgJC50eXBlKHRoaXMuc2V0dGluZ3MuZmlsdGVyKSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93ICdmaWx0ZXIgbXVzdCBiZSBmYWxzZSwgYSBzdHJpbmcgb3IgYSBmaWx0ZXIgZnVuY3Rpb24nO1xuICAgIH1cbiAgfTtcbiAgXG4gIC8qKlxuICAgKiBJdCBicmluZ3MgYWxsIHRoZSBpbmRleGVzIGZyb20gdGhlIHNpemVSYW5nZVN1ZmZpeGVzIGFuZCBpdCBvcmRlcnMgdGhlbS4gVGhleSBhcmUgdGhlbiBzb3J0ZWQgYW5kIHJldHVybmVkLlxuICAgKiBAcmV0dXJucyB7QXJyYXl9IHNvcnRlZCBzdWZmaXggcmFuZ2VzXG4gICAqL1xuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5yZXRyaWV2ZVN1ZmZpeFJhbmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc3VmZml4UmFuZ2VzID0gW107XG4gICAgZm9yICh2YXIgcmFuZ2VJZHggaW4gdGhpcy5zZXR0aW5ncy5zaXplUmFuZ2VTdWZmaXhlcykge1xuICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2l6ZVJhbmdlU3VmZml4ZXMuaGFzT3duUHJvcGVydHkocmFuZ2VJZHgpKSBzdWZmaXhSYW5nZXMucHVzaChwYXJzZUludChyYW5nZUlkeCwgMTApKTtcbiAgICB9XG4gICAgc3VmZml4UmFuZ2VzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgPiBiID8gMSA6IGEgPCBiID8gLTEgOiAwOyB9KTtcbiAgICByZXR1cm4gc3VmZml4UmFuZ2VzO1xuICB9O1xuICBcbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgZXhpc3Rpbmcgc2V0dGluZ3Mgb25seSBjaGFuZ2luZyBzb21lIG9mIHRoZW1cbiAgICpcbiAgICogQHBhcmFtIG5ld1NldHRpbmdzIHRoZSBuZXcgc2V0dGluZ3MgKG9yIGEgc3ViZ3JvdXAgb2YgdGhlbSlcbiAgICovXG4gIEp1c3RpZmllZEdhbGxlcnkucHJvdG90eXBlLnVwZGF0ZVNldHRpbmdzID0gZnVuY3Rpb24gKG5ld1NldHRpbmdzKSB7XG4gICAgLy8gSW4gdGhpcyBjYXNlIEp1c3RpZmllZCBHYWxsZXJ5IGhhcyBiZWVuIGNhbGxlZCBhZ2FpbiBjaGFuZ2luZyBvbmx5IHNvbWUgb3B0aW9uc1xuICAgIHRoaXMuc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgdGhpcy5zZXR0aW5ncywgbmV3U2V0dGluZ3MpO1xuICAgIHRoaXMuY2hlY2tTZXR0aW5ncygpO1xuICBcbiAgICAvLyBBcyByZXBvcnRlZCBpbiB0aGUgc2V0dGluZ3M6IG5lZ2F0aXZlIHZhbHVlID0gc2FtZSBhcyBtYXJnaW5zLCAwID0gZGlzYWJsZWRcbiAgICB0aGlzLmJvcmRlciA9IHRoaXMuc2V0dGluZ3MuYm9yZGVyID49IDAgPyB0aGlzLnNldHRpbmdzLmJvcmRlciA6IHRoaXMuc2V0dGluZ3MubWFyZ2lucztcbiAgXG4gICAgdGhpcy5tYXhSb3dIZWlnaHQgPSB0aGlzLnJldHJpZXZlTWF4Um93SGVpZ2h0KCk7XG4gICAgdGhpcy5zdWZmaXhSYW5nZXMgPSB0aGlzLnJldHJpZXZlU3VmZml4UmFuZ2VzKCk7XG4gIH07XG4gIFxuICBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcbiAgICBzaXplUmFuZ2VTdWZmaXhlczogeyB9LCAvKiBlLmcuIEZsaWNrciBjb25maWd1cmF0aW9uXG4gICAgICAgIHtcbiAgICAgICAgICAxMDA6ICdfdCcsICAvLyB1c2VkIHdoZW4gbG9uZ2VzdCBpcyBsZXNzIHRoYW4gMTAwcHhcbiAgICAgICAgICAyNDA6ICdfbScsICAvLyB1c2VkIHdoZW4gbG9uZ2VzdCBpcyBiZXR3ZWVuIDEwMXB4IGFuZCAyNDBweFxuICAgICAgICAgIDMyMDogJ19uJywgIC8vIC4uLlxuICAgICAgICAgIDUwMDogJycsXG4gICAgICAgICAgNjQwOiAnX3onLFxuICAgICAgICAgIDEwMjQ6ICdfYicgIC8vIHVzZWQgYXMgZWxzZSBjYXNlIGJlY2F1c2UgaXQgaXMgdGhlIGxhc3RcbiAgICAgICAgfVxuICAgICovXG4gICAgdGh1bWJuYWlsUGF0aDogdW5kZWZpbmVkLCAvKiBJZiBkZWZpbmVkLCBzaXplUmFuZ2VTdWZmaXhlcyBpcyBub3QgdXNlZCwgYW5kIHRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBkZXRlcm1pbmUgdGhlXG4gICAgcGF0aCByZWxhdGl2ZSB0byBhIHNwZWNpZmljIHRodW1ibmFpbCBzaXplLiBUaGUgZnVuY3Rpb24gc2hvdWxkIGFjY2VwdCByZXNwZWN0aXZlbHkgdGhyZWUgYXJndW1lbnRzOlxuICAgIGN1cnJlbnQgcGF0aCwgd2lkdGggYW5kIGhlaWdodCAqL1xuICAgIHJvd0hlaWdodDogMTIwLCAvLyByZXF1aXJlZD8gcmVxdWlyZWQgdG8gYmUgPiAwP1xuICAgIG1heFJvd0hlaWdodDogZmFsc2UsIC8vIGZhbHNlIG9yIG5lZ2F0aXZlIHZhbHVlIHRvIGRlYWN0aXZhdGUuIFBvc2l0aXZlIG51bWJlciB0byBleHByZXNzIHRoZSB2YWx1ZSBpbiBwaXhlbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgLy8gQSBzdHJpbmcgJ1swLTldKyUnIHRvIGV4cHJlc3MgaW4gcGVyY2VudGFnZSAoZS5nLiAzMDAlIG1lYW5zIHRoYXQgdGhlIHJvdyBoZWlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjYW4ndCBleGNlZWQgMyAqIHJvd0hlaWdodClcbiAgICBtYXJnaW5zOiAxLFxuICAgIGJvcmRlcjogLTEsIC8vIG5lZ2F0aXZlIHZhbHVlID0gc2FtZSBhcyBtYXJnaW5zLCAwID0gZGlzYWJsZWQsIGFueSBvdGhlciB2YWx1ZSB0byBzZXQgdGhlIGJvcmRlclxuICBcbiAgICBsYXN0Um93OiAnbm9qdXN0aWZ5JywgLy8g4oCmIHdoaWNoIGlzIHRoZSBzYW1lIGFzICdsZWZ0Jywgb3IgY2FuIGJlICdqdXN0aWZ5JywgJ2NlbnRlcicsICdyaWdodCcgb3IgJ2hpZGUnXG4gIFxuICAgIGp1c3RpZnlUaHJlc2hvbGQ6IDAuOTAsIC8qIGlmIHJvdyB3aWR0aCAvIGF2YWlsYWJsZSBzcGFjZSA+IDAuOTAgaXQgd2lsbCBiZSBhbHdheXMganVzdGlmaWVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICogKGkuZS4gbGFzdFJvdyBzZXR0aW5nIGlzIG5vdCBjb25zaWRlcmVkKSAqL1xuICAgIHdhaXRUaHVtYm5haWxzTG9hZDogdHJ1ZSxcbiAgICBjYXB0aW9uczogdHJ1ZSxcbiAgICBjc3NBbmltYXRpb246IHRydWUsXG4gICAgaW1hZ2VzQW5pbWF0aW9uRHVyYXRpb246IDUwMCwgLy8gaWdub3JlZCB3aXRoIGNzcyBhbmltYXRpb25zXG4gICAgY2FwdGlvblNldHRpbmdzOiB7IC8vIGlnbm9yZWQgd2l0aCBjc3MgYW5pbWF0aW9uc1xuICAgICAgYW5pbWF0aW9uRHVyYXRpb246IDUwMCxcbiAgICAgIHZpc2libGVPcGFjaXR5OiAwLjcsXG4gICAgICBub25WaXNpYmxlT3BhY2l0eTogMC4wXG4gICAgfSxcbiAgICByZWw6IG51bGwsIC8vIHJld3JpdGUgdGhlIHJlbCBvZiBlYWNoIGFuYWx5emVkIGxpbmtzXG4gICAgdGFyZ2V0OiBudWxsLCAvLyByZXdyaXRlIHRoZSB0YXJnZXQgb2YgYWxsIGxpbmtzXG4gICAgZXh0ZW5zaW9uOiAvXFwuW14uXFxcXC9dKyQvLCAvLyByZWdleHAgdG8gY2FwdHVyZSB0aGUgZXh0ZW5zaW9uIG9mIGFuIGltYWdlXG4gICAgcmVmcmVzaFRpbWU6IDIwMCwgLy8gdGltZSBpbnRlcnZhbCAoaW4gbXMpIHRvIGNoZWNrIGlmIHRoZSBwYWdlIGNoYW5nZXMgaXRzIHdpZHRoXG4gICAgcmVmcmVzaFNlbnNpdGl2aXR5OiAwLCAvLyBjaGFuZ2UgaW4gd2lkdGggYWxsb3dlZCAoaW4gcHgpIHdpdGhvdXQgcmUtYnVpbGRpbmcgdGhlIGdhbGxlcnlcbiAgICByYW5kb21pemU6IGZhbHNlLFxuICAgIHJ0bDogZmFsc2UsIC8vIHJpZ2h0LXRvLWxlZnQgbW9kZVxuICAgIHNvcnQ6IGZhbHNlLCAvKlxuICAgICAgLSBmYWxzZTogdG8gZG8gbm90IHNvcnRcbiAgICAgIC0gZnVuY3Rpb246IHRvIHNvcnQgdGhlbSB1c2luZyB0aGUgZnVuY3Rpb24gYXMgY29tcGFyYXRvciAoc2VlIEFycmF5LnByb3RvdHlwZS5zb3J0KCkpXG4gICAgKi9cbiAgICBmaWx0ZXI6IGZhbHNlLCAvKlxuICAgICAgLSBmYWxzZSwgbnVsbCBvciB1bmRlZmluZWQ6IGZvciBhIGRpc2FibGVkIGZpbHRlclxuICAgICAgLSBhIHN0cmluZzogYW4gZW50cnkgaXMga2VwdCBpZiBlbnRyeS5pcyhmaWx0ZXIgc3RyaW5nKSByZXR1cm5zIHRydWVcbiAgICAgICAgICAgICAgICAgIHNlZSBqUXVlcnkncyAuaXMoKSBmdW5jdGlvbiBmb3IgZnVydGhlciBpbmZvcm1hdGlvblxuICAgICAgLSBhIGZ1bmN0aW9uOiBpbnZva2VkIHdpdGggYXJndW1lbnRzIChlbnRyeSwgaW5kZXgsIGFycmF5KS4gUmV0dXJuIHRydWUgdG8ga2VlcCB0aGUgZW50cnksIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgICAgICAgICAgICAgICAgSXQgZm9sbG93cyB0aGUgc3BlY2lmaWNhdGlvbnMgb2YgdGhlIEFycmF5LnByb3RvdHlwZS5maWx0ZXIoKSBmdW5jdGlvbiBvZiBKYXZhU2NyaXB0LlxuICAgICovXG4gICAgc2VsZWN0b3I6ICdhLCBkaXY6bm90KC5zcGlubmVyKScsIC8vIFRoZSBzZWxlY3RvciB0aGF0IGlzIHVzZWQgdG8ga25vdyB3aGF0IGFyZSB0aGUgZW50cmllcyBvZiB0aGUgZ2FsbGVyeVxuICAgIGltZ1NlbGVjdG9yOiAnPiBpbWcsID4gYSA+IGltZycsIC8vIFRoZSBzZWxlY3RvciB0aGF0IGlzIHVzZWQgdG8ga25vdyB3aGF0IGFyZSB0aGUgaW1hZ2VzIG9mIGVhY2ggZW50cnlcbiAgICB0cmlnZ2VyRXZlbnQ6IGZ1bmN0aW9uIChldmVudCkgeyAvLyBUaGlzIGlzIGNhbGxlZCB0byB0cmlnZ2VyIGV2ZW50cywgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gY2FsbCAkLnRyaWdnZXJcbiAgICAgIHRoaXMuJGdhbGxlcnkudHJpZ2dlcihldmVudCk7ICAvLyBDb25zaWRlciB0aGF0ICd0aGlzJyBpcyB0aGlzIHNldCB0byB0aGUgSnVzdGlmaWVkR2FsbGVyeSBvYmplY3QsIHNvIGl0IGNhblxuICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VzcyB0byBmaWVsZHMgc3VjaCBhcyAkZ2FsbGVyeSwgdXNlZnVsIHRvIHRyaWdnZXIgZXZlbnRzIHdpdGggalF1ZXJ5LlxuICB9O1xuXG4gIC8qKlxuICAgKiBKdXN0aWZpZWQgR2FsbGVyeSBwbHVnaW4gZm9yIGpRdWVyeVxuICAgKlxuICAgKiBFdmVudHNcbiAgICogIC0gamcuY29tcGxldGUgOiBjYWxsZWQgd2hlbiBhbGwgdGhlIGdhbGxlcnkgaGFzIGJlZW4gY3JlYXRlZFxuICAgKiAgLSBqZy5yZXNpemUgOiBjYWxsZWQgd2hlbiB0aGUgZ2FsbGVyeSBoYXMgYmVlbiByZXNpemVkXG4gICAqICAtIGpnLnJvd2ZsdXNoIDogd2hlbiBhIG5ldyByb3cgYXBwZWFyc1xuICAgKlxuICAgKiBAcGFyYW0gYXJnIHRoZSBhY3Rpb24gKG9yIHRoZSBzZXR0aW5ncykgcGFzc2VkIHdoZW4gdGhlIHBsdWdpbiBpcyBjYWxsZWRcbiAgICogQHJldHVybnMgeyp9IHRoZSBvYmplY3QgaXRzZWxmXG4gICAqL1xuICAkLmZuLmp1c3RpZmllZEdhbGxlcnkgPSBmdW5jdGlvbiAoYXJnKSB7XG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGdhbGxlcnkpIHtcblxuICAgICAgdmFyICRnYWxsZXJ5ID0gJChnYWxsZXJ5KTtcbiAgICAgICRnYWxsZXJ5LmFkZENsYXNzKCdqdXN0aWZpZWQtZ2FsbGVyeScpO1xuXG4gICAgICB2YXIgY29udHJvbGxlciA9ICRnYWxsZXJ5LmRhdGEoJ2pnLmNvbnRyb2xsZXInKTtcbiAgICAgIGlmICh0eXBlb2YgY29udHJvbGxlciA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRyb2xsZXIgYW5kIGFzc2lnbiBpdCB0byB0aGUgb2JqZWN0IGRhdGFcbiAgICAgICAgaWYgKHR5cGVvZiBhcmcgIT09ICd1bmRlZmluZWQnICYmIGFyZyAhPT0gbnVsbCAmJiAkLnR5cGUoYXJnKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBpZiAoYXJnID09PSAnZGVzdHJveScpIHJldHVybjsgLy8gSnVzdCBhIGNhbGwgdG8gYW4gdW5leGlzdGluZyBvYmplY3RcbiAgICAgICAgICB0aHJvdyAnVGhlIGFyZ3VtZW50IG11c3QgYmUgYW4gb2JqZWN0JztcbiAgICAgICAgfVxuICAgICAgICBjb250cm9sbGVyID0gbmV3IEp1c3RpZmllZEdhbGxlcnkoJGdhbGxlcnksICQuZXh0ZW5kKHt9LCBKdXN0aWZpZWRHYWxsZXJ5LnByb3RvdHlwZS5kZWZhdWx0cywgYXJnKSk7XG4gICAgICAgICRnYWxsZXJ5LmRhdGEoJ2pnLmNvbnRyb2xsZXInLCBjb250cm9sbGVyKTtcbiAgICAgIH0gZWxzZSBpZiAoYXJnID09PSAnbm9yZXdpbmQnKSB7XG4gICAgICAgIC8vIEluIHRoaXMgY2FzZSB3ZSBkb24ndCByZXdpbmQ6IHdlIGFuYWx5emUgb25seSB0aGUgbGF0ZXN0IGltYWdlcyAoZS5nLiB0byBjb21wbGV0ZSB0aGUgbGFzdCB1bmZpbmlzaGVkIHJvd1xuICAgICAgICAvLyAuLi4gbGVmdCB0byBiZSBtb3JlIHJlYWRhYmxlXG4gICAgICB9IGVsc2UgaWYgKGFyZyA9PT0gJ2Rlc3Ryb3knKSB7XG4gICAgICAgIGNvbnRyb2xsZXIuZGVzdHJveSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBJbiB0aGlzIGNhc2UgSnVzdGlmaWVkIEdhbGxlcnkgaGFzIGJlZW4gY2FsbGVkIGFnYWluIGNoYW5naW5nIG9ubHkgc29tZSBvcHRpb25zXG4gICAgICAgIGNvbnRyb2xsZXIudXBkYXRlU2V0dGluZ3MoYXJnKTtcbiAgICAgICAgY29udHJvbGxlci5yZXdpbmQoKTtcbiAgICAgIH1cblxuICAgICAgLy8gVXBkYXRlIHRoZSBlbnRyaWVzIGxpc3RcbiAgICAgIGlmICghY29udHJvbGxlci51cGRhdGVFbnRyaWVzKGFyZyA9PT0gJ25vcmV3aW5kJykpIHJldHVybjtcblxuICAgICAgLy8gSW5pdCBqdXN0aWZpZWQgZ2FsbGVyeVxuICAgICAgY29udHJvbGxlci5pbml0KCk7XG5cbiAgICB9KTtcbiAgfTtcblxufSkpOyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26857\n")},29154:(module,exports,__webpack_require__)=>{eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*\n     _ _      _       _\n ___| (_) ___| | __  (_)___\n/ __| | |/ __| |/ /  | / __|\n\\__ \\ | | (__|   < _ | \\__ \\\n|___/_|_|\\___|_|\\_(_)/ |___/\n                   |__/\n\n Version: 1.8.1\n  Author: Ken Wheeler\n Website: http://kenwheeler.github.io\n    Docs: http://kenwheeler.github.io/slick\n    Repo: http://github.com/kenwheeler/slick\n  Issues: http://github.com/kenwheeler/slick/issues\n\n */\n/* global window, document, define, jQuery, setInterval, clearInterval */\n;(function(factory) {\n    'use strict';\n    if (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(19567)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n\n}(function($) {\n    'use strict';\n    var Slick = window.Slick || {};\n\n    Slick = (function() {\n\n        var instanceUid = 0;\n\n        function Slick(element, settings) {\n\n            var _ = this, dataSettings;\n\n            _.defaults = {\n                accessibility: true,\n                adaptiveHeight: false,\n                appendArrows: $(element),\n                appendDots: $(element),\n                arrows: true,\n                asNavFor: null,\n                prevArrow: '<button class=\"slick-prev\" aria-label=\"Previous\" type=\"button\">Previous</button>',\n                nextArrow: '<button class=\"slick-next\" aria-label=\"Next\" type=\"button\">Next</button>',\n                autoplay: false,\n                autoplaySpeed: 3000,\n                centerMode: false,\n                centerPadding: '50px',\n                cssEase: 'ease',\n                customPaging: function(slider, i) {\n                    return $('<button type=\"button\" />').text(i + 1);\n                },\n                dots: false,\n                dotsClass: 'slick-dots',\n                draggable: true,\n                easing: 'linear',\n                edgeFriction: 0.35,\n                fade: false,\n                focusOnSelect: false,\n                focusOnChange: false,\n                infinite: true,\n                initialSlide: 0,\n                lazyLoad: 'ondemand',\n                mobileFirst: false,\n                pauseOnHover: true,\n                pauseOnFocus: true,\n                pauseOnDotsHover: false,\n                respondTo: 'window',\n                responsive: null,\n                rows: 1,\n                rtl: false,\n                slide: '',\n                slidesPerRow: 1,\n                slidesToShow: 1,\n                slidesToScroll: 1,\n                speed: 500,\n                swipe: true,\n                swipeToSlide: false,\n                touchMove: true,\n                touchThreshold: 5,\n                useCSS: true,\n                useTransform: true,\n                variableWidth: false,\n                vertical: false,\n                verticalSwiping: false,\n                waitForAnimate: true,\n                zIndex: 1000\n            };\n\n            _.initials = {\n                animating: false,\n                dragging: false,\n                autoPlayTimer: null,\n                currentDirection: 0,\n                currentLeft: null,\n                currentSlide: 0,\n                direction: 1,\n                $dots: null,\n                listWidth: null,\n                listHeight: null,\n                loadIndex: 0,\n                $nextArrow: null,\n                $prevArrow: null,\n                scrolling: false,\n                slideCount: null,\n                slideWidth: null,\n                $slideTrack: null,\n                $slides: null,\n                sliding: false,\n                slideOffset: 0,\n                swipeLeft: null,\n                swiping: false,\n                $list: null,\n                touchObject: {},\n                transformsEnabled: false,\n                unslicked: false\n            };\n\n            $.extend(_, _.initials);\n\n            _.activeBreakpoint = null;\n            _.animType = null;\n            _.animProp = null;\n            _.breakpoints = [];\n            _.breakpointSettings = [];\n            _.cssTransitions = false;\n            _.focussed = false;\n            _.interrupted = false;\n            _.hidden = 'hidden';\n            _.paused = true;\n            _.positionProp = null;\n            _.respondTo = null;\n            _.rowCount = 1;\n            _.shouldClick = true;\n            _.$slider = $(element);\n            _.$slidesCache = null;\n            _.transformType = null;\n            _.transitionType = null;\n            _.visibilityChange = 'visibilitychange';\n            _.windowWidth = 0;\n            _.windowTimer = null;\n\n            dataSettings = $(element).data('slick') || {};\n\n            _.options = $.extend({}, _.defaults, settings, dataSettings);\n\n            _.currentSlide = _.options.initialSlide;\n\n            _.originalSettings = _.options;\n\n            if (typeof document.mozHidden !== 'undefined') {\n                _.hidden = 'mozHidden';\n                _.visibilityChange = 'mozvisibilitychange';\n            } else if (typeof document.webkitHidden !== 'undefined') {\n                _.hidden = 'webkitHidden';\n                _.visibilityChange = 'webkitvisibilitychange';\n            }\n\n            _.autoPlay = $.proxy(_.autoPlay, _);\n            _.autoPlayClear = $.proxy(_.autoPlayClear, _);\n            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);\n            _.changeSlide = $.proxy(_.changeSlide, _);\n            _.clickHandler = $.proxy(_.clickHandler, _);\n            _.selectHandler = $.proxy(_.selectHandler, _);\n            _.setPosition = $.proxy(_.setPosition, _);\n            _.swipeHandler = $.proxy(_.swipeHandler, _);\n            _.dragHandler = $.proxy(_.dragHandler, _);\n            _.keyHandler = $.proxy(_.keyHandler, _);\n\n            _.instanceUid = instanceUid++;\n\n            // A simple way to check for HTML strings\n            // Strict HTML recognition (must start with <)\n            // Extracted from jQuery v1.11 source\n            _.htmlExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*)$/;\n\n\n            _.registerBreakpoints();\n            _.init(true);\n\n        }\n\n        return Slick;\n\n    }());\n\n    Slick.prototype.activateADA = function() {\n        var _ = this;\n\n        _.$slideTrack.find('.slick-active').attr({\n            'aria-hidden': 'false'\n        }).find('a, input, button, select').attr({\n            'tabindex': '0'\n        });\n\n    };\n\n    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {\n\n        var _ = this;\n\n        if (typeof(index) === 'boolean') {\n            addBefore = index;\n            index = null;\n        } else if (index < 0 || (index >= _.slideCount)) {\n            return false;\n        }\n\n        _.unload();\n\n        if (typeof(index) === 'number') {\n            if (index === 0 && _.$slides.length === 0) {\n                $(markup).appendTo(_.$slideTrack);\n            } else if (addBefore) {\n                $(markup).insertBefore(_.$slides.eq(index));\n            } else {\n                $(markup).insertAfter(_.$slides.eq(index));\n            }\n        } else {\n            if (addBefore === true) {\n                $(markup).prependTo(_.$slideTrack);\n            } else {\n                $(markup).appendTo(_.$slideTrack);\n            }\n        }\n\n        _.$slides = _.$slideTrack.children(this.options.slide);\n\n        _.$slideTrack.children(this.options.slide).detach();\n\n        _.$slideTrack.append(_.$slides);\n\n        _.$slides.each(function(index, element) {\n            $(element).attr('data-slick-index', index);\n        });\n\n        _.$slidesCache = _.$slides;\n\n        _.reinit();\n\n    };\n\n    Slick.prototype.animateHeight = function() {\n        var _ = this;\n        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {\n            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);\n            _.$list.animate({\n                height: targetHeight\n            }, _.options.speed);\n        }\n    };\n\n    Slick.prototype.animateSlide = function(targetLeft, callback) {\n\n        var animProps = {},\n            _ = this;\n\n        _.animateHeight();\n\n        if (_.options.rtl === true && _.options.vertical === false) {\n            targetLeft = -targetLeft;\n        }\n        if (_.transformsEnabled === false) {\n            if (_.options.vertical === false) {\n                _.$slideTrack.animate({\n                    left: targetLeft\n                }, _.options.speed, _.options.easing, callback);\n            } else {\n                _.$slideTrack.animate({\n                    top: targetLeft\n                }, _.options.speed, _.options.easing, callback);\n            }\n\n        } else {\n\n            if (_.cssTransitions === false) {\n                if (_.options.rtl === true) {\n                    _.currentLeft = -(_.currentLeft);\n                }\n                $({\n                    animStart: _.currentLeft\n                }).animate({\n                    animStart: targetLeft\n                }, {\n                    duration: _.options.speed,\n                    easing: _.options.easing,\n                    step: function(now) {\n                        now = Math.ceil(now);\n                        if (_.options.vertical === false) {\n                            animProps[_.animType] = 'translate(' +\n                                now + 'px, 0px)';\n                            _.$slideTrack.css(animProps);\n                        } else {\n                            animProps[_.animType] = 'translate(0px,' +\n                                now + 'px)';\n                            _.$slideTrack.css(animProps);\n                        }\n                    },\n                    complete: function() {\n                        if (callback) {\n                            callback.call();\n                        }\n                    }\n                });\n\n            } else {\n\n                _.applyTransition();\n                targetLeft = Math.ceil(targetLeft);\n\n                if (_.options.vertical === false) {\n                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';\n                } else {\n                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';\n                }\n                _.$slideTrack.css(animProps);\n\n                if (callback) {\n                    setTimeout(function() {\n\n                        _.disableTransition();\n\n                        callback.call();\n                    }, _.options.speed);\n                }\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.getNavTarget = function() {\n\n        var _ = this,\n            asNavFor = _.options.asNavFor;\n\n        if ( asNavFor && asNavFor !== null ) {\n            asNavFor = $(asNavFor).not(_.$slider);\n        }\n\n        return asNavFor;\n\n    };\n\n    Slick.prototype.asNavFor = function(index) {\n\n        var _ = this,\n            asNavFor = _.getNavTarget();\n\n        if ( asNavFor !== null && typeof asNavFor === 'object' ) {\n            asNavFor.each(function() {\n                var target = $(this).slick('getSlick');\n                if(!target.unslicked) {\n                    target.slideHandler(index, true);\n                }\n            });\n        }\n\n    };\n\n    Slick.prototype.applyTransition = function(slide) {\n\n        var _ = this,\n            transition = {};\n\n        if (_.options.fade === false) {\n            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;\n        } else {\n            transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;\n        }\n\n        if (_.options.fade === false) {\n            _.$slideTrack.css(transition);\n        } else {\n            _.$slides.eq(slide).css(transition);\n        }\n\n    };\n\n    Slick.prototype.autoPlay = function() {\n\n        var _ = this;\n\n        _.autoPlayClear();\n\n        if ( _.slideCount > _.options.slidesToShow ) {\n            _.autoPlayTimer = setInterval( _.autoPlayIterator, _.options.autoplaySpeed );\n        }\n\n    };\n\n    Slick.prototype.autoPlayClear = function() {\n\n        var _ = this;\n\n        if (_.autoPlayTimer) {\n            clearInterval(_.autoPlayTimer);\n        }\n\n    };\n\n    Slick.prototype.autoPlayIterator = function() {\n\n        var _ = this,\n            slideTo = _.currentSlide + _.options.slidesToScroll;\n\n        if ( !_.paused && !_.interrupted && !_.focussed ) {\n\n            if ( _.options.infinite === false ) {\n\n                if ( _.direction === 1 && ( _.currentSlide + 1 ) === ( _.slideCount - 1 )) {\n                    _.direction = 0;\n                }\n\n                else if ( _.direction === 0 ) {\n\n                    slideTo = _.currentSlide - _.options.slidesToScroll;\n\n                    if ( _.currentSlide - 1 === 0 ) {\n                        _.direction = 1;\n                    }\n\n                }\n\n            }\n\n            _.slideHandler( slideTo );\n\n        }\n\n    };\n\n    Slick.prototype.buildArrows = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true ) {\n\n            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');\n            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');\n\n            if( _.slideCount > _.options.slidesToShow ) {\n\n                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');\n                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');\n\n                if (_.htmlExpr.test(_.options.prevArrow)) {\n                    _.$prevArrow.prependTo(_.options.appendArrows);\n                }\n\n                if (_.htmlExpr.test(_.options.nextArrow)) {\n                    _.$nextArrow.appendTo(_.options.appendArrows);\n                }\n\n                if (_.options.infinite !== true) {\n                    _.$prevArrow\n                        .addClass('slick-disabled')\n                        .attr('aria-disabled', 'true');\n                }\n\n            } else {\n\n                _.$prevArrow.add( _.$nextArrow )\n\n                    .addClass('slick-hidden')\n                    .attr({\n                        'aria-disabled': 'true',\n                        'tabindex': '-1'\n                    });\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.buildDots = function() {\n\n        var _ = this,\n            i, dot;\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$slider.addClass('slick-dotted');\n\n            dot = $('<ul />').addClass(_.options.dotsClass);\n\n            for (i = 0; i <= _.getDotCount(); i += 1) {\n                dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));\n            }\n\n            _.$dots = dot.appendTo(_.options.appendDots);\n\n            _.$dots.find('li').first().addClass('slick-active');\n\n        }\n\n    };\n\n    Slick.prototype.buildOut = function() {\n\n        var _ = this;\n\n        _.$slides =\n            _.$slider\n                .children( _.options.slide + ':not(.slick-cloned)')\n                .addClass('slick-slide');\n\n        _.slideCount = _.$slides.length;\n\n        _.$slides.each(function(index, element) {\n            $(element)\n                .attr('data-slick-index', index)\n                .data('originalStyling', $(element).attr('style') || '');\n        });\n\n        _.$slider.addClass('slick-slider');\n\n        _.$slideTrack = (_.slideCount === 0) ?\n            $('<div class=\"slick-track\"/>').appendTo(_.$slider) :\n            _.$slides.wrapAll('<div class=\"slick-track\"/>').parent();\n\n        _.$list = _.$slideTrack.wrap(\n            '<div class=\"slick-list\"/>').parent();\n        _.$slideTrack.css('opacity', 0);\n\n        if (_.options.centerMode === true || _.options.swipeToSlide === true) {\n            _.options.slidesToScroll = 1;\n        }\n\n        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');\n\n        _.setupInfinite();\n\n        _.buildArrows();\n\n        _.buildDots();\n\n        _.updateDots();\n\n\n        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);\n\n        if (_.options.draggable === true) {\n            _.$list.addClass('draggable');\n        }\n\n    };\n\n    Slick.prototype.buildRows = function() {\n\n        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;\n\n        newSlides = document.createDocumentFragment();\n        originalSlides = _.$slider.children();\n\n        if(_.options.rows > 0) {\n\n            slidesPerSection = _.options.slidesPerRow * _.options.rows;\n            numOfSlides = Math.ceil(\n                originalSlides.length / slidesPerSection\n            );\n\n            for(a = 0; a < numOfSlides; a++){\n                var slide = document.createElement('div');\n                for(b = 0; b < _.options.rows; b++) {\n                    var row = document.createElement('div');\n                    for(c = 0; c < _.options.slidesPerRow; c++) {\n                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));\n                        if (originalSlides.get(target)) {\n                            row.appendChild(originalSlides.get(target));\n                        }\n                    }\n                    slide.appendChild(row);\n                }\n                newSlides.appendChild(slide);\n            }\n\n            _.$slider.empty().append(newSlides);\n            _.$slider.children().children().children()\n                .css({\n                    'width':(100 / _.options.slidesPerRow) + '%',\n                    'display': 'inline-block'\n                });\n\n        }\n\n    };\n\n    Slick.prototype.checkResponsive = function(initial, forceUpdate) {\n\n        var _ = this,\n            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;\n        var sliderWidth = _.$slider.width();\n        var windowWidth = window.innerWidth || $(window).width();\n\n        if (_.respondTo === 'window') {\n            respondToWidth = windowWidth;\n        } else if (_.respondTo === 'slider') {\n            respondToWidth = sliderWidth;\n        } else if (_.respondTo === 'min') {\n            respondToWidth = Math.min(windowWidth, sliderWidth);\n        }\n\n        if ( _.options.responsive &&\n            _.options.responsive.length &&\n            _.options.responsive !== null) {\n\n            targetBreakpoint = null;\n\n            for (breakpoint in _.breakpoints) {\n                if (_.breakpoints.hasOwnProperty(breakpoint)) {\n                    if (_.originalSettings.mobileFirst === false) {\n                        if (respondToWidth < _.breakpoints[breakpoint]) {\n                            targetBreakpoint = _.breakpoints[breakpoint];\n                        }\n                    } else {\n                        if (respondToWidth > _.breakpoints[breakpoint]) {\n                            targetBreakpoint = _.breakpoints[breakpoint];\n                        }\n                    }\n                }\n            }\n\n            if (targetBreakpoint !== null) {\n                if (_.activeBreakpoint !== null) {\n                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {\n                        _.activeBreakpoint =\n                            targetBreakpoint;\n                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {\n                            _.unslick(targetBreakpoint);\n                        } else {\n                            _.options = $.extend({}, _.originalSettings,\n                                _.breakpointSettings[\n                                    targetBreakpoint]);\n                            if (initial === true) {\n                                _.currentSlide = _.options.initialSlide;\n                            }\n                            _.refresh(initial);\n                        }\n                        triggerBreakpoint = targetBreakpoint;\n                    }\n                } else {\n                    _.activeBreakpoint = targetBreakpoint;\n                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {\n                        _.unslick(targetBreakpoint);\n                    } else {\n                        _.options = $.extend({}, _.originalSettings,\n                            _.breakpointSettings[\n                                targetBreakpoint]);\n                        if (initial === true) {\n                            _.currentSlide = _.options.initialSlide;\n                        }\n                        _.refresh(initial);\n                    }\n                    triggerBreakpoint = targetBreakpoint;\n                }\n            } else {\n                if (_.activeBreakpoint !== null) {\n                    _.activeBreakpoint = null;\n                    _.options = _.originalSettings;\n                    if (initial === true) {\n                        _.currentSlide = _.options.initialSlide;\n                    }\n                    _.refresh(initial);\n                    triggerBreakpoint = targetBreakpoint;\n                }\n            }\n\n            // only trigger breakpoints during an actual break. not on initialize.\n            if( !initial && triggerBreakpoint !== false ) {\n                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);\n            }\n        }\n\n    };\n\n    Slick.prototype.changeSlide = function(event, dontAnimate) {\n\n        var _ = this,\n            $target = $(event.currentTarget),\n            indexOffset, slideOffset, unevenOffset;\n\n        // If target is a link, prevent default action.\n        if($target.is('a')) {\n            event.preventDefault();\n        }\n\n        // If target is not the <li> element (ie: a child), find the <li>.\n        if(!$target.is('li')) {\n            $target = $target.closest('li');\n        }\n\n        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);\n        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;\n\n        switch (event.data.message) {\n\n            case 'previous':\n                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;\n                if (_.slideCount > _.options.slidesToShow) {\n                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);\n                }\n                break;\n\n            case 'next':\n                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;\n                if (_.slideCount > _.options.slidesToShow) {\n                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);\n                }\n                break;\n\n            case 'index':\n                var index = event.data.index === 0 ? 0 :\n                    event.data.index || $target.index() * _.options.slidesToScroll;\n\n                _.slideHandler(_.checkNavigable(index), false, dontAnimate);\n                $target.children().trigger('focus');\n                break;\n\n            default:\n                return;\n        }\n\n    };\n\n    Slick.prototype.checkNavigable = function(index) {\n\n        var _ = this,\n            navigables, prevNavigable;\n\n        navigables = _.getNavigableIndexes();\n        prevNavigable = 0;\n        if (index > navigables[navigables.length - 1]) {\n            index = navigables[navigables.length - 1];\n        } else {\n            for (var n in navigables) {\n                if (index < navigables[n]) {\n                    index = prevNavigable;\n                    break;\n                }\n                prevNavigable = navigables[n];\n            }\n        }\n\n        return index;\n    };\n\n    Slick.prototype.cleanUpEvents = function() {\n\n        var _ = this;\n\n        if (_.options.dots && _.$dots !== null) {\n\n            $('li', _.$dots)\n                .off('click.slick', _.changeSlide)\n                .off('mouseenter.slick', $.proxy(_.interrupt, _, true))\n                .off('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n            if (_.options.accessibility === true) {\n                _.$dots.off('keydown.slick', _.keyHandler);\n            }\n        }\n\n        _.$slider.off('focus.slick blur.slick');\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);\n            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);\n\n            if (_.options.accessibility === true) {\n                _.$prevArrow && _.$prevArrow.off('keydown.slick', _.keyHandler);\n                _.$nextArrow && _.$nextArrow.off('keydown.slick', _.keyHandler);\n            }\n        }\n\n        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);\n        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);\n        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);\n        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);\n\n        _.$list.off('click.slick', _.clickHandler);\n\n        $(document).off(_.visibilityChange, _.visibility);\n\n        _.cleanUpSlideEvents();\n\n        if (_.options.accessibility === true) {\n            _.$list.off('keydown.slick', _.keyHandler);\n        }\n\n        if (_.options.focusOnSelect === true) {\n            $(_.$slideTrack).children().off('click.slick', _.selectHandler);\n        }\n\n        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);\n\n        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);\n\n        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);\n\n        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);\n\n    };\n\n    Slick.prototype.cleanUpSlideEvents = function() {\n\n        var _ = this;\n\n        _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));\n        _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n    };\n\n    Slick.prototype.cleanUpRows = function() {\n\n        var _ = this, originalSlides;\n\n        if(_.options.rows > 0) {\n            originalSlides = _.$slides.children().children();\n            originalSlides.removeAttr('style');\n            _.$slider.empty().append(originalSlides);\n        }\n\n    };\n\n    Slick.prototype.clickHandler = function(event) {\n\n        var _ = this;\n\n        if (_.shouldClick === false) {\n            event.stopImmediatePropagation();\n            event.stopPropagation();\n            event.preventDefault();\n        }\n\n    };\n\n    Slick.prototype.destroy = function(refresh) {\n\n        var _ = this;\n\n        _.autoPlayClear();\n\n        _.touchObject = {};\n\n        _.cleanUpEvents();\n\n        $('.slick-cloned', _.$slider).detach();\n\n        if (_.$dots) {\n            _.$dots.remove();\n        }\n\n        if ( _.$prevArrow && _.$prevArrow.length ) {\n\n            _.$prevArrow\n                .removeClass('slick-disabled slick-arrow slick-hidden')\n                .removeAttr('aria-hidden aria-disabled tabindex')\n                .css('display','');\n\n            if ( _.htmlExpr.test( _.options.prevArrow )) {\n                _.$prevArrow.remove();\n            }\n        }\n\n        if ( _.$nextArrow && _.$nextArrow.length ) {\n\n            _.$nextArrow\n                .removeClass('slick-disabled slick-arrow slick-hidden')\n                .removeAttr('aria-hidden aria-disabled tabindex')\n                .css('display','');\n\n            if ( _.htmlExpr.test( _.options.nextArrow )) {\n                _.$nextArrow.remove();\n            }\n        }\n\n\n        if (_.$slides) {\n\n            _.$slides\n                .removeClass('slick-slide slick-active slick-center slick-visible slick-current')\n                .removeAttr('aria-hidden')\n                .removeAttr('data-slick-index')\n                .each(function(){\n                    $(this).attr('style', $(this).data('originalStyling'));\n                });\n\n            _.$slideTrack.children(this.options.slide).detach();\n\n            _.$slideTrack.detach();\n\n            _.$list.detach();\n\n            _.$slider.append(_.$slides);\n        }\n\n        _.cleanUpRows();\n\n        _.$slider.removeClass('slick-slider');\n        _.$slider.removeClass('slick-initialized');\n        _.$slider.removeClass('slick-dotted');\n\n        _.unslicked = true;\n\n        if(!refresh) {\n            _.$slider.trigger('destroy', [_]);\n        }\n\n    };\n\n    Slick.prototype.disableTransition = function(slide) {\n\n        var _ = this,\n            transition = {};\n\n        transition[_.transitionType] = '';\n\n        if (_.options.fade === false) {\n            _.$slideTrack.css(transition);\n        } else {\n            _.$slides.eq(slide).css(transition);\n        }\n\n    };\n\n    Slick.prototype.fadeSlide = function(slideIndex, callback) {\n\n        var _ = this;\n\n        if (_.cssTransitions === false) {\n\n            _.$slides.eq(slideIndex).css({\n                zIndex: _.options.zIndex\n            });\n\n            _.$slides.eq(slideIndex).animate({\n                opacity: 1\n            }, _.options.speed, _.options.easing, callback);\n\n        } else {\n\n            _.applyTransition(slideIndex);\n\n            _.$slides.eq(slideIndex).css({\n                opacity: 1,\n                zIndex: _.options.zIndex\n            });\n\n            if (callback) {\n                setTimeout(function() {\n\n                    _.disableTransition(slideIndex);\n\n                    callback.call();\n                }, _.options.speed);\n            }\n\n        }\n\n    };\n\n    Slick.prototype.fadeSlideOut = function(slideIndex) {\n\n        var _ = this;\n\n        if (_.cssTransitions === false) {\n\n            _.$slides.eq(slideIndex).animate({\n                opacity: 0,\n                zIndex: _.options.zIndex - 2\n            }, _.options.speed, _.options.easing);\n\n        } else {\n\n            _.applyTransition(slideIndex);\n\n            _.$slides.eq(slideIndex).css({\n                opacity: 0,\n                zIndex: _.options.zIndex - 2\n            });\n\n        }\n\n    };\n\n    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {\n\n        var _ = this;\n\n        if (filter !== null) {\n\n            _.$slidesCache = _.$slides;\n\n            _.unload();\n\n            _.$slideTrack.children(this.options.slide).detach();\n\n            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);\n\n            _.reinit();\n\n        }\n\n    };\n\n    Slick.prototype.focusHandler = function() {\n\n        var _ = this;\n\n        _.$slider\n            .off('focus.slick blur.slick')\n            .on('focus.slick blur.slick', '*', function(event) {\n\n            event.stopImmediatePropagation();\n            var $sf = $(this);\n\n            setTimeout(function() {\n\n                if( _.options.pauseOnFocus ) {\n                    _.focussed = $sf.is(':focus');\n                    _.autoPlay();\n                }\n\n            }, 0);\n\n        });\n    };\n\n    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {\n\n        var _ = this;\n        return _.currentSlide;\n\n    };\n\n    Slick.prototype.getDotCount = function() {\n\n        var _ = this;\n\n        var breakPoint = 0;\n        var counter = 0;\n        var pagerQty = 0;\n\n        if (_.options.infinite === true) {\n            if (_.slideCount <= _.options.slidesToShow) {\n                 ++pagerQty;\n            } else {\n                while (breakPoint < _.slideCount) {\n                    ++pagerQty;\n                    breakPoint = counter + _.options.slidesToScroll;\n                    counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\n                }\n            }\n        } else if (_.options.centerMode === true) {\n            pagerQty = _.slideCount;\n        } else if(!_.options.asNavFor) {\n            pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);\n        }else {\n            while (breakPoint < _.slideCount) {\n                ++pagerQty;\n                breakPoint = counter + _.options.slidesToScroll;\n                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\n            }\n        }\n\n        return pagerQty - 1;\n\n    };\n\n    Slick.prototype.getLeft = function(slideIndex) {\n\n        var _ = this,\n            targetLeft,\n            verticalHeight,\n            verticalOffset = 0,\n            targetSlide,\n            coef;\n\n        _.slideOffset = 0;\n        verticalHeight = _.$slides.first().outerHeight(true);\n\n        if (_.options.infinite === true) {\n            if (_.slideCount > _.options.slidesToShow) {\n                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;\n                coef = -1\n\n                if (_.options.vertical === true && _.options.centerMode === true) {\n                    if (_.options.slidesToShow === 2) {\n                        coef = -1.5;\n                    } else if (_.options.slidesToShow === 1) {\n                        coef = -2\n                    }\n                }\n                verticalOffset = (verticalHeight * _.options.slidesToShow) * coef;\n            }\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\n                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {\n                    if (slideIndex > _.slideCount) {\n                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;\n                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;\n                    } else {\n                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;\n                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;\n                    }\n                }\n            }\n        } else {\n            if (slideIndex + _.options.slidesToShow > _.slideCount) {\n                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;\n                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;\n            }\n        }\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            _.slideOffset = 0;\n            verticalOffset = 0;\n        }\n\n        if (_.options.centerMode === true && _.slideCount <= _.options.slidesToShow) {\n            _.slideOffset = ((_.slideWidth * Math.floor(_.options.slidesToShow)) / 2) - ((_.slideWidth * _.slideCount) / 2);\n        } else if (_.options.centerMode === true && _.options.infinite === true) {\n            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;\n        } else if (_.options.centerMode === true) {\n            _.slideOffset = 0;\n            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);\n        }\n\n        if (_.options.vertical === false) {\n            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;\n        } else {\n            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;\n        }\n\n        if (_.options.variableWidth === true) {\n\n            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {\n                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);\n            } else {\n                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);\n            }\n\n            if (_.options.rtl === true) {\n                if (targetSlide[0]) {\n                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;\n                } else {\n                    targetLeft =  0;\n                }\n            } else {\n                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;\n            }\n\n            if (_.options.centerMode === true) {\n                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {\n                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);\n                } else {\n                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);\n                }\n\n                if (_.options.rtl === true) {\n                    if (targetSlide[0]) {\n                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;\n                    } else {\n                        targetLeft =  0;\n                    }\n                } else {\n                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;\n                }\n\n                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;\n            }\n        }\n\n        return targetLeft;\n\n    };\n\n    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {\n\n        var _ = this;\n\n        return _.options[option];\n\n    };\n\n    Slick.prototype.getNavigableIndexes = function() {\n\n        var _ = this,\n            breakPoint = 0,\n            counter = 0,\n            indexes = [],\n            max;\n\n        if (_.options.infinite === false) {\n            max = _.slideCount;\n        } else {\n            breakPoint = _.options.slidesToScroll * -1;\n            counter = _.options.slidesToScroll * -1;\n            max = _.slideCount * 2;\n        }\n\n        while (breakPoint < max) {\n            indexes.push(breakPoint);\n            breakPoint = counter + _.options.slidesToScroll;\n            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;\n        }\n\n        return indexes;\n\n    };\n\n    Slick.prototype.getSlick = function() {\n\n        return this;\n\n    };\n\n    Slick.prototype.getSlideCount = function() {\n\n        var _ = this,\n            slidesTraversed, swipedSlide, centerOffset;\n\n        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;\n\n        if (_.options.swipeToSlide === true) {\n            _.$slideTrack.find('.slick-slide').each(function(index, slide) {\n                if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {\n                    swipedSlide = slide;\n                    return false;\n                }\n            });\n\n            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;\n\n            return slidesTraversed;\n\n        } else {\n            return _.options.slidesToScroll;\n        }\n\n    };\n\n    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {\n\n        var _ = this;\n\n        _.changeSlide({\n            data: {\n                message: 'index',\n                index: parseInt(slide)\n            }\n        }, dontAnimate);\n\n    };\n\n    Slick.prototype.init = function(creation) {\n\n        var _ = this;\n\n        if (!$(_.$slider).hasClass('slick-initialized')) {\n\n            $(_.$slider).addClass('slick-initialized');\n\n            _.buildRows();\n            _.buildOut();\n            _.setProps();\n            _.startLoad();\n            _.loadSlider();\n            _.initializeEvents();\n            _.updateArrows();\n            _.updateDots();\n            _.checkResponsive(true);\n            _.focusHandler();\n\n        }\n\n        if (creation) {\n            _.$slider.trigger('init', [_]);\n        }\n\n        if (_.options.accessibility === true) {\n            _.initADA();\n        }\n\n        if ( _.options.autoplay ) {\n\n            _.paused = false;\n            _.autoPlay();\n\n        }\n\n    };\n\n    Slick.prototype.initADA = function() {\n        var _ = this,\n                numDotGroups = Math.ceil(_.slideCount / _.options.slidesToShow),\n                tabControlIndexes = _.getNavigableIndexes().filter(function(val) {\n                    return (val >= 0) && (val < _.slideCount);\n                });\n\n        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({\n            'aria-hidden': 'true',\n            'tabindex': '-1'\n        }).find('a, input, button, select').attr({\n            'tabindex': '-1'\n        });\n\n        if (_.$dots !== null) {\n            _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {\n                var slideControlIndex = tabControlIndexes.indexOf(i);\n\n                $(this).attr({\n                    'role': 'tabpanel',\n                    'id': 'slick-slide' + _.instanceUid + i,\n                    'tabindex': -1\n                });\n\n                if (slideControlIndex !== -1) {\n                   var ariaButtonControl = 'slick-slide-control' + _.instanceUid + slideControlIndex\n                   if ($('#' + ariaButtonControl).length) {\n                     $(this).attr({\n                         'aria-describedby': ariaButtonControl\n                     });\n                   }\n                }\n            });\n\n            _.$dots.attr('role', 'tablist').find('li').each(function(i) {\n                var mappedSlideIndex = tabControlIndexes[i];\n\n                $(this).attr({\n                    'role': 'presentation'\n                });\n\n                $(this).find('button').first().attr({\n                    'role': 'tab',\n                    'id': 'slick-slide-control' + _.instanceUid + i,\n                    'aria-controls': 'slick-slide' + _.instanceUid + mappedSlideIndex,\n                    'aria-label': (i + 1) + ' of ' + numDotGroups,\n                    'aria-selected': null,\n                    'tabindex': '-1'\n                });\n\n            }).eq(_.currentSlide).find('button').attr({\n                'aria-selected': 'true',\n                'tabindex': '0'\n            }).end();\n        }\n\n        for (var i=_.currentSlide, max=i+_.options.slidesToShow; i < max; i++) {\n          if (_.options.focusOnChange) {\n            _.$slides.eq(i).attr({'tabindex': '0'});\n          } else {\n            _.$slides.eq(i).removeAttr('tabindex');\n          }\n        }\n\n        _.activateADA();\n\n    };\n\n    Slick.prototype.initArrowEvents = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n            _.$prevArrow\n               .off('click.slick')\n               .on('click.slick', {\n                    message: 'previous'\n               }, _.changeSlide);\n            _.$nextArrow\n               .off('click.slick')\n               .on('click.slick', {\n                    message: 'next'\n               }, _.changeSlide);\n\n            if (_.options.accessibility === true) {\n                _.$prevArrow.on('keydown.slick', _.keyHandler);\n                _.$nextArrow.on('keydown.slick', _.keyHandler);\n            }\n        }\n\n    };\n\n    Slick.prototype.initDotEvents = function() {\n\n        var _ = this;\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n            $('li', _.$dots).on('click.slick', {\n                message: 'index'\n            }, _.changeSlide);\n\n            if (_.options.accessibility === true) {\n                _.$dots.on('keydown.slick', _.keyHandler);\n            }\n        }\n\n        if (_.options.dots === true && _.options.pauseOnDotsHover === true && _.slideCount > _.options.slidesToShow) {\n\n            $('li', _.$dots)\n                .on('mouseenter.slick', $.proxy(_.interrupt, _, true))\n                .on('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n        }\n\n    };\n\n    Slick.prototype.initSlideEvents = function() {\n\n        var _ = this;\n\n        if ( _.options.pauseOnHover ) {\n\n            _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));\n            _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));\n\n        }\n\n    };\n\n    Slick.prototype.initializeEvents = function() {\n\n        var _ = this;\n\n        _.initArrowEvents();\n\n        _.initDotEvents();\n        _.initSlideEvents();\n\n        _.$list.on('touchstart.slick mousedown.slick', {\n            action: 'start'\n        }, _.swipeHandler);\n        _.$list.on('touchmove.slick mousemove.slick', {\n            action: 'move'\n        }, _.swipeHandler);\n        _.$list.on('touchend.slick mouseup.slick', {\n            action: 'end'\n        }, _.swipeHandler);\n        _.$list.on('touchcancel.slick mouseleave.slick', {\n            action: 'end'\n        }, _.swipeHandler);\n\n        _.$list.on('click.slick', _.clickHandler);\n\n        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));\n\n        if (_.options.accessibility === true) {\n            _.$list.on('keydown.slick', _.keyHandler);\n        }\n\n        if (_.options.focusOnSelect === true) {\n            $(_.$slideTrack).children().on('click.slick', _.selectHandler);\n        }\n\n        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));\n\n        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));\n\n        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);\n\n        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);\n        $(_.setPosition);\n\n    };\n\n    Slick.prototype.initUI = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$prevArrow.show();\n            _.$nextArrow.show();\n\n        }\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$dots.show();\n\n        }\n\n    };\n\n    Slick.prototype.keyHandler = function(event) {\n\n        var _ = this;\n         //Dont slide if the cursor is inside the form fields and arrow keys are pressed\n        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {\n            if (event.keyCode === 37 && _.options.accessibility === true) {\n                _.changeSlide({\n                    data: {\n                        message: _.options.rtl === true ? 'next' :  'previous'\n                    }\n                });\n            } else if (event.keyCode === 39 && _.options.accessibility === true) {\n                _.changeSlide({\n                    data: {\n                        message: _.options.rtl === true ? 'previous' : 'next'\n                    }\n                });\n            }\n        }\n\n    };\n\n    Slick.prototype.lazyLoad = function() {\n\n        var _ = this,\n            loadRange, cloneRange, rangeStart, rangeEnd;\n\n        function loadImages(imagesScope) {\n\n            $('img[data-lazy]', imagesScope).each(function() {\n\n                var image = $(this),\n                    imageSource = $(this).attr('data-lazy'),\n                    imageSrcSet = $(this).attr('data-srcset'),\n                    imageSizes  = $(this).attr('data-sizes') || _.$slider.attr('data-sizes'),\n                    imageToLoad = document.createElement('img');\n\n                imageToLoad.onload = function() {\n\n                    image\n                        .animate({ opacity: 0 }, 100, function() {\n\n                            if (imageSrcSet) {\n                                image\n                                    .attr('srcset', imageSrcSet );\n\n                                if (imageSizes) {\n                                    image\n                                        .attr('sizes', imageSizes );\n                                }\n                            }\n\n                            image\n                                .attr('src', imageSource)\n                                .animate({ opacity: 1 }, 200, function() {\n                                    image\n                                        .removeAttr('data-lazy data-srcset data-sizes')\n                                        .removeClass('slick-loading');\n                                });\n                            _.$slider.trigger('lazyLoaded', [_, image, imageSource]);\n                        });\n\n                };\n\n                imageToLoad.onerror = function() {\n\n                    image\n                        .removeAttr( 'data-lazy' )\n                        .removeClass( 'slick-loading' )\n                        .addClass( 'slick-lazyload-error' );\n\n                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);\n\n                };\n\n                imageToLoad.src = imageSource;\n\n            });\n\n        }\n\n        if (_.options.centerMode === true) {\n            if (_.options.infinite === true) {\n                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);\n                rangeEnd = rangeStart + _.options.slidesToShow + 2;\n            } else {\n                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));\n                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;\n            }\n        } else {\n            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;\n            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);\n            if (_.options.fade === true) {\n                if (rangeStart > 0) rangeStart--;\n                if (rangeEnd <= _.slideCount) rangeEnd++;\n            }\n        }\n\n        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);\n\n        if (_.options.lazyLoad === 'anticipated') {\n            var prevSlide = rangeStart - 1,\n                nextSlide = rangeEnd,\n                $slides = _.$slider.find('.slick-slide');\n\n            for (var i = 0; i < _.options.slidesToScroll; i++) {\n                if (prevSlide < 0) prevSlide = _.slideCount - 1;\n                loadRange = loadRange.add($slides.eq(prevSlide));\n                loadRange = loadRange.add($slides.eq(nextSlide));\n                prevSlide--;\n                nextSlide++;\n            }\n        }\n\n        loadImages(loadRange);\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            cloneRange = _.$slider.find('.slick-slide');\n            loadImages(cloneRange);\n        } else\n        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {\n            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);\n            loadImages(cloneRange);\n        } else if (_.currentSlide === 0) {\n            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);\n            loadImages(cloneRange);\n        }\n\n    };\n\n    Slick.prototype.loadSlider = function() {\n\n        var _ = this;\n\n        _.setPosition();\n\n        _.$slideTrack.css({\n            opacity: 1\n        });\n\n        _.$slider.removeClass('slick-loading');\n\n        _.initUI();\n\n        if (_.options.lazyLoad === 'progressive') {\n            _.progressiveLazyLoad();\n        }\n\n    };\n\n    Slick.prototype.next = Slick.prototype.slickNext = function() {\n\n        var _ = this;\n\n        _.changeSlide({\n            data: {\n                message: 'next'\n            }\n        });\n\n    };\n\n    Slick.prototype.orientationChange = function() {\n\n        var _ = this;\n\n        _.checkResponsive();\n        _.setPosition();\n\n    };\n\n    Slick.prototype.pause = Slick.prototype.slickPause = function() {\n\n        var _ = this;\n\n        _.autoPlayClear();\n        _.paused = true;\n\n    };\n\n    Slick.prototype.play = Slick.prototype.slickPlay = function() {\n\n        var _ = this;\n\n        _.autoPlay();\n        _.options.autoplay = true;\n        _.paused = false;\n        _.focussed = false;\n        _.interrupted = false;\n\n    };\n\n    Slick.prototype.postSlide = function(index) {\n\n        var _ = this;\n\n        if( !_.unslicked ) {\n\n            _.$slider.trigger('afterChange', [_, index]);\n\n            _.animating = false;\n\n            if (_.slideCount > _.options.slidesToShow) {\n                _.setPosition();\n            }\n\n            _.swipeLeft = null;\n\n            if ( _.options.autoplay ) {\n                _.autoPlay();\n            }\n\n            if (_.options.accessibility === true) {\n                _.initADA();\n\n                if (_.options.focusOnChange) {\n                    var $currentSlide = $(_.$slides.get(_.currentSlide));\n                    $currentSlide.attr('tabindex', 0).focus();\n                }\n            }\n\n        }\n\n    };\n\n    Slick.prototype.prev = Slick.prototype.slickPrev = function() {\n\n        var _ = this;\n\n        _.changeSlide({\n            data: {\n                message: 'previous'\n            }\n        });\n\n    };\n\n    Slick.prototype.preventDefault = function(event) {\n\n        event.preventDefault();\n\n    };\n\n    Slick.prototype.progressiveLazyLoad = function( tryCount ) {\n\n        tryCount = tryCount || 1;\n\n        var _ = this,\n            $imgsToLoad = $( 'img[data-lazy]', _.$slider ),\n            image,\n            imageSource,\n            imageSrcSet,\n            imageSizes,\n            imageToLoad;\n\n        if ( $imgsToLoad.length ) {\n\n            image = $imgsToLoad.first();\n            imageSource = image.attr('data-lazy');\n            imageSrcSet = image.attr('data-srcset');\n            imageSizes  = image.attr('data-sizes') || _.$slider.attr('data-sizes');\n            imageToLoad = document.createElement('img');\n\n            imageToLoad.onload = function() {\n\n                if (imageSrcSet) {\n                    image\n                        .attr('srcset', imageSrcSet );\n\n                    if (imageSizes) {\n                        image\n                            .attr('sizes', imageSizes );\n                    }\n                }\n\n                image\n                    .attr( 'src', imageSource )\n                    .removeAttr('data-lazy data-srcset data-sizes')\n                    .removeClass('slick-loading');\n\n                if ( _.options.adaptiveHeight === true ) {\n                    _.setPosition();\n                }\n\n                _.$slider.trigger('lazyLoaded', [ _, image, imageSource ]);\n                _.progressiveLazyLoad();\n\n            };\n\n            imageToLoad.onerror = function() {\n\n                if ( tryCount < 3 ) {\n\n                    /**\n                     * try to load the image 3 times,\n                     * leave a slight delay so we don't get\n                     * servers blocking the request.\n                     */\n                    setTimeout( function() {\n                        _.progressiveLazyLoad( tryCount + 1 );\n                    }, 500 );\n\n                } else {\n\n                    image\n                        .removeAttr( 'data-lazy' )\n                        .removeClass( 'slick-loading' )\n                        .addClass( 'slick-lazyload-error' );\n\n                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);\n\n                    _.progressiveLazyLoad();\n\n                }\n\n            };\n\n            imageToLoad.src = imageSource;\n\n        } else {\n\n            _.$slider.trigger('allImagesLoaded', [ _ ]);\n\n        }\n\n    };\n\n    Slick.prototype.refresh = function( initializing ) {\n\n        var _ = this, currentSlide, lastVisibleIndex;\n\n        lastVisibleIndex = _.slideCount - _.options.slidesToShow;\n\n        // in non-infinite sliders, we don't want to go past the\n        // last visible index.\n        if( !_.options.infinite && ( _.currentSlide > lastVisibleIndex )) {\n            _.currentSlide = lastVisibleIndex;\n        }\n\n        // if less slides than to show, go to start.\n        if ( _.slideCount <= _.options.slidesToShow ) {\n            _.currentSlide = 0;\n\n        }\n\n        currentSlide = _.currentSlide;\n\n        _.destroy(true);\n\n        $.extend(_, _.initials, { currentSlide: currentSlide });\n\n        _.init();\n\n        if( !initializing ) {\n\n            _.changeSlide({\n                data: {\n                    message: 'index',\n                    index: currentSlide\n                }\n            }, false);\n\n        }\n\n    };\n\n    Slick.prototype.registerBreakpoints = function() {\n\n        var _ = this, breakpoint, currentBreakpoint, l,\n            responsiveSettings = _.options.responsive || null;\n\n        if ( $.type(responsiveSettings) === 'array' && responsiveSettings.length ) {\n\n            _.respondTo = _.options.respondTo || 'window';\n\n            for ( breakpoint in responsiveSettings ) {\n\n                l = _.breakpoints.length-1;\n\n                if (responsiveSettings.hasOwnProperty(breakpoint)) {\n                    currentBreakpoint = responsiveSettings[breakpoint].breakpoint;\n\n                    // loop through the breakpoints and cut out any existing\n                    // ones with the same breakpoint number, we don't want dupes.\n                    while( l >= 0 ) {\n                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {\n                            _.breakpoints.splice(l,1);\n                        }\n                        l--;\n                    }\n\n                    _.breakpoints.push(currentBreakpoint);\n                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;\n\n                }\n\n            }\n\n            _.breakpoints.sort(function(a, b) {\n                return ( _.options.mobileFirst ) ? a-b : b-a;\n            });\n\n        }\n\n    };\n\n    Slick.prototype.reinit = function() {\n\n        var _ = this;\n\n        _.$slides =\n            _.$slideTrack\n                .children(_.options.slide)\n                .addClass('slick-slide');\n\n        _.slideCount = _.$slides.length;\n\n        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {\n            _.currentSlide = _.currentSlide - _.options.slidesToScroll;\n        }\n\n        if (_.slideCount <= _.options.slidesToShow) {\n            _.currentSlide = 0;\n        }\n\n        _.registerBreakpoints();\n\n        _.setProps();\n        _.setupInfinite();\n        _.buildArrows();\n        _.updateArrows();\n        _.initArrowEvents();\n        _.buildDots();\n        _.updateDots();\n        _.initDotEvents();\n        _.cleanUpSlideEvents();\n        _.initSlideEvents();\n\n        _.checkResponsive(false, true);\n\n        if (_.options.focusOnSelect === true) {\n            $(_.$slideTrack).children().on('click.slick', _.selectHandler);\n        }\n\n        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);\n\n        _.setPosition();\n        _.focusHandler();\n\n        _.paused = !_.options.autoplay;\n        _.autoPlay();\n\n        _.$slider.trigger('reInit', [_]);\n\n    };\n\n    Slick.prototype.resize = function() {\n\n        var _ = this;\n\n        if ($(window).width() !== _.windowWidth) {\n            clearTimeout(_.windowDelay);\n            _.windowDelay = window.setTimeout(function() {\n                _.windowWidth = $(window).width();\n                _.checkResponsive();\n                if( !_.unslicked ) { _.setPosition(); }\n            }, 50);\n        }\n    };\n\n    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {\n\n        var _ = this;\n\n        if (typeof(index) === 'boolean') {\n            removeBefore = index;\n            index = removeBefore === true ? 0 : _.slideCount - 1;\n        } else {\n            index = removeBefore === true ? --index : index;\n        }\n\n        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {\n            return false;\n        }\n\n        _.unload();\n\n        if (removeAll === true) {\n            _.$slideTrack.children().remove();\n        } else {\n            _.$slideTrack.children(this.options.slide).eq(index).remove();\n        }\n\n        _.$slides = _.$slideTrack.children(this.options.slide);\n\n        _.$slideTrack.children(this.options.slide).detach();\n\n        _.$slideTrack.append(_.$slides);\n\n        _.$slidesCache = _.$slides;\n\n        _.reinit();\n\n    };\n\n    Slick.prototype.setCSS = function(position) {\n\n        var _ = this,\n            positionProps = {},\n            x, y;\n\n        if (_.options.rtl === true) {\n            position = -position;\n        }\n        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';\n        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';\n\n        positionProps[_.positionProp] = position;\n\n        if (_.transformsEnabled === false) {\n            _.$slideTrack.css(positionProps);\n        } else {\n            positionProps = {};\n            if (_.cssTransitions === false) {\n                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';\n                _.$slideTrack.css(positionProps);\n            } else {\n                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';\n                _.$slideTrack.css(positionProps);\n            }\n        }\n\n    };\n\n    Slick.prototype.setDimensions = function() {\n\n        var _ = this;\n\n        if (_.options.vertical === false) {\n            if (_.options.centerMode === true) {\n                _.$list.css({\n                    padding: ('0px ' + _.options.centerPadding)\n                });\n            }\n        } else {\n            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);\n            if (_.options.centerMode === true) {\n                _.$list.css({\n                    padding: (_.options.centerPadding + ' 0px')\n                });\n            }\n        }\n\n        _.listWidth = _.$list.width();\n        _.listHeight = _.$list.height();\n\n\n        if (_.options.vertical === false && _.options.variableWidth === false) {\n            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);\n            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));\n\n        } else if (_.options.variableWidth === true) {\n            _.$slideTrack.width(5000 * _.slideCount);\n        } else {\n            _.slideWidth = Math.ceil(_.listWidth);\n            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));\n        }\n\n        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();\n        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);\n\n    };\n\n    Slick.prototype.setFade = function() {\n\n        var _ = this,\n            targetLeft;\n\n        _.$slides.each(function(index, element) {\n            targetLeft = (_.slideWidth * index) * -1;\n            if (_.options.rtl === true) {\n                $(element).css({\n                    position: 'relative',\n                    right: targetLeft,\n                    top: 0,\n                    zIndex: _.options.zIndex - 2,\n                    opacity: 0\n                });\n            } else {\n                $(element).css({\n                    position: 'relative',\n                    left: targetLeft,\n                    top: 0,\n                    zIndex: _.options.zIndex - 2,\n                    opacity: 0\n                });\n            }\n        });\n\n        _.$slides.eq(_.currentSlide).css({\n            zIndex: _.options.zIndex - 1,\n            opacity: 1\n        });\n\n    };\n\n    Slick.prototype.setHeight = function() {\n\n        var _ = this;\n\n        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {\n            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);\n            _.$list.css('height', targetHeight);\n        }\n\n    };\n\n    Slick.prototype.setOption =\n    Slick.prototype.slickSetOption = function() {\n\n        /**\n         * accepts arguments in format of:\n         *\n         *  - for changing a single option's value:\n         *     .slick(\"setOption\", option, value, refresh )\n         *\n         *  - for changing a set of responsive options:\n         *     .slick(\"setOption\", 'responsive', [{}, ...], refresh )\n         *\n         *  - for updating multiple values at once (not responsive)\n         *     .slick(\"setOption\", { 'option': value, ... }, refresh )\n         */\n\n        var _ = this, l, item, option, value, refresh = false, type;\n\n        if( $.type( arguments[0] ) === 'object' ) {\n\n            option =  arguments[0];\n            refresh = arguments[1];\n            type = 'multiple';\n\n        } else if ( $.type( arguments[0] ) === 'string' ) {\n\n            option =  arguments[0];\n            value = arguments[1];\n            refresh = arguments[2];\n\n            if ( arguments[0] === 'responsive' && $.type( arguments[1] ) === 'array' ) {\n\n                type = 'responsive';\n\n            } else if ( typeof arguments[1] !== 'undefined' ) {\n\n                type = 'single';\n\n            }\n\n        }\n\n        if ( type === 'single' ) {\n\n            _.options[option] = value;\n\n\n        } else if ( type === 'multiple' ) {\n\n            $.each( option , function( opt, val ) {\n\n                _.options[opt] = val;\n\n            });\n\n\n        } else if ( type === 'responsive' ) {\n\n            for ( item in value ) {\n\n                if( $.type( _.options.responsive ) !== 'array' ) {\n\n                    _.options.responsive = [ value[item] ];\n\n                } else {\n\n                    l = _.options.responsive.length-1;\n\n                    // loop through the responsive object and splice out duplicates.\n                    while( l >= 0 ) {\n\n                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {\n\n                            _.options.responsive.splice(l,1);\n\n                        }\n\n                        l--;\n\n                    }\n\n                    _.options.responsive.push( value[item] );\n\n                }\n\n            }\n\n        }\n\n        if ( refresh ) {\n\n            _.unload();\n            _.reinit();\n\n        }\n\n    };\n\n    Slick.prototype.setPosition = function() {\n\n        var _ = this;\n\n        _.setDimensions();\n\n        _.setHeight();\n\n        if (_.options.fade === false) {\n            _.setCSS(_.getLeft(_.currentSlide));\n        } else {\n            _.setFade();\n        }\n\n        _.$slider.trigger('setPosition', [_]);\n\n    };\n\n    Slick.prototype.setProps = function() {\n\n        var _ = this,\n            bodyStyle = document.body.style;\n\n        _.positionProp = _.options.vertical === true ? 'top' : 'left';\n\n        if (_.positionProp === 'top') {\n            _.$slider.addClass('slick-vertical');\n        } else {\n            _.$slider.removeClass('slick-vertical');\n        }\n\n        if (bodyStyle.WebkitTransition !== undefined ||\n            bodyStyle.MozTransition !== undefined ||\n            bodyStyle.msTransition !== undefined) {\n            if (_.options.useCSS === true) {\n                _.cssTransitions = true;\n            }\n        }\n\n        if ( _.options.fade ) {\n            if ( typeof _.options.zIndex === 'number' ) {\n                if( _.options.zIndex < 3 ) {\n                    _.options.zIndex = 3;\n                }\n            } else {\n                _.options.zIndex = _.defaults.zIndex;\n            }\n        }\n\n        if (bodyStyle.OTransform !== undefined) {\n            _.animType = 'OTransform';\n            _.transformType = '-o-transform';\n            _.transitionType = 'OTransition';\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;\n        }\n        if (bodyStyle.MozTransform !== undefined) {\n            _.animType = 'MozTransform';\n            _.transformType = '-moz-transform';\n            _.transitionType = 'MozTransition';\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;\n        }\n        if (bodyStyle.webkitTransform !== undefined) {\n            _.animType = 'webkitTransform';\n            _.transformType = '-webkit-transform';\n            _.transitionType = 'webkitTransition';\n            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;\n        }\n        if (bodyStyle.msTransform !== undefined) {\n            _.animType = 'msTransform';\n            _.transformType = '-ms-transform';\n            _.transitionType = 'msTransition';\n            if (bodyStyle.msTransform === undefined) _.animType = false;\n        }\n        if (bodyStyle.transform !== undefined && _.animType !== false) {\n            _.animType = 'transform';\n            _.transformType = 'transform';\n            _.transitionType = 'transition';\n        }\n        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);\n    };\n\n\n    Slick.prototype.setSlideClasses = function(index) {\n\n        var _ = this,\n            centerOffset, allSlides, indexOffset, remainder;\n\n        allSlides = _.$slider\n            .find('.slick-slide')\n            .removeClass('slick-active slick-center slick-current')\n            .attr('aria-hidden', 'true');\n\n        _.$slides\n            .eq(index)\n            .addClass('slick-current');\n\n        if (_.options.centerMode === true) {\n\n            var evenCoef = _.options.slidesToShow % 2 === 0 ? 1 : 0;\n\n            centerOffset = Math.floor(_.options.slidesToShow / 2);\n\n            if (_.options.infinite === true) {\n\n                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {\n                    _.$slides\n                        .slice(index - centerOffset + evenCoef, index + centerOffset + 1)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                } else {\n\n                    indexOffset = _.options.slidesToShow + index;\n                    allSlides\n                        .slice(indexOffset - centerOffset + 1 + evenCoef, indexOffset + centerOffset + 2)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                }\n\n                if (index === 0) {\n\n                    allSlides\n                        .eq(allSlides.length - 1 - _.options.slidesToShow)\n                        .addClass('slick-center');\n\n                } else if (index === _.slideCount - 1) {\n\n                    allSlides\n                        .eq(_.options.slidesToShow)\n                        .addClass('slick-center');\n\n                }\n\n            }\n\n            _.$slides\n                .eq(index)\n                .addClass('slick-center');\n\n        } else {\n\n            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {\n\n                _.$slides\n                    .slice(index, index + _.options.slidesToShow)\n                    .addClass('slick-active')\n                    .attr('aria-hidden', 'false');\n\n            } else if (allSlides.length <= _.options.slidesToShow) {\n\n                allSlides\n                    .addClass('slick-active')\n                    .attr('aria-hidden', 'false');\n\n            } else {\n\n                remainder = _.slideCount % _.options.slidesToShow;\n                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;\n\n                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {\n\n                    allSlides\n                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                } else {\n\n                    allSlides\n                        .slice(indexOffset, indexOffset + _.options.slidesToShow)\n                        .addClass('slick-active')\n                        .attr('aria-hidden', 'false');\n\n                }\n\n            }\n\n        }\n\n        if (_.options.lazyLoad === 'ondemand' || _.options.lazyLoad === 'anticipated') {\n            _.lazyLoad();\n        }\n    };\n\n    Slick.prototype.setupInfinite = function() {\n\n        var _ = this,\n            i, slideIndex, infiniteCount;\n\n        if (_.options.fade === true) {\n            _.options.centerMode = false;\n        }\n\n        if (_.options.infinite === true && _.options.fade === false) {\n\n            slideIndex = null;\n\n            if (_.slideCount > _.options.slidesToShow) {\n\n                if (_.options.centerMode === true) {\n                    infiniteCount = _.options.slidesToShow + 1;\n                } else {\n                    infiniteCount = _.options.slidesToShow;\n                }\n\n                for (i = _.slideCount; i > (_.slideCount -\n                        infiniteCount); i -= 1) {\n                    slideIndex = i - 1;\n                    $(_.$slides[slideIndex]).clone(true).attr('id', '')\n                        .attr('data-slick-index', slideIndex - _.slideCount)\n                        .prependTo(_.$slideTrack).addClass('slick-cloned');\n                }\n                for (i = 0; i < infiniteCount  + _.slideCount; i += 1) {\n                    slideIndex = i;\n                    $(_.$slides[slideIndex]).clone(true).attr('id', '')\n                        .attr('data-slick-index', slideIndex + _.slideCount)\n                        .appendTo(_.$slideTrack).addClass('slick-cloned');\n                }\n                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {\n                    $(this).attr('id', '');\n                });\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.interrupt = function( toggle ) {\n\n        var _ = this;\n\n        if( !toggle ) {\n            _.autoPlay();\n        }\n        _.interrupted = toggle;\n\n    };\n\n    Slick.prototype.selectHandler = function(event) {\n\n        var _ = this;\n\n        var targetElement =\n            $(event.target).is('.slick-slide') ?\n                $(event.target) :\n                $(event.target).parents('.slick-slide');\n\n        var index = parseInt(targetElement.attr('data-slick-index'));\n\n        if (!index) index = 0;\n\n        if (_.slideCount <= _.options.slidesToShow) {\n\n            _.slideHandler(index, false, true);\n            return;\n\n        }\n\n        _.slideHandler(index);\n\n    };\n\n    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {\n\n        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,\n            _ = this, navTarget;\n\n        sync = sync || false;\n\n        if (_.animating === true && _.options.waitForAnimate === true) {\n            return;\n        }\n\n        if (_.options.fade === true && _.currentSlide === index) {\n            return;\n        }\n\n        if (sync === false) {\n            _.asNavFor(index);\n        }\n\n        targetSlide = index;\n        targetLeft = _.getLeft(targetSlide);\n        slideLeft = _.getLeft(_.currentSlide);\n\n        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;\n\n        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {\n            if (_.options.fade === false) {\n                targetSlide = _.currentSlide;\n                if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {\n                    _.animateSlide(slideLeft, function() {\n                        _.postSlide(targetSlide);\n                    });\n                } else {\n                    _.postSlide(targetSlide);\n                }\n            }\n            return;\n        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {\n            if (_.options.fade === false) {\n                targetSlide = _.currentSlide;\n                if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {\n                    _.animateSlide(slideLeft, function() {\n                        _.postSlide(targetSlide);\n                    });\n                } else {\n                    _.postSlide(targetSlide);\n                }\n            }\n            return;\n        }\n\n        if ( _.options.autoplay ) {\n            clearInterval(_.autoPlayTimer);\n        }\n\n        if (targetSlide < 0) {\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\n                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);\n            } else {\n                animSlide = _.slideCount + targetSlide;\n            }\n        } else if (targetSlide >= _.slideCount) {\n            if (_.slideCount % _.options.slidesToScroll !== 0) {\n                animSlide = 0;\n            } else {\n                animSlide = targetSlide - _.slideCount;\n            }\n        } else {\n            animSlide = targetSlide;\n        }\n\n        _.animating = true;\n\n        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);\n\n        oldSlide = _.currentSlide;\n        _.currentSlide = animSlide;\n\n        _.setSlideClasses(_.currentSlide);\n\n        if ( _.options.asNavFor ) {\n\n            navTarget = _.getNavTarget();\n            navTarget = navTarget.slick('getSlick');\n\n            if ( navTarget.slideCount <= navTarget.options.slidesToShow ) {\n                navTarget.setSlideClasses(_.currentSlide);\n            }\n\n        }\n\n        _.updateDots();\n        _.updateArrows();\n\n        if (_.options.fade === true) {\n            if (dontAnimate !== true) {\n\n                _.fadeSlideOut(oldSlide);\n\n                _.fadeSlide(animSlide, function() {\n                    _.postSlide(animSlide);\n                });\n\n            } else {\n                _.postSlide(animSlide);\n            }\n            _.animateHeight();\n            return;\n        }\n\n        if (dontAnimate !== true && _.slideCount > _.options.slidesToShow) {\n            _.animateSlide(targetLeft, function() {\n                _.postSlide(animSlide);\n            });\n        } else {\n            _.postSlide(animSlide);\n        }\n\n    };\n\n    Slick.prototype.startLoad = function() {\n\n        var _ = this;\n\n        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$prevArrow.hide();\n            _.$nextArrow.hide();\n\n        }\n\n        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {\n\n            _.$dots.hide();\n\n        }\n\n        _.$slider.addClass('slick-loading');\n\n    };\n\n    Slick.prototype.swipeDirection = function() {\n\n        var xDist, yDist, r, swipeAngle, _ = this;\n\n        xDist = _.touchObject.startX - _.touchObject.curX;\n        yDist = _.touchObject.startY - _.touchObject.curY;\n        r = Math.atan2(yDist, xDist);\n\n        swipeAngle = Math.round(r * 180 / Math.PI);\n        if (swipeAngle < 0) {\n            swipeAngle = 360 - Math.abs(swipeAngle);\n        }\n\n        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {\n            return (_.options.rtl === false ? 'left' : 'right');\n        }\n        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {\n            return (_.options.rtl === false ? 'left' : 'right');\n        }\n        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {\n            return (_.options.rtl === false ? 'right' : 'left');\n        }\n        if (_.options.verticalSwiping === true) {\n            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {\n                return 'down';\n            } else {\n                return 'up';\n            }\n        }\n\n        return 'vertical';\n\n    };\n\n    Slick.prototype.swipeEnd = function(event) {\n\n        var _ = this,\n            slideCount,\n            direction;\n\n        _.dragging = false;\n        _.swiping = false;\n\n        if (_.scrolling) {\n            _.scrolling = false;\n            return false;\n        }\n\n        _.interrupted = false;\n        _.shouldClick = ( _.touchObject.swipeLength > 10 ) ? false : true;\n\n        if ( _.touchObject.curX === undefined ) {\n            return false;\n        }\n\n        if ( _.touchObject.edgeHit === true ) {\n            _.$slider.trigger('edge', [_, _.swipeDirection() ]);\n        }\n\n        if ( _.touchObject.swipeLength >= _.touchObject.minSwipe ) {\n\n            direction = _.swipeDirection();\n\n            switch ( direction ) {\n\n                case 'left':\n                case 'down':\n\n                    slideCount =\n                        _.options.swipeToSlide ?\n                            _.checkNavigable( _.currentSlide + _.getSlideCount() ) :\n                            _.currentSlide + _.getSlideCount();\n\n                    _.currentDirection = 0;\n\n                    break;\n\n                case 'right':\n                case 'up':\n\n                    slideCount =\n                        _.options.swipeToSlide ?\n                            _.checkNavigable( _.currentSlide - _.getSlideCount() ) :\n                            _.currentSlide - _.getSlideCount();\n\n                    _.currentDirection = 1;\n\n                    break;\n\n                default:\n\n\n            }\n\n            if( direction != 'vertical' ) {\n\n                _.slideHandler( slideCount );\n                _.touchObject = {};\n                _.$slider.trigger('swipe', [_, direction ]);\n\n            }\n\n        } else {\n\n            if ( _.touchObject.startX !== _.touchObject.curX ) {\n\n                _.slideHandler( _.currentSlide );\n                _.touchObject = {};\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.swipeHandler = function(event) {\n\n        var _ = this;\n\n        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {\n            return;\n        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {\n            return;\n        }\n\n        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?\n            event.originalEvent.touches.length : 1;\n\n        _.touchObject.minSwipe = _.listWidth / _.options\n            .touchThreshold;\n\n        if (_.options.verticalSwiping === true) {\n            _.touchObject.minSwipe = _.listHeight / _.options\n                .touchThreshold;\n        }\n\n        switch (event.data.action) {\n\n            case 'start':\n                _.swipeStart(event);\n                break;\n\n            case 'move':\n                _.swipeMove(event);\n                break;\n\n            case 'end':\n                _.swipeEnd(event);\n                break;\n\n        }\n\n    };\n\n    Slick.prototype.swipeMove = function(event) {\n\n        var _ = this,\n            edgeWasHit = false,\n            curLeft, swipeDirection, swipeLength, positionOffset, touches, verticalSwipeLength;\n\n        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;\n\n        if (!_.dragging || _.scrolling || touches && touches.length !== 1) {\n            return false;\n        }\n\n        curLeft = _.getLeft(_.currentSlide);\n\n        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;\n        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;\n\n        _.touchObject.swipeLength = Math.round(Math.sqrt(\n            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));\n\n        verticalSwipeLength = Math.round(Math.sqrt(\n            Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));\n\n        if (!_.options.verticalSwiping && !_.swiping && verticalSwipeLength > 4) {\n            _.scrolling = true;\n            return false;\n        }\n\n        if (_.options.verticalSwiping === true) {\n            _.touchObject.swipeLength = verticalSwipeLength;\n        }\n\n        swipeDirection = _.swipeDirection();\n\n        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {\n            _.swiping = true;\n            event.preventDefault();\n        }\n\n        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);\n        if (_.options.verticalSwiping === true) {\n            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;\n        }\n\n\n        swipeLength = _.touchObject.swipeLength;\n\n        _.touchObject.edgeHit = false;\n\n        if (_.options.infinite === false) {\n            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {\n                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;\n                _.touchObject.edgeHit = true;\n            }\n        }\n\n        if (_.options.vertical === false) {\n            _.swipeLeft = curLeft + swipeLength * positionOffset;\n        } else {\n            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;\n        }\n        if (_.options.verticalSwiping === true) {\n            _.swipeLeft = curLeft + swipeLength * positionOffset;\n        }\n\n        if (_.options.fade === true || _.options.touchMove === false) {\n            return false;\n        }\n\n        if (_.animating === true) {\n            _.swipeLeft = null;\n            return false;\n        }\n\n        _.setCSS(_.swipeLeft);\n\n    };\n\n    Slick.prototype.swipeStart = function(event) {\n\n        var _ = this,\n            touches;\n\n        _.interrupted = true;\n\n        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {\n            _.touchObject = {};\n            return false;\n        }\n\n        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {\n            touches = event.originalEvent.touches[0];\n        }\n\n        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;\n        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;\n\n        _.dragging = true;\n\n    };\n\n    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {\n\n        var _ = this;\n\n        if (_.$slidesCache !== null) {\n\n            _.unload();\n\n            _.$slideTrack.children(this.options.slide).detach();\n\n            _.$slidesCache.appendTo(_.$slideTrack);\n\n            _.reinit();\n\n        }\n\n    };\n\n    Slick.prototype.unload = function() {\n\n        var _ = this;\n\n        $('.slick-cloned', _.$slider).remove();\n\n        if (_.$dots) {\n            _.$dots.remove();\n        }\n\n        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {\n            _.$prevArrow.remove();\n        }\n\n        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {\n            _.$nextArrow.remove();\n        }\n\n        _.$slides\n            .removeClass('slick-slide slick-active slick-visible slick-current')\n            .attr('aria-hidden', 'true')\n            .css('width', '');\n\n    };\n\n    Slick.prototype.unslick = function(fromBreakpoint) {\n\n        var _ = this;\n        _.$slider.trigger('unslick', [_, fromBreakpoint]);\n        _.destroy();\n\n    };\n\n    Slick.prototype.updateArrows = function() {\n\n        var _ = this,\n            centerOffset;\n\n        centerOffset = Math.floor(_.options.slidesToShow / 2);\n\n        if ( _.options.arrows === true &&\n            _.slideCount > _.options.slidesToShow &&\n            !_.options.infinite ) {\n\n            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            if (_.currentSlide === 0) {\n\n                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\n                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {\n\n                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\n                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {\n\n                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');\n                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');\n\n            }\n\n        }\n\n    };\n\n    Slick.prototype.updateDots = function() {\n\n        var _ = this;\n\n        if (_.$dots !== null) {\n\n            _.$dots\n                .find('li')\n                    .removeClass('slick-active')\n                    .end();\n\n            _.$dots\n                .find('li')\n                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))\n                .addClass('slick-active');\n\n        }\n\n    };\n\n    Slick.prototype.visibility = function() {\n\n        var _ = this;\n\n        if ( _.options.autoplay ) {\n\n            if ( document[_.hidden] ) {\n\n                _.interrupted = true;\n\n            } else {\n\n                _.interrupted = false;\n\n            }\n\n        }\n\n    };\n\n    $.fn.slick = function() {\n        var _ = this,\n            opt = arguments[0],\n            args = Array.prototype.slice.call(arguments, 1),\n            l = _.length,\n            i,\n            ret;\n        for (i = 0; i < l; i++) {\n            if (typeof opt == 'object' || typeof opt == 'undefined')\n                _[i].slick = new Slick(_[i], opt);\n            else\n                ret = _[i].slick[opt].apply(_[i].slick, args);\n            if (typeof ret != 'undefined') return ret;\n        }\n        return _;\n    };\n\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkxNTQuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxRQUFRLElBQTBDO0FBQ2xELFFBQVEsaUNBQU8sQ0FBQywwQkFBUSxDQUFDLG9DQUFFLE9BQU87QUFBQTtBQUFBO0FBQUEsa0dBQUM7QUFDbkMsTUFBTSxLQUFLLEVBSU47O0FBRUwsQ0FBQztBQUNEO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLG1DQUFtQzs7QUFFbkM7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7O0FBRUE7O0FBRUEsMEJBQTBCO0FBQzFCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBLFVBQVU7O0FBRVY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakIsY0FBYzs7QUFFZDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7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O0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCOztBQUVqQjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGFBQWE7O0FBRWIsVUFBVTs7QUFFVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYixVQUFVOztBQUVWOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsYUFBYTs7QUFFYixTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFD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Q0E7QUFDQTs7QUFFQSw0QkFBNEIsOEJBQThCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7O0FBRXJCLGtCQUFrQjs7QUFFbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsVUFBVTs7QUFFVjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7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RUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixVQUFVO0FBQ1Y7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxVQUFVOztBQUVWOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLGNBQWM7O0FBRWQ7QUFDQTs7QUFFQSxjQUFjOztBQUVkO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsY0FBYzs7QUFFZDs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dwLy4vbm9kZV9tb2R1bGVzL3NsaWNrLWNhcm91c2VsL3NsaWNrL3NsaWNrLmpzPzY1ZTgiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgICAgXyBfICAgICAgXyAgICAgICBfXG4gX19ffCAoXykgX19ffCB8IF9fICAoXylfX19cbi8gX198IHwgfC8gX198IHwvIC8gIHwgLyBfX3xcblxcX18gXFwgfCB8IChfX3wgICA8IF8gfCBcXF9fIFxcXG58X19fL198X3xcXF9fX3xffFxcXyhfKS8gfF9fXy9cbiAgICAgICAgICAgICAgICAgICB8X18vXG5cbiBWZXJzaW9uOiAxLjguMVxuICBBdXRob3I6IEtlbiBXaGVlbGVyXG4gV2Vic2l0ZTogaHR0cDovL2tlbndoZWVsZXIuZ2l0aHViLmlvXG4gICAgRG9jczogaHR0cDovL2tlbndoZWVsZXIuZ2l0aHViLmlvL3NsaWNrXG4gICAgUmVwbzogaHR0cDovL2dpdGh1Yi5jb20va2Vud2hlZWxlci9zbGlja1xuICBJc3N1ZXM6IGh0dHA6Ly9naXRodWIuY29tL2tlbndoZWVsZXIvc2xpY2svaXNzdWVzXG5cbiAqL1xuLyogZ2xvYmFsIHdpbmRvdywgZG9jdW1lbnQsIGRlZmluZSwgalF1ZXJ5LCBzZXRJbnRlcnZhbCwgY2xlYXJJbnRlcnZhbCAqL1xuOyhmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xuICAgIH1cblxufShmdW5jdGlvbigkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciBTbGljayA9IHdpbmRvdy5TbGljayB8fCB7fTtcblxuICAgIFNsaWNrID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBpbnN0YW5jZVVpZCA9IDA7XG5cbiAgICAgICAgZnVuY3Rpb24gU2xpY2soZWxlbWVudCwgc2V0dGluZ3MpIHtcblxuICAgICAgICAgICAgdmFyIF8gPSB0aGlzLCBkYXRhU2V0dGluZ3M7XG5cbiAgICAgICAgICAgIF8uZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgYWNjZXNzaWJpbGl0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogZmFsc2UsXG4gICAgICAgICAgICAgICAgYXBwZW5kQXJyb3dzOiAkKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGFwcGVuZERvdHM6ICQoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgYXJyb3dzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGFzTmF2Rm9yOiBudWxsLFxuICAgICAgICAgICAgICAgIHByZXZBcnJvdzogJzxidXR0b24gY2xhc3M9XCJzbGljay1wcmV2XCIgYXJpYS1sYWJlbD1cIlByZXZpb3VzXCIgdHlwZT1cImJ1dHRvblwiPlByZXZpb3VzPC9idXR0b24+JyxcbiAgICAgICAgICAgICAgICBuZXh0QXJyb3c6ICc8YnV0dG9uIGNsYXNzPVwic2xpY2stbmV4dFwiIGFyaWEtbGFiZWw9XCJOZXh0XCIgdHlwZT1cImJ1dHRvblwiPk5leHQ8L2J1dHRvbj4nLFxuICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiAzMDAwLFxuICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNlbnRlclBhZGRpbmc6ICc1MHB4JyxcbiAgICAgICAgICAgICAgICBjc3NFYXNlOiAnZWFzZScsXG4gICAgICAgICAgICAgICAgY3VzdG9tUGFnaW5nOiBmdW5jdGlvbihzbGlkZXIsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoJzxidXR0b24gdHlwZT1cImJ1dHRvblwiIC8+JykudGV4dChpICsgMSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBkb3RzQ2xhc3M6ICdzbGljay1kb3RzJyxcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICAgICAgICAgICAgICBlZGdlRnJpY3Rpb246IDAuMzUsXG4gICAgICAgICAgICAgICAgZmFkZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZm9jdXNPblNlbGVjdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgZm9jdXNPbkNoYW5nZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgaW5pdGlhbFNsaWRlOiAwLFxuICAgICAgICAgICAgICAgIGxhenlMb2FkOiAnb25kZW1hbmQnLFxuICAgICAgICAgICAgICAgIG1vYmlsZUZpcnN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwYXVzZU9uSG92ZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgcGF1c2VPbkZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHBhdXNlT25Eb3RzSG92ZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHJlc3BvbmRUbzogJ3dpbmRvdycsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2l2ZTogbnVsbCxcbiAgICAgICAgICAgICAgICByb3dzOiAxLFxuICAgICAgICAgICAgICAgIHJ0bDogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2xpZGU6ICcnLFxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclJvdzogMSxcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgICAgICAgICAgICAgc3BlZWQ6IDUwMCxcbiAgICAgICAgICAgICAgICBzd2lwZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzd2lwZVRvU2xpZGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHRvdWNoTW92ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB0b3VjaFRocmVzaG9sZDogNSxcbiAgICAgICAgICAgICAgICB1c2VDU1M6IHRydWUsXG4gICAgICAgICAgICAgICAgdXNlVHJhbnNmb3JtOiB0cnVlLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHZlcnRpY2FsOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbFN3aXBpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdhaXRGb3JBbmltYXRlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHpJbmRleDogMTAwMFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgXy5pbml0aWFscyA9IHtcbiAgICAgICAgICAgICAgICBhbmltYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGRyYWdnaW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhdXRvUGxheVRpbWVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGN1cnJlbnREaXJlY3Rpb246IDAsXG4gICAgICAgICAgICAgICAgY3VycmVudExlZnQ6IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFNsaWRlOiAwLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogMSxcbiAgICAgICAgICAgICAgICAkZG90czogbnVsbCxcbiAgICAgICAgICAgICAgICBsaXN0V2lkdGg6IG51bGwsXG4gICAgICAgICAgICAgICAgbGlzdEhlaWdodDogbnVsbCxcbiAgICAgICAgICAgICAgICBsb2FkSW5kZXg6IDAsXG4gICAgICAgICAgICAgICAgJG5leHRBcnJvdzogbnVsbCxcbiAgICAgICAgICAgICAgICAkcHJldkFycm93OiBudWxsLFxuICAgICAgICAgICAgICAgIHNjcm9sbGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2xpZGVDb3VudDogbnVsbCxcbiAgICAgICAgICAgICAgICBzbGlkZVdpZHRoOiBudWxsLFxuICAgICAgICAgICAgICAgICRzbGlkZVRyYWNrOiBudWxsLFxuICAgICAgICAgICAgICAgICRzbGlkZXM6IG51bGwsXG4gICAgICAgICAgICAgICAgc2xpZGluZzogZmFsc2UsXG4gICAgICAgICAgICAgICAgc2xpZGVPZmZzZXQ6IDAsXG4gICAgICAgICAgICAgICAgc3dpcGVMZWZ0OiBudWxsLFxuICAgICAgICAgICAgICAgIHN3aXBpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICRsaXN0OiBudWxsLFxuICAgICAgICAgICAgICAgIHRvdWNoT2JqZWN0OiB7fSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1zRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgdW5zbGlja2VkOiBmYWxzZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgJC5leHRlbmQoXywgXy5pbml0aWFscyk7XG5cbiAgICAgICAgICAgIF8uYWN0aXZlQnJlYWtwb2ludCA9IG51bGw7XG4gICAgICAgICAgICBfLmFuaW1UeXBlID0gbnVsbDtcbiAgICAgICAgICAgIF8uYW5pbVByb3AgPSBudWxsO1xuICAgICAgICAgICAgXy5icmVha3BvaW50cyA9IFtdO1xuICAgICAgICAgICAgXy5icmVha3BvaW50U2V0dGluZ3MgPSBbXTtcbiAgICAgICAgICAgIF8uY3NzVHJhbnNpdGlvbnMgPSBmYWxzZTtcbiAgICAgICAgICAgIF8uZm9jdXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF8uaW50ZXJydXB0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIF8uaGlkZGVuID0gJ2hpZGRlbic7XG4gICAgICAgICAgICBfLnBhdXNlZCA9IHRydWU7XG4gICAgICAgICAgICBfLnBvc2l0aW9uUHJvcCA9IG51bGw7XG4gICAgICAgICAgICBfLnJlc3BvbmRUbyA9IG51bGw7XG4gICAgICAgICAgICBfLnJvd0NvdW50ID0gMTtcbiAgICAgICAgICAgIF8uc2hvdWxkQ2xpY2sgPSB0cnVlO1xuICAgICAgICAgICAgXy4kc2xpZGVyID0gJChlbGVtZW50KTtcbiAgICAgICAgICAgIF8uJHNsaWRlc0NhY2hlID0gbnVsbDtcbiAgICAgICAgICAgIF8udHJhbnNmb3JtVHlwZSA9IG51bGw7XG4gICAgICAgICAgICBfLnRyYW5zaXRpb25UeXBlID0gbnVsbDtcbiAgICAgICAgICAgIF8udmlzaWJpbGl0eUNoYW5nZSA9ICd2aXNpYmlsaXR5Y2hhbmdlJztcbiAgICAgICAgICAgIF8ud2luZG93V2lkdGggPSAwO1xuICAgICAgICAgICAgXy53aW5kb3dUaW1lciA9IG51bGw7XG5cbiAgICAgICAgICAgIGRhdGFTZXR0aW5ncyA9ICQoZWxlbWVudCkuZGF0YSgnc2xpY2snKSB8fCB7fTtcblxuICAgICAgICAgICAgXy5vcHRpb25zID0gJC5leHRlbmQoe30sIF8uZGVmYXVsdHMsIHNldHRpbmdzLCBkYXRhU2V0dGluZ3MpO1xuXG4gICAgICAgICAgICBfLmN1cnJlbnRTbGlkZSA9IF8ub3B0aW9ucy5pbml0aWFsU2xpZGU7XG5cbiAgICAgICAgICAgIF8ub3JpZ2luYWxTZXR0aW5ncyA9IF8ub3B0aW9ucztcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5tb3pIaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgXy5oaWRkZW4gPSAnbW96SGlkZGVuJztcbiAgICAgICAgICAgICAgICBfLnZpc2liaWxpdHlDaGFuZ2UgPSAnbW96dmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC53ZWJraXRIaWRkZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgXy5oaWRkZW4gPSAnd2Via2l0SGlkZGVuJztcbiAgICAgICAgICAgICAgICBfLnZpc2liaWxpdHlDaGFuZ2UgPSAnd2Via2l0dmlzaWJpbGl0eWNoYW5nZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF8uYXV0b1BsYXkgPSAkLnByb3h5KF8uYXV0b1BsYXksIF8pO1xuICAgICAgICAgICAgXy5hdXRvUGxheUNsZWFyID0gJC5wcm94eShfLmF1dG9QbGF5Q2xlYXIsIF8pO1xuICAgICAgICAgICAgXy5hdXRvUGxheUl0ZXJhdG9yID0gJC5wcm94eShfLmF1dG9QbGF5SXRlcmF0b3IsIF8pO1xuICAgICAgICAgICAgXy5jaGFuZ2VTbGlkZSA9ICQucHJveHkoXy5jaGFuZ2VTbGlkZSwgXyk7XG4gICAgICAgICAgICBfLmNsaWNrSGFuZGxlciA9ICQucHJveHkoXy5jbGlja0hhbmRsZXIsIF8pO1xuICAgICAgICAgICAgXy5zZWxlY3RIYW5kbGVyID0gJC5wcm94eShfLnNlbGVjdEhhbmRsZXIsIF8pO1xuICAgICAgICAgICAgXy5zZXRQb3NpdGlvbiA9ICQucHJveHkoXy5zZXRQb3NpdGlvbiwgXyk7XG4gICAgICAgICAgICBfLnN3aXBlSGFuZGxlciA9ICQucHJveHkoXy5zd2lwZUhhbmRsZXIsIF8pO1xuICAgICAgICAgICAgXy5kcmFnSGFuZGxlciA9ICQucHJveHkoXy5kcmFnSGFuZGxlciwgXyk7XG4gICAgICAgICAgICBfLmtleUhhbmRsZXIgPSAkLnByb3h5KF8ua2V5SGFuZGxlciwgXyk7XG5cbiAgICAgICAgICAgIF8uaW5zdGFuY2VVaWQgPSBpbnN0YW5jZVVpZCsrO1xuXG4gICAgICAgICAgICAvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuICAgICAgICAgICAgLy8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKG11c3Qgc3RhcnQgd2l0aCA8KVxuICAgICAgICAgICAgLy8gRXh0cmFjdGVkIGZyb20galF1ZXJ5IHYxLjExIHNvdXJjZVxuICAgICAgICAgICAgXy5odG1sRXhwciA9IC9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKikkLztcblxuXG4gICAgICAgICAgICBfLnJlZ2lzdGVyQnJlYWtwb2ludHMoKTtcbiAgICAgICAgICAgIF8uaW5pdCh0cnVlKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFNsaWNrO1xuXG4gICAgfSgpKTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5hY3RpdmF0ZUFEQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgXy4kc2xpZGVUcmFjay5maW5kKCcuc2xpY2stYWN0aXZlJykuYXR0cih7XG4gICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAnZmFsc2UnXG4gICAgICAgIH0pLmZpbmQoJ2EsIGlucHV0LCBidXR0b24sIHNlbGVjdCcpLmF0dHIoe1xuICAgICAgICAgICAgJ3RhYmluZGV4JzogJzAnXG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5hZGRTbGlkZSA9IFNsaWNrLnByb3RvdHlwZS5zbGlja0FkZCA9IGZ1bmN0aW9uKG1hcmt1cCwgaW5kZXgsIGFkZEJlZm9yZSkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAodHlwZW9mKGluZGV4KSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICBhZGRCZWZvcmUgPSBpbmRleDtcbiAgICAgICAgICAgIGluZGV4ID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIGlmIChpbmRleCA8IDAgfHwgKGluZGV4ID49IF8uc2xpZGVDb3VudCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8udW5sb2FkKCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZihpbmRleCkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDAgJiYgXy4kc2xpZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQobWFya3VwKS5hcHBlbmRUbyhfLiRzbGlkZVRyYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkQmVmb3JlKSB7XG4gICAgICAgICAgICAgICAgJChtYXJrdXApLmluc2VydEJlZm9yZShfLiRzbGlkZXMuZXEoaW5kZXgpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChtYXJrdXApLmluc2VydEFmdGVyKF8uJHNsaWRlcy5lcShpbmRleCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGFkZEJlZm9yZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICQobWFya3VwKS5wcmVwZW5kVG8oXy4kc2xpZGVUcmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQobWFya3VwKS5hcHBlbmRUbyhfLiRzbGlkZVRyYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF8uJHNsaWRlcyA9IF8uJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKTtcblxuICAgICAgICBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCk7XG5cbiAgICAgICAgXy4kc2xpZGVUcmFjay5hcHBlbmQoXy4kc2xpZGVzKTtcblxuICAgICAgICBfLiRzbGlkZXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgJChlbGVtZW50KS5hdHRyKCdkYXRhLXNsaWNrLWluZGV4JywgaW5kZXgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBfLiRzbGlkZXNDYWNoZSA9IF8uJHNsaWRlcztcblxuICAgICAgICBfLnJlaW5pdCgpO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5hbmltYXRlSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfID0gdGhpcztcbiAgICAgICAgaWYgKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgPT09IDEgJiYgXy5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0ID09PSB0cnVlICYmIF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRIZWlnaHQgPSBfLiRzbGlkZXMuZXEoXy5jdXJyZW50U2xpZGUpLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgXy4kbGlzdC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRhcmdldEhlaWdodFxuICAgICAgICAgICAgfSwgXy5vcHRpb25zLnNwZWVkKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuYW5pbWF0ZVNsaWRlID0gZnVuY3Rpb24odGFyZ2V0TGVmdCwgY2FsbGJhY2spIHtcblxuICAgICAgICB2YXIgYW5pbVByb3BzID0ge30sXG4gICAgICAgICAgICBfID0gdGhpcztcblxuICAgICAgICBfLmFuaW1hdGVIZWlnaHQoKTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSAmJiBfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0YXJnZXRMZWZ0ID0gLXRhcmdldExlZnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF8udHJhbnNmb3Jtc0VuYWJsZWQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRhcmdldExlZnRcbiAgICAgICAgICAgICAgICB9LCBfLm9wdGlvbnMuc3BlZWQsIF8ub3B0aW9ucy5lYXNpbmcsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0YXJnZXRMZWZ0XG4gICAgICAgICAgICAgICAgfSwgXy5vcHRpb25zLnNwZWVkLCBfLm9wdGlvbnMuZWFzaW5nLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgaWYgKF8uY3NzVHJhbnNpdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5ydGwgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50TGVmdCA9IC0oXy5jdXJyZW50TGVmdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoe1xuICAgICAgICAgICAgICAgICAgICBhbmltU3RhcnQ6IF8uY3VycmVudExlZnRcbiAgICAgICAgICAgICAgICB9KS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbVN0YXJ0OiB0YXJnZXRMZWZ0XG4gICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogXy5vcHRpb25zLnNwZWVkLFxuICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IF8ub3B0aW9ucy5lYXNpbmcsXG4gICAgICAgICAgICAgICAgICAgIHN0ZXA6IGZ1bmN0aW9uKG5vdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm93ID0gTWF0aC5jZWlsKG5vdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1Qcm9wc1tfLmFuaW1UeXBlXSA9ICd0cmFuc2xhdGUoJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyArICdweCwgMHB4KSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MoYW5pbVByb3BzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbVByb3BzW18uYW5pbVR5cGVdID0gJ3RyYW5zbGF0ZSgwcHgsJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdyArICdweCknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKGFuaW1Qcm9wcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgXy5hcHBseVRyYW5zaXRpb24oKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gTWF0aC5jZWlsKHRhcmdldExlZnQpO1xuXG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYW5pbVByb3BzW18uYW5pbVR5cGVdID0gJ3RyYW5zbGF0ZTNkKCcgKyB0YXJnZXRMZWZ0ICsgJ3B4LCAwcHgsIDBweCknO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1Qcm9wc1tfLmFuaW1UeXBlXSA9ICd0cmFuc2xhdGUzZCgwcHgsJyArIHRhcmdldExlZnQgKyAncHgsIDBweCknO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNzcyhhbmltUHJvcHMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZGlzYWJsZVRyYW5zaXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCgpO1xuICAgICAgICAgICAgICAgICAgICB9LCBfLm9wdGlvbnMuc3BlZWQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuZ2V0TmF2VGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgYXNOYXZGb3IgPSBfLm9wdGlvbnMuYXNOYXZGb3I7XG5cbiAgICAgICAgaWYgKCBhc05hdkZvciAmJiBhc05hdkZvciAhPT0gbnVsbCApIHtcbiAgICAgICAgICAgIGFzTmF2Rm9yID0gJChhc05hdkZvcikubm90KF8uJHNsaWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYXNOYXZGb3I7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmFzTmF2Rm9yID0gZnVuY3Rpb24oaW5kZXgpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBhc05hdkZvciA9IF8uZ2V0TmF2VGFyZ2V0KCk7XG5cbiAgICAgICAgaWYgKCBhc05hdkZvciAhPT0gbnVsbCAmJiB0eXBlb2YgYXNOYXZGb3IgPT09ICdvYmplY3QnICkge1xuICAgICAgICAgICAgYXNOYXZGb3IuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5zbGljaygnZ2V0U2xpY2snKTtcbiAgICAgICAgICAgICAgICBpZighdGFyZ2V0LnVuc2xpY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc2xpZGVIYW5kbGVyKGluZGV4LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5hcHBseVRyYW5zaXRpb24gPSBmdW5jdGlvbihzbGlkZSkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcyxcbiAgICAgICAgICAgIHRyYW5zaXRpb24gPSB7fTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmZhZGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0cmFuc2l0aW9uW18udHJhbnNpdGlvblR5cGVdID0gXy50cmFuc2Zvcm1UeXBlICsgJyAnICsgXy5vcHRpb25zLnNwZWVkICsgJ21zICcgKyBfLm9wdGlvbnMuY3NzRWFzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb25bXy50cmFuc2l0aW9uVHlwZV0gPSAnb3BhY2l0eSAnICsgXy5vcHRpb25zLnNwZWVkICsgJ21zICcgKyBfLm9wdGlvbnMuY3NzRWFzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZmFkZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKHRyYW5zaXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXy4kc2xpZGVzLmVxKHNsaWRlKS5jc3ModHJhbnNpdGlvbik7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuYXV0b1BsYXkgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgXy5hdXRvUGxheUNsZWFyKCk7XG5cbiAgICAgICAgaWYgKCBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICkge1xuICAgICAgICAgICAgXy5hdXRvUGxheVRpbWVyID0gc2V0SW50ZXJ2YWwoIF8uYXV0b1BsYXlJdGVyYXRvciwgXy5vcHRpb25zLmF1dG9wbGF5U3BlZWQgKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5hdXRvUGxheUNsZWFyID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmIChfLmF1dG9QbGF5VGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoXy5hdXRvUGxheVRpbWVyKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5hdXRvUGxheUl0ZXJhdG9yID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgc2xpZGVUbyA9IF8uY3VycmVudFNsaWRlICsgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xuXG4gICAgICAgIGlmICggIV8ucGF1c2VkICYmICFfLmludGVycnVwdGVkICYmICFfLmZvY3Vzc2VkICkge1xuXG4gICAgICAgICAgICBpZiAoIF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gZmFsc2UgKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIF8uZGlyZWN0aW9uID09PSAxICYmICggXy5jdXJyZW50U2xpZGUgKyAxICkgPT09ICggXy5zbGlkZUNvdW50IC0gMSApKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZGlyZWN0aW9uID0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbHNlIGlmICggXy5kaXJlY3Rpb24gPT09IDAgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc2xpZGVUbyA9IF8uY3VycmVudFNsaWRlIC0gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggXy5jdXJyZW50U2xpZGUgLSAxID09PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5kaXJlY3Rpb24gPSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy5zbGlkZUhhbmRsZXIoIHNsaWRlVG8gKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmJ1aWxkQXJyb3dzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYXJyb3dzID09PSB0cnVlICkge1xuXG4gICAgICAgICAgICBfLiRwcmV2QXJyb3cgPSAkKF8ub3B0aW9ucy5wcmV2QXJyb3cpLmFkZENsYXNzKCdzbGljay1hcnJvdycpO1xuICAgICAgICAgICAgXy4kbmV4dEFycm93ID0gJChfLm9wdGlvbnMubmV4dEFycm93KS5hZGRDbGFzcygnc2xpY2stYXJyb3cnKTtcblxuICAgICAgICAgICAgaWYoIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKSB7XG5cbiAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cucmVtb3ZlQ2xhc3MoJ3NsaWNrLWhpZGRlbicpLnJlbW92ZUF0dHIoJ2FyaWEtaGlkZGVuIHRhYmluZGV4Jyk7XG4gICAgICAgICAgICAgICAgXy4kbmV4dEFycm93LnJlbW92ZUNsYXNzKCdzbGljay1oaWRkZW4nKS5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbiB0YWJpbmRleCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKF8uaHRtbEV4cHIudGVzdChfLm9wdGlvbnMucHJldkFycm93KSkge1xuICAgICAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cucHJlcGVuZFRvKF8ub3B0aW9ucy5hcHBlbmRBcnJvd3MpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChfLmh0bWxFeHByLnRlc3QoXy5vcHRpb25zLm5leHRBcnJvdykpIHtcbiAgICAgICAgICAgICAgICAgICAgXy4kbmV4dEFycm93LmFwcGVuZFRvKF8ub3B0aW9ucy5hcHBlbmRBcnJvd3MpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgXy4kcHJldkFycm93XG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWRpc2FibGVkJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cuYWRkKCBfLiRuZXh0QXJyb3cgKVxuXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2staGlkZGVuJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiAndHJ1ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndGFiaW5kZXgnOiAnLTEnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5idWlsZERvdHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBpLCBkb3Q7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5kb3RzID09PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcblxuICAgICAgICAgICAgXy4kc2xpZGVyLmFkZENsYXNzKCdzbGljay1kb3R0ZWQnKTtcblxuICAgICAgICAgICAgZG90ID0gJCgnPHVsIC8+JykuYWRkQ2xhc3MoXy5vcHRpb25zLmRvdHNDbGFzcyk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPD0gXy5nZXREb3RDb3VudCgpOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBkb3QuYXBwZW5kKCQoJzxsaSAvPicpLmFwcGVuZChfLm9wdGlvbnMuY3VzdG9tUGFnaW5nLmNhbGwodGhpcywgXywgaSkpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy4kZG90cyA9IGRvdC5hcHBlbmRUbyhfLm9wdGlvbnMuYXBwZW5kRG90cyk7XG5cbiAgICAgICAgICAgIF8uJGRvdHMuZmluZCgnbGknKS5maXJzdCgpLmFkZENsYXNzKCdzbGljay1hY3RpdmUnKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmJ1aWxkT3V0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uJHNsaWRlcyA9XG4gICAgICAgICAgICBfLiRzbGlkZXJcbiAgICAgICAgICAgICAgICAuY2hpbGRyZW4oIF8ub3B0aW9ucy5zbGlkZSArICc6bm90KC5zbGljay1jbG9uZWQpJylcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLXNsaWRlJyk7XG5cbiAgICAgICAgXy5zbGlkZUNvdW50ID0gXy4kc2xpZGVzLmxlbmd0aDtcblxuICAgICAgICBfLiRzbGlkZXMuZWFjaChmdW5jdGlvbihpbmRleCwgZWxlbWVudCkge1xuICAgICAgICAgICAgJChlbGVtZW50KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLXNsaWNrLWluZGV4JywgaW5kZXgpXG4gICAgICAgICAgICAgICAgLmRhdGEoJ29yaWdpbmFsU3R5bGluZycsICQoZWxlbWVudCkuYXR0cignc3R5bGUnKSB8fCAnJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF8uJHNsaWRlci5hZGRDbGFzcygnc2xpY2stc2xpZGVyJyk7XG5cbiAgICAgICAgXy4kc2xpZGVUcmFjayA9IChfLnNsaWRlQ291bnQgPT09IDApID9cbiAgICAgICAgICAgICQoJzxkaXYgY2xhc3M9XCJzbGljay10cmFja1wiLz4nKS5hcHBlbmRUbyhfLiRzbGlkZXIpIDpcbiAgICAgICAgICAgIF8uJHNsaWRlcy53cmFwQWxsKCc8ZGl2IGNsYXNzPVwic2xpY2stdHJhY2tcIi8+JykucGFyZW50KCk7XG5cbiAgICAgICAgXy4kbGlzdCA9IF8uJHNsaWRlVHJhY2sud3JhcChcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2xpY2stbGlzdFwiLz4nKS5wYXJlbnQoKTtcbiAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MoJ29wYWNpdHknLCAwKTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUgfHwgXy5vcHRpb25zLnN3aXBlVG9TbGlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJ2ltZ1tkYXRhLWxhenldJywgXy4kc2xpZGVyKS5ub3QoJ1tzcmNdJykuYWRkQ2xhc3MoJ3NsaWNrLWxvYWRpbmcnKTtcblxuICAgICAgICBfLnNldHVwSW5maW5pdGUoKTtcblxuICAgICAgICBfLmJ1aWxkQXJyb3dzKCk7XG5cbiAgICAgICAgXy5idWlsZERvdHMoKTtcblxuICAgICAgICBfLnVwZGF0ZURvdHMoKTtcblxuXG4gICAgICAgIF8uc2V0U2xpZGVDbGFzc2VzKHR5cGVvZiBfLmN1cnJlbnRTbGlkZSA9PT0gJ251bWJlcicgPyBfLmN1cnJlbnRTbGlkZSA6IDApO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZHJhZ2dhYmxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLiRsaXN0LmFkZENsYXNzKCdkcmFnZ2FibGUnKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5idWlsZFJvd3MgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsIGEsIGIsIGMsIG5ld1NsaWRlcywgbnVtT2ZTbGlkZXMsIG9yaWdpbmFsU2xpZGVzLHNsaWRlc1BlclNlY3Rpb247XG5cbiAgICAgICAgbmV3U2xpZGVzID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBvcmlnaW5hbFNsaWRlcyA9IF8uJHNsaWRlci5jaGlsZHJlbigpO1xuXG4gICAgICAgIGlmKF8ub3B0aW9ucy5yb3dzID4gMCkge1xuXG4gICAgICAgICAgICBzbGlkZXNQZXJTZWN0aW9uID0gXy5vcHRpb25zLnNsaWRlc1BlclJvdyAqIF8ub3B0aW9ucy5yb3dzO1xuICAgICAgICAgICAgbnVtT2ZTbGlkZXMgPSBNYXRoLmNlaWwoXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxTbGlkZXMubGVuZ3RoIC8gc2xpZGVzUGVyU2VjdGlvblxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZm9yKGEgPSAwOyBhIDwgbnVtT2ZTbGlkZXM7IGErKyl7XG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgZm9yKGIgPSAwOyBiIDwgXy5vcHRpb25zLnJvd3M7IGIrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIGZvcihjID0gMDsgYyA8IF8ub3B0aW9ucy5zbGlkZXNQZXJSb3c7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IChhICogc2xpZGVzUGVyU2VjdGlvbiArICgoYiAqIF8ub3B0aW9ucy5zbGlkZXNQZXJSb3cpICsgYykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsU2xpZGVzLmdldCh0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKG9yaWdpbmFsU2xpZGVzLmdldCh0YXJnZXQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzbGlkZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZXdTbGlkZXMuYXBwZW5kQ2hpbGQoc2xpZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfLiRzbGlkZXIuZW1wdHkoKS5hcHBlbmQobmV3U2xpZGVzKTtcbiAgICAgICAgICAgIF8uJHNsaWRlci5jaGlsZHJlbigpLmNoaWxkcmVuKCkuY2hpbGRyZW4oKVxuICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOigxMDAgLyBfLm9wdGlvbnMuc2xpZGVzUGVyUm93KSArICclJyxcbiAgICAgICAgICAgICAgICAgICAgJ2Rpc3BsYXknOiAnaW5saW5lLWJsb2NrJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuY2hlY2tSZXNwb25zaXZlID0gZnVuY3Rpb24oaW5pdGlhbCwgZm9yY2VVcGRhdGUpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBicmVha3BvaW50LCB0YXJnZXRCcmVha3BvaW50LCByZXNwb25kVG9XaWR0aCwgdHJpZ2dlckJyZWFrcG9pbnQgPSBmYWxzZTtcbiAgICAgICAgdmFyIHNsaWRlcldpZHRoID0gXy4kc2xpZGVyLndpZHRoKCk7XG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8ICQod2luZG93KS53aWR0aCgpO1xuXG4gICAgICAgIGlmIChfLnJlc3BvbmRUbyA9PT0gJ3dpbmRvdycpIHtcbiAgICAgICAgICAgIHJlc3BvbmRUb1dpZHRoID0gd2luZG93V2lkdGg7XG4gICAgICAgIH0gZWxzZSBpZiAoXy5yZXNwb25kVG8gPT09ICdzbGlkZXInKSB7XG4gICAgICAgICAgICByZXNwb25kVG9XaWR0aCA9IHNsaWRlcldpZHRoO1xuICAgICAgICB9IGVsc2UgaWYgKF8ucmVzcG9uZFRvID09PSAnbWluJykge1xuICAgICAgICAgICAgcmVzcG9uZFRvV2lkdGggPSBNYXRoLm1pbih3aW5kb3dXaWR0aCwgc2xpZGVyV2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBfLm9wdGlvbnMucmVzcG9uc2l2ZSAmJlxuICAgICAgICAgICAgXy5vcHRpb25zLnJlc3BvbnNpdmUubGVuZ3RoICYmXG4gICAgICAgICAgICBfLm9wdGlvbnMucmVzcG9uc2l2ZSAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICB0YXJnZXRCcmVha3BvaW50ID0gbnVsbDtcblxuICAgICAgICAgICAgZm9yIChicmVha3BvaW50IGluIF8uYnJlYWtwb2ludHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5icmVha3BvaW50cy5oYXNPd25Qcm9wZXJ0eShicmVha3BvaW50KSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXy5vcmlnaW5hbFNldHRpbmdzLm1vYmlsZUZpcnN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRUb1dpZHRoIDwgXy5icmVha3BvaW50c1ticmVha3BvaW50XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJyZWFrcG9pbnQgPSBfLmJyZWFrcG9pbnRzW2JyZWFrcG9pbnRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbmRUb1dpZHRoID4gXy5icmVha3BvaW50c1ticmVha3BvaW50XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJyZWFrcG9pbnQgPSBfLmJyZWFrcG9pbnRzW2JyZWFrcG9pbnRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGFyZ2V0QnJlYWtwb2ludCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChfLmFjdGl2ZUJyZWFrcG9pbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEJyZWFrcG9pbnQgIT09IF8uYWN0aXZlQnJlYWtwb2ludCB8fCBmb3JjZVVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5hY3RpdmVCcmVha3BvaW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRCcmVha3BvaW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uYnJlYWtwb2ludFNldHRpbmdzW3RhcmdldEJyZWFrcG9pbnRdID09PSAndW5zbGljaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLnVuc2xpY2sodGFyZ2V0QnJlYWtwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBfLm9yaWdpbmFsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uYnJlYWtwb2ludFNldHRpbmdzW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QnJlYWtwb2ludF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uY3VycmVudFNsaWRlID0gXy5vcHRpb25zLmluaXRpYWxTbGlkZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5yZWZyZXNoKGluaXRpYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckJyZWFrcG9pbnQgPSB0YXJnZXRCcmVha3BvaW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgXy5hY3RpdmVCcmVha3BvaW50ID0gdGFyZ2V0QnJlYWtwb2ludDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uYnJlYWtwb2ludFNldHRpbmdzW3RhcmdldEJyZWFrcG9pbnRdID09PSAndW5zbGljaycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8udW5zbGljayh0YXJnZXRCcmVha3BvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBfLm9yaWdpbmFsU2V0dGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5icmVha3BvaW50U2V0dGluZ3NbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJyZWFrcG9pbnRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbml0aWFsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgPSBfLm9wdGlvbnMuaW5pdGlhbFNsaWRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXy5yZWZyZXNoKGluaXRpYWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJCcmVha3BvaW50ID0gdGFyZ2V0QnJlYWtwb2ludDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChfLmFjdGl2ZUJyZWFrcG9pbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5hY3RpdmVCcmVha3BvaW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgXy5vcHRpb25zID0gXy5vcmlnaW5hbFNldHRpbmdzO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgPSBfLm9wdGlvbnMuaW5pdGlhbFNsaWRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF8ucmVmcmVzaChpbml0aWFsKTtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckJyZWFrcG9pbnQgPSB0YXJnZXRCcmVha3BvaW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb25seSB0cmlnZ2VyIGJyZWFrcG9pbnRzIGR1cmluZyBhbiBhY3R1YWwgYnJlYWsuIG5vdCBvbiBpbml0aWFsaXplLlxuICAgICAgICAgICAgaWYoICFpbml0aWFsICYmIHRyaWdnZXJCcmVha3BvaW50ICE9PSBmYWxzZSApIHtcbiAgICAgICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignYnJlYWtwb2ludCcsIFtfLCB0cmlnZ2VyQnJlYWtwb2ludF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmNoYW5nZVNsaWRlID0gZnVuY3Rpb24oZXZlbnQsIGRvbnRBbmltYXRlKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgJHRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCksXG4gICAgICAgICAgICBpbmRleE9mZnNldCwgc2xpZGVPZmZzZXQsIHVuZXZlbk9mZnNldDtcblxuICAgICAgICAvLyBJZiB0YXJnZXQgaXMgYSBsaW5rLCBwcmV2ZW50IGRlZmF1bHQgYWN0aW9uLlxuICAgICAgICBpZigkdGFyZ2V0LmlzKCdhJykpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0YXJnZXQgaXMgbm90IHRoZSA8bGk+IGVsZW1lbnQgKGllOiBhIGNoaWxkKSwgZmluZCB0aGUgPGxpPi5cbiAgICAgICAgaWYoISR0YXJnZXQuaXMoJ2xpJykpIHtcbiAgICAgICAgICAgICR0YXJnZXQgPSAkdGFyZ2V0LmNsb3Nlc3QoJ2xpJyk7XG4gICAgICAgIH1cblxuICAgICAgICB1bmV2ZW5PZmZzZXQgPSAoXy5zbGlkZUNvdW50ICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsICE9PSAwKTtcbiAgICAgICAgaW5kZXhPZmZzZXQgPSB1bmV2ZW5PZmZzZXQgPyAwIDogKF8uc2xpZGVDb3VudCAtIF8uY3VycmVudFNsaWRlKSAlIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRhdGEubWVzc2FnZSkge1xuXG4gICAgICAgICAgICBjYXNlICdwcmV2aW91cyc6XG4gICAgICAgICAgICAgICAgc2xpZGVPZmZzZXQgPSBpbmRleE9mZnNldCA9PT0gMCA/IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA6IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLSBpbmRleE9mZnNldDtcbiAgICAgICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuICAgICAgICAgICAgICAgICAgICBfLnNsaWRlSGFuZGxlcihfLmN1cnJlbnRTbGlkZSAtIHNsaWRlT2Zmc2V0LCBmYWxzZSwgZG9udEFuaW1hdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnbmV4dCc6XG4gICAgICAgICAgICAgICAgc2xpZGVPZmZzZXQgPSBpbmRleE9mZnNldCA9PT0gMCA/IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA6IGluZGV4T2Zmc2V0O1xuICAgICAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICAgICAgICAgIF8uc2xpZGVIYW5kbGVyKF8uY3VycmVudFNsaWRlICsgc2xpZGVPZmZzZXQsIGZhbHNlLCBkb250QW5pbWF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdpbmRleCc6XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZXZlbnQuZGF0YS5pbmRleCA9PT0gMCA/IDAgOlxuICAgICAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4IHx8ICR0YXJnZXQuaW5kZXgoKSAqIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcblxuICAgICAgICAgICAgICAgIF8uc2xpZGVIYW5kbGVyKF8uY2hlY2tOYXZpZ2FibGUoaW5kZXgpLCBmYWxzZSwgZG9udEFuaW1hdGUpO1xuICAgICAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oKS50cmlnZ2VyKCdmb2N1cycpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5jaGVja05hdmlnYWJsZSA9IGZ1bmN0aW9uKGluZGV4KSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgbmF2aWdhYmxlcywgcHJldk5hdmlnYWJsZTtcblxuICAgICAgICBuYXZpZ2FibGVzID0gXy5nZXROYXZpZ2FibGVJbmRleGVzKCk7XG4gICAgICAgIHByZXZOYXZpZ2FibGUgPSAwO1xuICAgICAgICBpZiAoaW5kZXggPiBuYXZpZ2FibGVzW25hdmlnYWJsZXMubGVuZ3RoIC0gMV0pIHtcbiAgICAgICAgICAgIGluZGV4ID0gbmF2aWdhYmxlc1tuYXZpZ2FibGVzLmxlbmd0aCAtIDFdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBuYXZpZ2FibGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgbmF2aWdhYmxlc1tuXSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHByZXZOYXZpZ2FibGU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcmV2TmF2aWdhYmxlID0gbmF2aWdhYmxlc1tuXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmNsZWFuVXBFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5kb3RzICYmIF8uJGRvdHMgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgJCgnbGknLCBfLiRkb3RzKVxuICAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrLnNsaWNrJywgXy5jaGFuZ2VTbGlkZSlcbiAgICAgICAgICAgICAgICAub2ZmKCdtb3VzZWVudGVyLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgdHJ1ZSkpXG4gICAgICAgICAgICAgICAgLm9mZignbW91c2VsZWF2ZS5zbGljaycsICQucHJveHkoXy5pbnRlcnJ1cHQsIF8sIGZhbHNlKSk7XG5cbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIF8uJGRvdHMub2ZmKCdrZXlkb3duLnNsaWNrJywgXy5rZXlIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF8uJHNsaWRlci5vZmYoJ2ZvY3VzLnNsaWNrIGJsdXIuc2xpY2snKTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmFycm93cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICBfLiRwcmV2QXJyb3cgJiYgXy4kcHJldkFycm93Lm9mZignY2xpY2suc2xpY2snLCBfLmNoYW5nZVNsaWRlKTtcbiAgICAgICAgICAgIF8uJG5leHRBcnJvdyAmJiBfLiRuZXh0QXJyb3cub2ZmKCdjbGljay5zbGljaycsIF8uY2hhbmdlU2xpZGUpO1xuXG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfLiRwcmV2QXJyb3cgJiYgXy4kcHJldkFycm93Lm9mZigna2V5ZG93bi5zbGljaycsIF8ua2V5SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgXy4kbmV4dEFycm93ICYmIF8uJG5leHRBcnJvdy5vZmYoJ2tleWRvd24uc2xpY2snLCBfLmtleUhhbmRsZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgXy4kbGlzdC5vZmYoJ3RvdWNoc3RhcnQuc2xpY2sgbW91c2Vkb3duLnNsaWNrJywgXy5zd2lwZUhhbmRsZXIpO1xuICAgICAgICBfLiRsaXN0Lm9mZigndG91Y2htb3ZlLnNsaWNrIG1vdXNlbW92ZS5zbGljaycsIF8uc3dpcGVIYW5kbGVyKTtcbiAgICAgICAgXy4kbGlzdC5vZmYoJ3RvdWNoZW5kLnNsaWNrIG1vdXNldXAuc2xpY2snLCBfLnN3aXBlSGFuZGxlcik7XG4gICAgICAgIF8uJGxpc3Qub2ZmKCd0b3VjaGNhbmNlbC5zbGljayBtb3VzZWxlYXZlLnNsaWNrJywgXy5zd2lwZUhhbmRsZXIpO1xuXG4gICAgICAgIF8uJGxpc3Qub2ZmKCdjbGljay5zbGljaycsIF8uY2xpY2tIYW5kbGVyKTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoXy52aXNpYmlsaXR5Q2hhbmdlLCBfLnZpc2liaWxpdHkpO1xuXG4gICAgICAgIF8uY2xlYW5VcFNsaWRlRXZlbnRzKCk7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLiRsaXN0Lm9mZigna2V5ZG93bi5zbGljaycsIF8ua2V5SGFuZGxlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5vcHRpb25zLmZvY3VzT25TZWxlY3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgICQoXy4kc2xpZGVUcmFjaykuY2hpbGRyZW4oKS5vZmYoJ2NsaWNrLnNsaWNrJywgXy5zZWxlY3RIYW5kbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQod2luZG93KS5vZmYoJ29yaWVudGF0aW9uY2hhbmdlLnNsaWNrLnNsaWNrLScgKyBfLmluc3RhbmNlVWlkLCBfLm9yaWVudGF0aW9uQ2hhbmdlKTtcblxuICAgICAgICAkKHdpbmRvdykub2ZmKCdyZXNpemUuc2xpY2suc2xpY2stJyArIF8uaW5zdGFuY2VVaWQsIF8ucmVzaXplKTtcblxuICAgICAgICAkKCdbZHJhZ2dhYmxlIT10cnVlXScsIF8uJHNsaWRlVHJhY2spLm9mZignZHJhZ3N0YXJ0JywgXy5wcmV2ZW50RGVmYXVsdCk7XG5cbiAgICAgICAgJCh3aW5kb3cpLm9mZignbG9hZC5zbGljay5zbGljay0nICsgXy5pbnN0YW5jZVVpZCwgXy5zZXRQb3NpdGlvbik7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmNsZWFuVXBTbGlkZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBfLiRsaXN0Lm9mZignbW91c2VlbnRlci5zbGljaycsICQucHJveHkoXy5pbnRlcnJ1cHQsIF8sIHRydWUpKTtcbiAgICAgICAgXy4kbGlzdC5vZmYoJ21vdXNlbGVhdmUuc2xpY2snLCAkLnByb3h5KF8uaW50ZXJydXB0LCBfLCBmYWxzZSkpO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5jbGVhblVwUm93cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcywgb3JpZ2luYWxTbGlkZXM7XG5cbiAgICAgICAgaWYoXy5vcHRpb25zLnJvd3MgPiAwKSB7XG4gICAgICAgICAgICBvcmlnaW5hbFNsaWRlcyA9IF8uJHNsaWRlcy5jaGlsZHJlbigpLmNoaWxkcmVuKCk7XG4gICAgICAgICAgICBvcmlnaW5hbFNsaWRlcy5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgXy4kc2xpZGVyLmVtcHR5KCkuYXBwZW5kKG9yaWdpbmFsU2xpZGVzKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5jbGlja0hhbmRsZXIgPSBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoXy5zaG91bGRDbGljayA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbihyZWZyZXNoKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uYXV0b1BsYXlDbGVhcigpO1xuXG4gICAgICAgIF8udG91Y2hPYmplY3QgPSB7fTtcblxuICAgICAgICBfLmNsZWFuVXBFdmVudHMoKTtcblxuICAgICAgICAkKCcuc2xpY2stY2xvbmVkJywgXy4kc2xpZGVyKS5kZXRhY2goKTtcblxuICAgICAgICBpZiAoXy4kZG90cykge1xuICAgICAgICAgICAgXy4kZG90cy5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggXy4kcHJldkFycm93ICYmIF8uJHByZXZBcnJvdy5sZW5ndGggKSB7XG5cbiAgICAgICAgICAgIF8uJHByZXZBcnJvd1xuICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnc2xpY2stZGlzYWJsZWQgc2xpY2stYXJyb3cgc2xpY2staGlkZGVuJylcbiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignYXJpYS1oaWRkZW4gYXJpYS1kaXNhYmxlZCB0YWJpbmRleCcpXG4gICAgICAgICAgICAgICAgLmNzcygnZGlzcGxheScsJycpO1xuXG4gICAgICAgICAgICBpZiAoIF8uaHRtbEV4cHIudGVzdCggXy5vcHRpb25zLnByZXZBcnJvdyApKSB7XG4gICAgICAgICAgICAgICAgXy4kcHJldkFycm93LnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBfLiRuZXh0QXJyb3cgJiYgXy4kbmV4dEFycm93Lmxlbmd0aCApIHtcblxuICAgICAgICAgICAgXy4kbmV4dEFycm93XG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1kaXNhYmxlZCBzbGljay1hcnJvdyBzbGljay1oaWRkZW4nKVxuICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdhcmlhLWhpZGRlbiBhcmlhLWRpc2FibGVkIHRhYmluZGV4JylcbiAgICAgICAgICAgICAgICAuY3NzKCdkaXNwbGF5JywnJyk7XG5cbiAgICAgICAgICAgIGlmICggXy5odG1sRXhwci50ZXN0KCBfLm9wdGlvbnMubmV4dEFycm93ICkpIHtcbiAgICAgICAgICAgICAgICBfLiRuZXh0QXJyb3cucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChfLiRzbGlkZXMpIHtcblxuICAgICAgICAgICAgXy4kc2xpZGVzXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1zbGlkZSBzbGljay1hY3RpdmUgc2xpY2stY2VudGVyIHNsaWNrLXZpc2libGUgc2xpY2stY3VycmVudCcpXG4gICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2FyaWEtaGlkZGVuJylcbiAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cignZGF0YS1zbGljay1pbmRleCcpXG4gICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdzdHlsZScsICQodGhpcykuZGF0YSgnb3JpZ2luYWxTdHlsaW5nJykpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZGV0YWNoKCk7XG5cbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suZGV0YWNoKCk7XG5cbiAgICAgICAgICAgIF8uJGxpc3QuZGV0YWNoKCk7XG5cbiAgICAgICAgICAgIF8uJHNsaWRlci5hcHBlbmQoXy4kc2xpZGVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8uY2xlYW5VcFJvd3MoKTtcblxuICAgICAgICBfLiRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3NsaWNrLXNsaWRlcicpO1xuICAgICAgICBfLiRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJyk7XG4gICAgICAgIF8uJHNsaWRlci5yZW1vdmVDbGFzcygnc2xpY2stZG90dGVkJyk7XG5cbiAgICAgICAgXy51bnNsaWNrZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmKCFyZWZyZXNoKSB7XG4gICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignZGVzdHJveScsIFtfXSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuZGlzYWJsZVRyYW5zaXRpb24gPSBmdW5jdGlvbihzbGlkZSkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcyxcbiAgICAgICAgICAgIHRyYW5zaXRpb24gPSB7fTtcblxuICAgICAgICB0cmFuc2l0aW9uW18udHJhbnNpdGlvblR5cGVdID0gJyc7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jc3ModHJhbnNpdGlvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfLiRzbGlkZXMuZXEoc2xpZGUpLmNzcyh0cmFuc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5mYWRlU2xpZGUgPSBmdW5jdGlvbihzbGlkZUluZGV4LCBjYWxsYmFjaykge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoXy5jc3NUcmFuc2l0aW9ucyA9PT0gZmFsc2UpIHtcblxuICAgICAgICAgICAgXy4kc2xpZGVzLmVxKHNsaWRlSW5kZXgpLmNzcyh7XG4gICAgICAgICAgICAgICAgekluZGV4OiBfLm9wdGlvbnMuekluZGV4XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgXy4kc2xpZGVzLmVxKHNsaWRlSW5kZXgpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0sIF8ub3B0aW9ucy5zcGVlZCwgXy5vcHRpb25zLmVhc2luZywgY2FsbGJhY2spO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIF8uYXBwbHlUcmFuc2l0aW9uKHNsaWRlSW5kZXgpO1xuXG4gICAgICAgICAgICBfLiRzbGlkZXMuZXEoc2xpZGVJbmRleCkuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHpJbmRleDogXy5vcHRpb25zLnpJbmRleFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgXy5kaXNhYmxlVHJhbnNpdGlvbihzbGlkZUluZGV4KTtcblxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKCk7XG4gICAgICAgICAgICAgICAgfSwgXy5vcHRpb25zLnNwZWVkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmZhZGVTbGlkZU91dCA9IGZ1bmN0aW9uKHNsaWRlSW5kZXgpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKF8uY3NzVHJhbnNpdGlvbnMgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgIF8uJHNsaWRlcy5lcShzbGlkZUluZGV4KS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIHpJbmRleDogXy5vcHRpb25zLnpJbmRleCAtIDJcbiAgICAgICAgICAgIH0sIF8ub3B0aW9ucy5zcGVlZCwgXy5vcHRpb25zLmVhc2luZyk7XG5cbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgXy5hcHBseVRyYW5zaXRpb24oc2xpZGVJbmRleCk7XG5cbiAgICAgICAgICAgIF8uJHNsaWRlcy5lcShzbGlkZUluZGV4KS5jc3Moe1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgekluZGV4OiBfLm9wdGlvbnMuekluZGV4IC0gMlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5maWx0ZXJTbGlkZXMgPSBTbGljay5wcm90b3R5cGUuc2xpY2tGaWx0ZXIgPSBmdW5jdGlvbihmaWx0ZXIpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGZpbHRlciAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICBfLiRzbGlkZXNDYWNoZSA9IF8uJHNsaWRlcztcblxuICAgICAgICAgICAgXy51bmxvYWQoKTtcblxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpO1xuXG4gICAgICAgICAgICBfLiRzbGlkZXNDYWNoZS5maWx0ZXIoZmlsdGVyKS5hcHBlbmRUbyhfLiRzbGlkZVRyYWNrKTtcblxuICAgICAgICAgICAgXy5yZWluaXQoKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmZvY3VzSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBfLiRzbGlkZXJcbiAgICAgICAgICAgIC5vZmYoJ2ZvY3VzLnNsaWNrIGJsdXIuc2xpY2snKVxuICAgICAgICAgICAgLm9uKCdmb2N1cy5zbGljayBibHVyLnNsaWNrJywgJyonLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHZhciAkc2YgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYoIF8ub3B0aW9ucy5wYXVzZU9uRm9jdXMgKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZm9jdXNzZWQgPSAkc2YuaXMoJzpmb2N1cycpO1xuICAgICAgICAgICAgICAgICAgICBfLmF1dG9QbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LCAwKTtcblxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmdldEN1cnJlbnQgPSBTbGljay5wcm90b3R5cGUuc2xpY2tDdXJyZW50U2xpZGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG4gICAgICAgIHJldHVybiBfLmN1cnJlbnRTbGlkZTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuZ2V0RG90Q291bnQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGJyZWFrUG9pbnQgPSAwO1xuICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgIHZhciBwYWdlclF0eSA9IDA7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICAgICAgICsrcGFnZXJRdHk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHdoaWxlIChicmVha1BvaW50IDwgXy5zbGlkZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICsrcGFnZXJRdHk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrUG9pbnQgPSBjb3VudGVyICsgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsO1xuICAgICAgICAgICAgICAgICAgICBjb3VudGVyICs9IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ID8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDogXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHBhZ2VyUXR5ID0gXy5zbGlkZUNvdW50O1xuICAgICAgICB9IGVsc2UgaWYoIV8ub3B0aW9ucy5hc05hdkZvcikge1xuICAgICAgICAgICAgcGFnZXJRdHkgPSAxICsgTWF0aC5jZWlsKChfLnNsaWRlQ291bnQgLSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSAvIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIHdoaWxlIChicmVha1BvaW50IDwgXy5zbGlkZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgKytwYWdlclF0eTtcbiAgICAgICAgICAgICAgICBicmVha1BvaW50ID0gY291bnRlciArIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgICAgICAgICAgICBjb3VudGVyICs9IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ID8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDogXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYWdlclF0eSAtIDE7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmdldExlZnQgPSBmdW5jdGlvbihzbGlkZUluZGV4KSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgdGFyZ2V0TGVmdCxcbiAgICAgICAgICAgIHZlcnRpY2FsSGVpZ2h0LFxuICAgICAgICAgICAgdmVydGljYWxPZmZzZXQgPSAwLFxuICAgICAgICAgICAgdGFyZ2V0U2xpZGUsXG4gICAgICAgICAgICBjb2VmO1xuXG4gICAgICAgIF8uc2xpZGVPZmZzZXQgPSAwO1xuICAgICAgICB2ZXJ0aWNhbEhlaWdodCA9IF8uJHNsaWRlcy5maXJzdCgpLm91dGVySGVpZ2h0KHRydWUpO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICAgICAgXy5zbGlkZU9mZnNldCA9IChfLnNsaWRlV2lkdGggKiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSAqIC0xO1xuICAgICAgICAgICAgICAgIGNvZWYgPSAtMVxuXG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gdHJ1ZSAmJiBfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29lZiA9IC0xLjU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29lZiA9IC0yXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmVydGljYWxPZmZzZXQgPSAodmVydGljYWxIZWlnaHQgKiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSAqIGNvZWY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlSW5kZXggKyBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgPiBfLnNsaWRlQ291bnQgJiYgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2xpZGVJbmRleCA+IF8uc2xpZGVDb3VudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5zbGlkZU9mZnNldCA9ICgoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAtIChzbGlkZUluZGV4IC0gXy5zbGlkZUNvdW50KSkgKiBfLnNsaWRlV2lkdGgpICogLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9ICgoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAtIChzbGlkZUluZGV4IC0gXy5zbGlkZUNvdW50KSkgKiB2ZXJ0aWNhbEhlaWdodCkgKiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uc2xpZGVPZmZzZXQgPSAoKF8uc2xpZGVDb3VudCAlIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCkgKiBfLnNsaWRlV2lkdGgpICogLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9ICgoXy5zbGlkZUNvdW50ICUgXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSAqIHZlcnRpY2FsSGVpZ2h0KSAqIC0xO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNsaWRlSW5kZXggKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ID4gXy5zbGlkZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgXy5zbGlkZU9mZnNldCA9ICgoc2xpZGVJbmRleCArIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIC0gXy5zbGlkZUNvdW50KSAqIF8uc2xpZGVXaWR0aDtcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbE9mZnNldCA9ICgoc2xpZGVJbmRleCArIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIC0gXy5zbGlkZUNvdW50KSAqIHZlcnRpY2FsSGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICBfLnNsaWRlT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIHZlcnRpY2FsT2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPD0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuICAgICAgICAgICAgXy5zbGlkZU9mZnNldCA9ICgoXy5zbGlkZVdpZHRoICogTWF0aC5mbG9vcihfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSkgLyAyKSAtICgoXy5zbGlkZVdpZHRoICogXy5zbGlkZUNvdW50KSAvIDIpO1xuICAgICAgICB9IGVsc2UgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlICYmIF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgXy5zbGlkZU9mZnNldCArPSBfLnNsaWRlV2lkdGggKiBNYXRoLmZsb29yKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyKSAtIF8uc2xpZGVXaWR0aDtcbiAgICAgICAgfSBlbHNlIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgXy5zbGlkZU9mZnNldCA9IDA7XG4gICAgICAgICAgICBfLnNsaWRlT2Zmc2V0ICs9IF8uc2xpZGVXaWR0aCAqIE1hdGguZmxvb3IoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAvIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHRhcmdldExlZnQgPSAoKHNsaWRlSW5kZXggKiBfLnNsaWRlV2lkdGgpICogLTEpICsgXy5zbGlkZU9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldExlZnQgPSAoKHNsaWRlSW5kZXggKiB2ZXJ0aWNhbEhlaWdodCkgKiAtMSkgKyB2ZXJ0aWNhbE9mZnNldDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmFyaWFibGVXaWR0aCA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgfHwgXy5vcHRpb25zLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFNsaWRlID0gXy4kc2xpZGVUcmFjay5jaGlsZHJlbignLnNsaWNrLXNsaWRlJykuZXEoc2xpZGVJbmRleCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFNsaWRlID0gXy4kc2xpZGVUcmFjay5jaGlsZHJlbignLnNsaWNrLXNsaWRlJykuZXEoc2xpZGVJbmRleCArIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTbGlkZVswXSkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRMZWZ0ID0gKF8uJHNsaWRlVHJhY2sud2lkdGgoKSAtIHRhcmdldFNsaWRlWzBdLm9mZnNldExlZnQgLSB0YXJnZXRTbGlkZS53aWR0aCgpKSAqIC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldExlZnQgPSAgMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldExlZnQgPSB0YXJnZXRTbGlkZVswXSA/IHRhcmdldFNsaWRlWzBdLm9mZnNldExlZnQgKiAtMSA6IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgPD0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyB8fCBfLm9wdGlvbnMuaW5maW5pdGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFNsaWRlID0gXy4kc2xpZGVUcmFjay5jaGlsZHJlbignLnNsaWNrLXNsaWRlJykuZXEoc2xpZGVJbmRleCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0U2xpZGUgPSBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCcuc2xpY2stc2xpZGUnKS5lcShzbGlkZUluZGV4ICsgXy5vcHRpb25zLnNsaWRlc1RvU2hvdyArIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChfLm9wdGlvbnMucnRsID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTbGlkZVswXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IChfLiRzbGlkZVRyYWNrLndpZHRoKCkgLSB0YXJnZXRTbGlkZVswXS5vZmZzZXRMZWZ0IC0gdGFyZ2V0U2xpZGUud2lkdGgoKSkgKiAtMTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldExlZnQgPSAgMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldExlZnQgPSB0YXJnZXRTbGlkZVswXSA/IHRhcmdldFNsaWRlWzBdLm9mZnNldExlZnQgKiAtMSA6IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGFyZ2V0TGVmdCArPSAoXy4kbGlzdC53aWR0aCgpIC0gdGFyZ2V0U2xpZGUub3V0ZXJXaWR0aCgpKSAvIDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGFyZ2V0TGVmdDtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuZ2V0T3B0aW9uID0gU2xpY2sucHJvdG90eXBlLnNsaWNrR2V0T3B0aW9uID0gZnVuY3Rpb24ob3B0aW9uKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiBfLm9wdGlvbnNbb3B0aW9uXTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuZ2V0TmF2aWdhYmxlSW5kZXhlcyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcyxcbiAgICAgICAgICAgIGJyZWFrUG9pbnQgPSAwLFxuICAgICAgICAgICAgY291bnRlciA9IDAsXG4gICAgICAgICAgICBpbmRleGVzID0gW10sXG4gICAgICAgICAgICBtYXg7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIG1heCA9IF8uc2xpZGVDb3VudDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrUG9pbnQgPSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgKiAtMTtcbiAgICAgICAgICAgIGNvdW50ZXIgPSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgKiAtMTtcbiAgICAgICAgICAgIG1heCA9IF8uc2xpZGVDb3VudCAqIDI7XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoYnJlYWtQb2ludCA8IG1heCkge1xuICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGJyZWFrUG9pbnQpO1xuICAgICAgICAgICAgYnJlYWtQb2ludCA9IGNvdW50ZXIgKyBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICAgICAgICBjb3VudGVyICs9IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ID8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsIDogXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBpbmRleGVzO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5nZXRTbGljayA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5nZXRTbGlkZUNvdW50ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgc2xpZGVzVHJhdmVyc2VkLCBzd2lwZWRTbGlkZSwgY2VudGVyT2Zmc2V0O1xuXG4gICAgICAgIGNlbnRlck9mZnNldCA9IF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlID8gXy5zbGlkZVdpZHRoICogTWF0aC5mbG9vcihfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC8gMikgOiAwO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuc3dpcGVUb1NsaWRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmZpbmQoJy5zbGljay1zbGlkZScpLmVhY2goZnVuY3Rpb24oaW5kZXgsIHNsaWRlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNsaWRlLm9mZnNldExlZnQgLSBjZW50ZXJPZmZzZXQgKyAoJChzbGlkZSkub3V0ZXJXaWR0aCgpIC8gMikgPiAoXy5zd2lwZUxlZnQgKiAtMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpcGVkU2xpZGUgPSBzbGlkZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzbGlkZXNUcmF2ZXJzZWQgPSBNYXRoLmFicygkKHN3aXBlZFNsaWRlKS5hdHRyKCdkYXRhLXNsaWNrLWluZGV4JykgLSBfLmN1cnJlbnRTbGlkZSkgfHwgMTtcblxuICAgICAgICAgICAgcmV0dXJuIHNsaWRlc1RyYXZlcnNlZDtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5nb1RvID0gU2xpY2sucHJvdG90eXBlLnNsaWNrR29UbyA9IGZ1bmN0aW9uKHNsaWRlLCBkb250QW5pbWF0ZSkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBfLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaW5kZXgnLFxuICAgICAgICAgICAgICAgIGluZGV4OiBwYXJzZUludChzbGlkZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZG9udEFuaW1hdGUpO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oY3JlYXRpb24pIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCEkKF8uJHNsaWRlcikuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpIHtcblxuICAgICAgICAgICAgJChfLiRzbGlkZXIpLmFkZENsYXNzKCdzbGljay1pbml0aWFsaXplZCcpO1xuXG4gICAgICAgICAgICBfLmJ1aWxkUm93cygpO1xuICAgICAgICAgICAgXy5idWlsZE91dCgpO1xuICAgICAgICAgICAgXy5zZXRQcm9wcygpO1xuICAgICAgICAgICAgXy5zdGFydExvYWQoKTtcbiAgICAgICAgICAgIF8ubG9hZFNsaWRlcigpO1xuICAgICAgICAgICAgXy5pbml0aWFsaXplRXZlbnRzKCk7XG4gICAgICAgICAgICBfLnVwZGF0ZUFycm93cygpO1xuICAgICAgICAgICAgXy51cGRhdGVEb3RzKCk7XG4gICAgICAgICAgICBfLmNoZWNrUmVzcG9uc2l2ZSh0cnVlKTtcbiAgICAgICAgICAgIF8uZm9jdXNIYW5kbGVyKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjcmVhdGlvbikge1xuICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2luaXQnLCBbX10pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLmluaXRBREEoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggXy5vcHRpb25zLmF1dG9wbGF5ICkge1xuXG4gICAgICAgICAgICBfLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgXy5hdXRvUGxheSgpO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuaW5pdEFEQSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICAgICAgbnVtRG90R3JvdXBzID0gTWF0aC5jZWlsKF8uc2xpZGVDb3VudCAvIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpLFxuICAgICAgICAgICAgICAgIHRhYkNvbnRyb2xJbmRleGVzID0gXy5nZXROYXZpZ2FibGVJbmRleGVzKCkuZmlsdGVyKGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHZhbCA+PSAwKSAmJiAodmFsIDwgXy5zbGlkZUNvdW50KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICBfLiRzbGlkZXMuYWRkKF8uJHNsaWRlVHJhY2suZmluZCgnLnNsaWNrLWNsb25lZCcpKS5hdHRyKHtcbiAgICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcbiAgICAgICAgICAgICd0YWJpbmRleCc6ICctMSdcbiAgICAgICAgfSkuZmluZCgnYSwgaW5wdXQsIGJ1dHRvbiwgc2VsZWN0JykuYXR0cih7XG4gICAgICAgICAgICAndGFiaW5kZXgnOiAnLTEnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChfLiRkb3RzICE9PSBudWxsKSB7XG4gICAgICAgICAgICBfLiRzbGlkZXMubm90KF8uJHNsaWRlVHJhY2suZmluZCgnLnNsaWNrLWNsb25lZCcpKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGVDb250cm9sSW5kZXggPSB0YWJDb250cm9sSW5kZXhlcy5pbmRleE9mKGkpO1xuXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAndGFicGFuZWwnLFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnc2xpY2stc2xpZGUnICsgXy5pbnN0YW5jZVVpZCArIGksXG4gICAgICAgICAgICAgICAgICAgICd0YWJpbmRleCc6IC0xXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2xpZGVDb250cm9sSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgdmFyIGFyaWFCdXR0b25Db250cm9sID0gJ3NsaWNrLXNsaWRlLWNvbnRyb2wnICsgXy5pbnN0YW5jZVVpZCArIHNsaWRlQ29udHJvbEluZGV4XG4gICAgICAgICAgICAgICAgICAgaWYgKCQoJyMnICsgYXJpYUJ1dHRvbkNvbnRyb2wpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IGFyaWFCdXR0b25Db250cm9sXG4gICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIF8uJGRvdHMuYXR0cigncm9sZScsICd0YWJsaXN0JykuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwcGVkU2xpZGVJbmRleCA9IHRhYkNvbnRyb2xJbmRleGVzW2ldO1xuXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAncHJlc2VudGF0aW9uJ1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCdidXR0b24nKS5maXJzdCgpLmF0dHIoe1xuICAgICAgICAgICAgICAgICAgICAncm9sZSc6ICd0YWInLFxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnc2xpY2stc2xpZGUtY29udHJvbCcgKyBfLmluc3RhbmNlVWlkICsgaSxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtY29udHJvbHMnOiAnc2xpY2stc2xpZGUnICsgXy5pbnN0YW5jZVVpZCArIG1hcHBlZFNsaWRlSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICdhcmlhLWxhYmVsJzogKGkgKyAxKSArICcgb2YgJyArIG51bURvdEdyb3VwcyxcbiAgICAgICAgICAgICAgICAgICAgJ2FyaWEtc2VsZWN0ZWQnOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAndGFiaW5kZXgnOiAnLTEnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0pLmVxKF8uY3VycmVudFNsaWRlKS5maW5kKCdidXR0b24nKS5hdHRyKHtcbiAgICAgICAgICAgICAgICAnYXJpYS1zZWxlY3RlZCc6ICd0cnVlJyxcbiAgICAgICAgICAgICAgICAndGFiaW5kZXgnOiAnMCdcbiAgICAgICAgICAgIH0pLmVuZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaT1fLmN1cnJlbnRTbGlkZSwgbWF4PWkrXy5vcHRpb25zLnNsaWRlc1RvU2hvdzsgaSA8IG1heDsgaSsrKSB7XG4gICAgICAgICAgaWYgKF8ub3B0aW9ucy5mb2N1c09uQ2hhbmdlKSB7XG4gICAgICAgICAgICBfLiRzbGlkZXMuZXEoaSkuYXR0cih7J3RhYmluZGV4JzogJzAnfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF8uJHNsaWRlcy5lcShpKS5yZW1vdmVBdHRyKCd0YWJpbmRleCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF8uYWN0aXZhdGVBREEoKTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuaW5pdEFycm93RXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYXJyb3dzID09PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICAgIF8uJHByZXZBcnJvd1xuICAgICAgICAgICAgICAgLm9mZignY2xpY2suc2xpY2snKVxuICAgICAgICAgICAgICAgLm9uKCdjbGljay5zbGljaycsIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ3ByZXZpb3VzJ1xuICAgICAgICAgICAgICAgfSwgXy5jaGFuZ2VTbGlkZSk7XG4gICAgICAgICAgICBfLiRuZXh0QXJyb3dcbiAgICAgICAgICAgICAgIC5vZmYoJ2NsaWNrLnNsaWNrJylcbiAgICAgICAgICAgICAgIC5vbignY2xpY2suc2xpY2snLCB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICduZXh0J1xuICAgICAgICAgICAgICAgfSwgXy5jaGFuZ2VTbGlkZSk7XG5cbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIF8uJHByZXZBcnJvdy5vbigna2V5ZG93bi5zbGljaycsIF8ua2V5SGFuZGxlcik7XG4gICAgICAgICAgICAgICAgXy4kbmV4dEFycm93Lm9uKCdrZXlkb3duLnNsaWNrJywgXy5rZXlIYW5kbGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5pbml0RG90RXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZG90cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICAkKCdsaScsIF8uJGRvdHMpLm9uKCdjbGljay5zbGljaycsIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnaW5kZXgnXG4gICAgICAgICAgICB9LCBfLmNoYW5nZVNsaWRlKTtcblxuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5hY2Nlc3NpYmlsaXR5ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgXy4kZG90cy5vbigna2V5ZG93bi5zbGljaycsIF8ua2V5SGFuZGxlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5vcHRpb25zLmRvdHMgPT09IHRydWUgJiYgXy5vcHRpb25zLnBhdXNlT25Eb3RzSG92ZXIgPT09IHRydWUgJiYgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuXG4gICAgICAgICAgICAkKCdsaScsIF8uJGRvdHMpXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgdHJ1ZSkpXG4gICAgICAgICAgICAgICAgLm9uKCdtb3VzZWxlYXZlLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgZmFsc2UpKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmluaXRTbGlkZUV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5wYXVzZU9uSG92ZXIgKSB7XG5cbiAgICAgICAgICAgIF8uJGxpc3Qub24oJ21vdXNlZW50ZXIuc2xpY2snLCAkLnByb3h5KF8uaW50ZXJydXB0LCBfLCB0cnVlKSk7XG4gICAgICAgICAgICBfLiRsaXN0Lm9uKCdtb3VzZWxlYXZlLnNsaWNrJywgJC5wcm94eShfLmludGVycnVwdCwgXywgZmFsc2UpKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmluaXRpYWxpemVFdmVudHMgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgXy5pbml0QXJyb3dFdmVudHMoKTtcblxuICAgICAgICBfLmluaXREb3RFdmVudHMoKTtcbiAgICAgICAgXy5pbml0U2xpZGVFdmVudHMoKTtcblxuICAgICAgICBfLiRsaXN0Lm9uKCd0b3VjaHN0YXJ0LnNsaWNrIG1vdXNlZG93bi5zbGljaycsIHtcbiAgICAgICAgICAgIGFjdGlvbjogJ3N0YXJ0J1xuICAgICAgICB9LCBfLnN3aXBlSGFuZGxlcik7XG4gICAgICAgIF8uJGxpc3Qub24oJ3RvdWNobW92ZS5zbGljayBtb3VzZW1vdmUuc2xpY2snLCB7XG4gICAgICAgICAgICBhY3Rpb246ICdtb3ZlJ1xuICAgICAgICB9LCBfLnN3aXBlSGFuZGxlcik7XG4gICAgICAgIF8uJGxpc3Qub24oJ3RvdWNoZW5kLnNsaWNrIG1vdXNldXAuc2xpY2snLCB7XG4gICAgICAgICAgICBhY3Rpb246ICdlbmQnXG4gICAgICAgIH0sIF8uc3dpcGVIYW5kbGVyKTtcbiAgICAgICAgXy4kbGlzdC5vbigndG91Y2hjYW5jZWwuc2xpY2sgbW91c2VsZWF2ZS5zbGljaycsIHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2VuZCdcbiAgICAgICAgfSwgXy5zd2lwZUhhbmRsZXIpO1xuXG4gICAgICAgIF8uJGxpc3Qub24oJ2NsaWNrLnNsaWNrJywgXy5jbGlja0hhbmRsZXIpO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKF8udmlzaWJpbGl0eUNoYW5nZSwgJC5wcm94eShfLnZpc2liaWxpdHksIF8pKTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgIF8uJGxpc3Qub24oJ2tleWRvd24uc2xpY2snLCBfLmtleUhhbmRsZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mb2N1c09uU2VsZWN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAkKF8uJHNsaWRlVHJhY2spLmNoaWxkcmVuKCkub24oJ2NsaWNrLnNsaWNrJywgXy5zZWxlY3RIYW5kbGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQod2luZG93KS5vbignb3JpZW50YXRpb25jaGFuZ2Uuc2xpY2suc2xpY2stJyArIF8uaW5zdGFuY2VVaWQsICQucHJveHkoXy5vcmllbnRhdGlvbkNoYW5nZSwgXykpO1xuXG4gICAgICAgICQod2luZG93KS5vbigncmVzaXplLnNsaWNrLnNsaWNrLScgKyBfLmluc3RhbmNlVWlkLCAkLnByb3h5KF8ucmVzaXplLCBfKSk7XG5cbiAgICAgICAgJCgnW2RyYWdnYWJsZSE9dHJ1ZV0nLCBfLiRzbGlkZVRyYWNrKS5vbignZHJhZ3N0YXJ0JywgXy5wcmV2ZW50RGVmYXVsdCk7XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uKCdsb2FkLnNsaWNrLnNsaWNrLScgKyBfLmluc3RhbmNlVWlkLCBfLnNldFBvc2l0aW9uKTtcbiAgICAgICAgJChfLnNldFBvc2l0aW9uKTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuaW5pdFVJID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuYXJyb3dzID09PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcblxuICAgICAgICAgICAgXy4kcHJldkFycm93LnNob3coKTtcbiAgICAgICAgICAgIF8uJG5leHRBcnJvdy5zaG93KCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZG90cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG5cbiAgICAgICAgICAgIF8uJGRvdHMuc2hvdygpO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUua2V5SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuICAgICAgICAgLy9Eb250IHNsaWRlIGlmIHRoZSBjdXJzb3IgaXMgaW5zaWRlIHRoZSBmb3JtIGZpZWxkcyBhbmQgYXJyb3cga2V5cyBhcmUgcHJlc3NlZFxuICAgICAgICBpZighZXZlbnQudGFyZ2V0LnRhZ05hbWUubWF0Y2goJ1RFWFRBUkVBfElOUFVUfFNFTEVDVCcpKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcgJiYgXy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSA/ICduZXh0JyA6ICAncHJldmlvdXMnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzkgJiYgXy5vcHRpb25zLmFjY2Vzc2liaWxpdHkgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBfLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSA/ICdwcmV2aW91cycgOiAnbmV4dCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLmxhenlMb2FkID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgbG9hZFJhbmdlLCBjbG9uZVJhbmdlLCByYW5nZVN0YXJ0LCByYW5nZUVuZDtcblxuICAgICAgICBmdW5jdGlvbiBsb2FkSW1hZ2VzKGltYWdlc1Njb3BlKSB7XG5cbiAgICAgICAgICAgICQoJ2ltZ1tkYXRhLWxhenldJywgaW1hZ2VzU2NvcGUpLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZVNvdXJjZSA9ICQodGhpcykuYXR0cignZGF0YS1sYXp5JyksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlU3JjU2V0ID0gJCh0aGlzKS5hdHRyKCdkYXRhLXNyY3NldCcpLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZVNpemVzICA9ICQodGhpcykuYXR0cignZGF0YS1zaXplcycpIHx8IF8uJHNsaWRlci5hdHRyKCdkYXRhLXNpemVzJyksXG4gICAgICAgICAgICAgICAgICAgIGltYWdlVG9Mb2FkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgICAgICAgICAgICBpbWFnZVRvTG9hZC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoeyBvcGFjaXR5OiAwIH0sIDEwMCwgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VTcmNTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmNzZXQnLCBpbWFnZVNyY1NldCApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVNpemVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzaXplcycsIGltYWdlU2l6ZXMgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCBpbWFnZVNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFuaW1hdGUoeyBvcGFjaXR5OiAxIH0sIDIwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVBdHRyKCdkYXRhLWxhenkgZGF0YS1zcmNzZXQgZGF0YS1zaXplcycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1sb2FkaW5nJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdsYXp5TG9hZGVkJywgW18sIGltYWdlLCBpbWFnZVNvdXJjZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgaW1hZ2VUb0xvYWQub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0ciggJ2RhdGEtbGF6eScgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCAnc2xpY2stbG9hZGluZycgKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCAnc2xpY2stbGF6eWxvYWQtZXJyb3InICk7XG5cbiAgICAgICAgICAgICAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ2xhenlMb2FkRXJyb3InLCBbIF8sIGltYWdlLCBpbWFnZVNvdXJjZSBdKTtcblxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpbWFnZVRvTG9hZC5zcmMgPSBpbWFnZVNvdXJjZTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJhbmdlU3RhcnQgPSBfLmN1cnJlbnRTbGlkZSArIChfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC8gMiArIDEpO1xuICAgICAgICAgICAgICAgIHJhbmdlRW5kID0gcmFuZ2VTdGFydCArIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKyAyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByYW5nZVN0YXJ0ID0gTWF0aC5tYXgoMCwgXy5jdXJyZW50U2xpZGUgLSAoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAvIDIgKyAxKSk7XG4gICAgICAgICAgICAgICAgcmFuZ2VFbmQgPSAyICsgKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyICsgMSkgKyBfLmN1cnJlbnRTbGlkZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJhbmdlU3RhcnQgPSBfLm9wdGlvbnMuaW5maW5pdGUgPyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICsgXy5jdXJyZW50U2xpZGUgOiBfLmN1cnJlbnRTbGlkZTtcbiAgICAgICAgICAgIHJhbmdlRW5kID0gTWF0aC5jZWlsKHJhbmdlU3RhcnQgKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KTtcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuZmFkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZVN0YXJ0ID4gMCkgcmFuZ2VTdGFydC0tO1xuICAgICAgICAgICAgICAgIGlmIChyYW5nZUVuZCA8PSBfLnNsaWRlQ291bnQpIHJhbmdlRW5kKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsb2FkUmFuZ2UgPSBfLiRzbGlkZXIuZmluZCgnLnNsaWNrLXNsaWRlJykuc2xpY2UocmFuZ2VTdGFydCwgcmFuZ2VFbmQpO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMubGF6eUxvYWQgPT09ICdhbnRpY2lwYXRlZCcpIHtcbiAgICAgICAgICAgIHZhciBwcmV2U2xpZGUgPSByYW5nZVN0YXJ0IC0gMSxcbiAgICAgICAgICAgICAgICBuZXh0U2xpZGUgPSByYW5nZUVuZCxcbiAgICAgICAgICAgICAgICAkc2xpZGVzID0gXy4kc2xpZGVyLmZpbmQoJy5zbGljay1zbGlkZScpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByZXZTbGlkZSA8IDApIHByZXZTbGlkZSA9IF8uc2xpZGVDb3VudCAtIDE7XG4gICAgICAgICAgICAgICAgbG9hZFJhbmdlID0gbG9hZFJhbmdlLmFkZCgkc2xpZGVzLmVxKHByZXZTbGlkZSkpO1xuICAgICAgICAgICAgICAgIGxvYWRSYW5nZSA9IGxvYWRSYW5nZS5hZGQoJHNsaWRlcy5lcShuZXh0U2xpZGUpKTtcbiAgICAgICAgICAgICAgICBwcmV2U2xpZGUtLTtcbiAgICAgICAgICAgICAgICBuZXh0U2xpZGUrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxvYWRJbWFnZXMobG9hZFJhbmdlKTtcblxuICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICAgIGNsb25lUmFuZ2UgPSBfLiRzbGlkZXIuZmluZCgnLnNsaWNrLXNsaWRlJyk7XG4gICAgICAgICAgICBsb2FkSW1hZ2VzKGNsb25lUmFuZ2UpO1xuICAgICAgICB9IGVsc2VcbiAgICAgICAgaWYgKF8uY3VycmVudFNsaWRlID49IF8uc2xpZGVDb3VudCAtIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICAgIGNsb25lUmFuZ2UgPSBfLiRzbGlkZXIuZmluZCgnLnNsaWNrLWNsb25lZCcpLnNsaWNlKDAsIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpO1xuICAgICAgICAgICAgbG9hZEltYWdlcyhjbG9uZVJhbmdlKTtcbiAgICAgICAgfSBlbHNlIGlmIChfLmN1cnJlbnRTbGlkZSA9PT0gMCkge1xuICAgICAgICAgICAgY2xvbmVSYW5nZSA9IF8uJHNsaWRlci5maW5kKCcuc2xpY2stY2xvbmVkJykuc2xpY2UoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyAqIC0xKTtcbiAgICAgICAgICAgIGxvYWRJbWFnZXMoY2xvbmVSYW5nZSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUubG9hZFNsaWRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBfLnNldFBvc2l0aW9uKCk7XG5cbiAgICAgICAgXy4kc2xpZGVUcmFjay5jc3Moe1xuICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICB9KTtcblxuICAgICAgICBfLiRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3NsaWNrLWxvYWRpbmcnKTtcblxuICAgICAgICBfLmluaXRVSSgpO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMubGF6eUxvYWQgPT09ICdwcm9ncmVzc2l2ZScpIHtcbiAgICAgICAgICAgIF8ucHJvZ3Jlc3NpdmVMYXp5TG9hZCgpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLm5leHQgPSBTbGljay5wcm90b3R5cGUuc2xpY2tOZXh0ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uY2hhbmdlU2xpZGUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICduZXh0J1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUub3JpZW50YXRpb25DaGFuZ2UgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgXy5jaGVja1Jlc3BvbnNpdmUoKTtcbiAgICAgICAgXy5zZXRQb3NpdGlvbigpO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5wYXVzZSA9IFNsaWNrLnByb3RvdHlwZS5zbGlja1BhdXNlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uYXV0b1BsYXlDbGVhcigpO1xuICAgICAgICBfLnBhdXNlZCA9IHRydWU7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnBsYXkgPSBTbGljay5wcm90b3R5cGUuc2xpY2tQbGF5ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uYXV0b1BsYXkoKTtcbiAgICAgICAgXy5vcHRpb25zLmF1dG9wbGF5ID0gdHJ1ZTtcbiAgICAgICAgXy5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgXy5mb2N1c3NlZCA9IGZhbHNlO1xuICAgICAgICBfLmludGVycnVwdGVkID0gZmFsc2U7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnBvc3RTbGlkZSA9IGZ1bmN0aW9uKGluZGV4KSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmKCAhXy51bnNsaWNrZWQgKSB7XG5cbiAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdhZnRlckNoYW5nZScsIFtfLCBpbmRleF0pO1xuXG4gICAgICAgICAgICBfLmFuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuICAgICAgICAgICAgICAgIF8uc2V0UG9zaXRpb24oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy5zd2lwZUxlZnQgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoIF8ub3B0aW9ucy5hdXRvcGxheSApIHtcbiAgICAgICAgICAgICAgICBfLmF1dG9QbGF5KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMuYWNjZXNzaWJpbGl0eSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIF8uaW5pdEFEQSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5mb2N1c09uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkY3VycmVudFNsaWRlID0gJChfLiRzbGlkZXMuZ2V0KF8uY3VycmVudFNsaWRlKSk7XG4gICAgICAgICAgICAgICAgICAgICRjdXJyZW50U2xpZGUuYXR0cigndGFiaW5kZXgnLCAwKS5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnByZXYgPSBTbGljay5wcm90b3R5cGUuc2xpY2tQcmV2ID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uY2hhbmdlU2xpZGUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdwcmV2aW91cydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5wcm9ncmVzc2l2ZUxhenlMb2FkID0gZnVuY3Rpb24oIHRyeUNvdW50ICkge1xuXG4gICAgICAgIHRyeUNvdW50ID0gdHJ5Q291bnQgfHwgMTtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICAkaW1nc1RvTG9hZCA9ICQoICdpbWdbZGF0YS1sYXp5XScsIF8uJHNsaWRlciApLFxuICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICBpbWFnZVNvdXJjZSxcbiAgICAgICAgICAgIGltYWdlU3JjU2V0LFxuICAgICAgICAgICAgaW1hZ2VTaXplcyxcbiAgICAgICAgICAgIGltYWdlVG9Mb2FkO1xuXG4gICAgICAgIGlmICggJGltZ3NUb0xvYWQubGVuZ3RoICkge1xuXG4gICAgICAgICAgICBpbWFnZSA9ICRpbWdzVG9Mb2FkLmZpcnN0KCk7XG4gICAgICAgICAgICBpbWFnZVNvdXJjZSA9IGltYWdlLmF0dHIoJ2RhdGEtbGF6eScpO1xuICAgICAgICAgICAgaW1hZ2VTcmNTZXQgPSBpbWFnZS5hdHRyKCdkYXRhLXNyY3NldCcpO1xuICAgICAgICAgICAgaW1hZ2VTaXplcyAgPSBpbWFnZS5hdHRyKCdkYXRhLXNpemVzJykgfHwgXy4kc2xpZGVyLmF0dHIoJ2RhdGEtc2l6ZXMnKTtcbiAgICAgICAgICAgIGltYWdlVG9Mb2FkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG5cbiAgICAgICAgICAgIGltYWdlVG9Mb2FkLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGltYWdlU3JjU2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Jjc2V0JywgaW1hZ2VTcmNTZXQgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VTaXplcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc2l6ZXMnLCBpbWFnZVNpemVzICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAuYXR0ciggJ3NyYycsIGltYWdlU291cmNlIClcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoJ2RhdGEtbGF6eSBkYXRhLXNyY3NldCBkYXRhLXNpemVzJylcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1sb2FkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIF8ub3B0aW9ucy5hZGFwdGl2ZUhlaWdodCA9PT0gdHJ1ZSApIHtcbiAgICAgICAgICAgICAgICAgICAgXy5zZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdsYXp5TG9hZGVkJywgWyBfLCBpbWFnZSwgaW1hZ2VTb3VyY2UgXSk7XG4gICAgICAgICAgICAgICAgXy5wcm9ncmVzc2l2ZUxhenlMb2FkKCk7XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGltYWdlVG9Mb2FkLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggdHJ5Q291bnQgPCAzICkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAgICAgKiB0cnkgdG8gbG9hZCB0aGUgaW1hZ2UgMyB0aW1lcyxcbiAgICAgICAgICAgICAgICAgICAgICogbGVhdmUgYSBzbGlnaHQgZGVsYXkgc28gd2UgZG9uJ3QgZ2V0XG4gICAgICAgICAgICAgICAgICAgICAqIHNlcnZlcnMgYmxvY2tpbmcgdGhlIHJlcXVlc3QuXG4gICAgICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucHJvZ3Jlc3NpdmVMYXp5TG9hZCggdHJ5Q291bnQgKyAxICk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDUwMCApO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUF0dHIoICdkYXRhLWxhenknIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyggJ3NsaWNrLWxvYWRpbmcnIClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyggJ3NsaWNrLWxhenlsb2FkLWVycm9yJyApO1xuXG4gICAgICAgICAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdsYXp5TG9hZEVycm9yJywgWyBfLCBpbWFnZSwgaW1hZ2VTb3VyY2UgXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgXy5wcm9ncmVzc2l2ZUxhenlMb2FkKCk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGltYWdlVG9Mb2FkLnNyYyA9IGltYWdlU291cmNlO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdhbGxJbWFnZXNMb2FkZWQnLCBbIF8gXSk7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24oIGluaXRpYWxpemluZyApIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsIGN1cnJlbnRTbGlkZSwgbGFzdFZpc2libGVJbmRleDtcblxuICAgICAgICBsYXN0VmlzaWJsZUluZGV4ID0gXy5zbGlkZUNvdW50IC0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcblxuICAgICAgICAvLyBpbiBub24taW5maW5pdGUgc2xpZGVycywgd2UgZG9uJ3Qgd2FudCB0byBnbyBwYXN0IHRoZVxuICAgICAgICAvLyBsYXN0IHZpc2libGUgaW5kZXguXG4gICAgICAgIGlmKCAhXy5vcHRpb25zLmluZmluaXRlICYmICggXy5jdXJyZW50U2xpZGUgPiBsYXN0VmlzaWJsZUluZGV4ICkpIHtcbiAgICAgICAgICAgIF8uY3VycmVudFNsaWRlID0gbGFzdFZpc2libGVJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIGxlc3Mgc2xpZGVzIHRoYW4gdG8gc2hvdywgZ28gdG8gc3RhcnQuXG4gICAgICAgIGlmICggXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgKSB7XG4gICAgICAgICAgICBfLmN1cnJlbnRTbGlkZSA9IDA7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGN1cnJlbnRTbGlkZSA9IF8uY3VycmVudFNsaWRlO1xuXG4gICAgICAgIF8uZGVzdHJveSh0cnVlKTtcblxuICAgICAgICAkLmV4dGVuZChfLCBfLmluaXRpYWxzLCB7IGN1cnJlbnRTbGlkZTogY3VycmVudFNsaWRlIH0pO1xuXG4gICAgICAgIF8uaW5pdCgpO1xuXG4gICAgICAgIGlmKCAhaW5pdGlhbGl6aW5nICkge1xuXG4gICAgICAgICAgICBfLmNoYW5nZVNsaWRlKHtcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdpbmRleCcsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBjdXJyZW50U2xpZGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5yZWdpc3RlckJyZWFrcG9pbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLCBicmVha3BvaW50LCBjdXJyZW50QnJlYWtwb2ludCwgbCxcbiAgICAgICAgICAgIHJlc3BvbnNpdmVTZXR0aW5ncyA9IF8ub3B0aW9ucy5yZXNwb25zaXZlIHx8IG51bGw7XG5cbiAgICAgICAgaWYgKCAkLnR5cGUocmVzcG9uc2l2ZVNldHRpbmdzKSA9PT0gJ2FycmF5JyAmJiByZXNwb25zaXZlU2V0dGluZ3MubGVuZ3RoICkge1xuXG4gICAgICAgICAgICBfLnJlc3BvbmRUbyA9IF8ub3B0aW9ucy5yZXNwb25kVG8gfHwgJ3dpbmRvdyc7XG5cbiAgICAgICAgICAgIGZvciAoIGJyZWFrcG9pbnQgaW4gcmVzcG9uc2l2ZVNldHRpbmdzICkge1xuXG4gICAgICAgICAgICAgICAgbCA9IF8uYnJlYWtwb2ludHMubGVuZ3RoLTE7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2l2ZVNldHRpbmdzLmhhc093blByb3BlcnR5KGJyZWFrcG9pbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCcmVha3BvaW50ID0gcmVzcG9uc2l2ZVNldHRpbmdzW2JyZWFrcG9pbnRdLmJyZWFrcG9pbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHRoZSBicmVha3BvaW50cyBhbmQgY3V0IG91dCBhbnkgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gb25lcyB3aXRoIHRoZSBzYW1lIGJyZWFrcG9pbnQgbnVtYmVyLCB3ZSBkb24ndCB3YW50IGR1cGVzLlxuICAgICAgICAgICAgICAgICAgICB3aGlsZSggbCA+PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF8uYnJlYWtwb2ludHNbbF0gJiYgXy5icmVha3BvaW50c1tsXSA9PT0gY3VycmVudEJyZWFrcG9pbnQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5icmVha3BvaW50cy5zcGxpY2UobCwxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGwtLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF8uYnJlYWtwb2ludHMucHVzaChjdXJyZW50QnJlYWtwb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIF8uYnJlYWtwb2ludFNldHRpbmdzW2N1cnJlbnRCcmVha3BvaW50XSA9IHJlc3BvbnNpdmVTZXR0aW5nc1ticmVha3BvaW50XS5zZXR0aW5ncztcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfLmJyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiAoIF8ub3B0aW9ucy5tb2JpbGVGaXJzdCApID8gYS1iIDogYi1hO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5yZWluaXQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgXy4kc2xpZGVzID1cbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2tcbiAgICAgICAgICAgICAgICAuY2hpbGRyZW4oXy5vcHRpb25zLnNsaWRlKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stc2xpZGUnKTtcblxuICAgICAgICBfLnNsaWRlQ291bnQgPSBfLiRzbGlkZXMubGVuZ3RoO1xuXG4gICAgICAgIGlmIChfLmN1cnJlbnRTbGlkZSA+PSBfLnNsaWRlQ291bnQgJiYgXy5jdXJyZW50U2xpZGUgIT09IDApIHtcbiAgICAgICAgICAgIF8uY3VycmVudFNsaWRlID0gXy5jdXJyZW50U2xpZGUgLSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5zbGlkZUNvdW50IDw9IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICAgIF8uY3VycmVudFNsaWRlID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIF8ucmVnaXN0ZXJCcmVha3BvaW50cygpO1xuXG4gICAgICAgIF8uc2V0UHJvcHMoKTtcbiAgICAgICAgXy5zZXR1cEluZmluaXRlKCk7XG4gICAgICAgIF8uYnVpbGRBcnJvd3MoKTtcbiAgICAgICAgXy51cGRhdGVBcnJvd3MoKTtcbiAgICAgICAgXy5pbml0QXJyb3dFdmVudHMoKTtcbiAgICAgICAgXy5idWlsZERvdHMoKTtcbiAgICAgICAgXy51cGRhdGVEb3RzKCk7XG4gICAgICAgIF8uaW5pdERvdEV2ZW50cygpO1xuICAgICAgICBfLmNsZWFuVXBTbGlkZUV2ZW50cygpO1xuICAgICAgICBfLmluaXRTbGlkZUV2ZW50cygpO1xuXG4gICAgICAgIF8uY2hlY2tSZXNwb25zaXZlKGZhbHNlLCB0cnVlKTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmZvY3VzT25TZWxlY3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgICQoXy4kc2xpZGVUcmFjaykuY2hpbGRyZW4oKS5vbignY2xpY2suc2xpY2snLCBfLnNlbGVjdEhhbmRsZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5zZXRTbGlkZUNsYXNzZXModHlwZW9mIF8uY3VycmVudFNsaWRlID09PSAnbnVtYmVyJyA/IF8uY3VycmVudFNsaWRlIDogMCk7XG5cbiAgICAgICAgXy5zZXRQb3NpdGlvbigpO1xuICAgICAgICBfLmZvY3VzSGFuZGxlcigpO1xuXG4gICAgICAgIF8ucGF1c2VkID0gIV8ub3B0aW9ucy5hdXRvcGxheTtcbiAgICAgICAgXy5hdXRvUGxheSgpO1xuXG4gICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdyZUluaXQnLCBbX10pO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5yZXNpemUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpICE9PSBfLndpbmRvd1dpZHRoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoXy53aW5kb3dEZWxheSk7XG4gICAgICAgICAgICBfLndpbmRvd0RlbGF5ID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgXy53aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICAgICAgICAgIF8uY2hlY2tSZXNwb25zaXZlKCk7XG4gICAgICAgICAgICAgICAgaWYoICFfLnVuc2xpY2tlZCApIHsgXy5zZXRQb3NpdGlvbigpOyB9XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnJlbW92ZVNsaWRlID0gU2xpY2sucHJvdG90eXBlLnNsaWNrUmVtb3ZlID0gZnVuY3Rpb24oaW5kZXgsIHJlbW92ZUJlZm9yZSwgcmVtb3ZlQWxsKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmICh0eXBlb2YoaW5kZXgpID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgIHJlbW92ZUJlZm9yZSA9IGluZGV4O1xuICAgICAgICAgICAgaW5kZXggPSByZW1vdmVCZWZvcmUgPT09IHRydWUgPyAwIDogXy5zbGlkZUNvdW50IC0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4ID0gcmVtb3ZlQmVmb3JlID09PSB0cnVlID8gLS1pbmRleCA6IGluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA8IDEgfHwgaW5kZXggPCAwIHx8IGluZGV4ID4gXy5zbGlkZUNvdW50IC0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgXy51bmxvYWQoKTtcblxuICAgICAgICBpZiAocmVtb3ZlQWxsID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKCkucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNoaWxkcmVuKHRoaXMub3B0aW9ucy5zbGlkZSkuZXEoaW5kZXgpLnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgXy4kc2xpZGVzID0gXy4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpO1xuXG4gICAgICAgIF8uJHNsaWRlVHJhY2suY2hpbGRyZW4odGhpcy5vcHRpb25zLnNsaWRlKS5kZXRhY2goKTtcblxuICAgICAgICBfLiRzbGlkZVRyYWNrLmFwcGVuZChfLiRzbGlkZXMpO1xuXG4gICAgICAgIF8uJHNsaWRlc0NhY2hlID0gXy4kc2xpZGVzO1xuXG4gICAgICAgIF8ucmVpbml0KCk7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnNldENTUyA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgcG9zaXRpb25Qcm9wcyA9IHt9LFxuICAgICAgICAgICAgeCwgeTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcG9zaXRpb24gPSAtcG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgeCA9IF8ucG9zaXRpb25Qcm9wID09ICdsZWZ0JyA/IE1hdGguY2VpbChwb3NpdGlvbikgKyAncHgnIDogJzBweCc7XG4gICAgICAgIHkgPSBfLnBvc2l0aW9uUHJvcCA9PSAndG9wJyA/IE1hdGguY2VpbChwb3NpdGlvbikgKyAncHgnIDogJzBweCc7XG5cbiAgICAgICAgcG9zaXRpb25Qcm9wc1tfLnBvc2l0aW9uUHJvcF0gPSBwb3NpdGlvbjtcblxuICAgICAgICBpZiAoXy50cmFuc2Zvcm1zRW5hYmxlZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2suY3NzKHBvc2l0aW9uUHJvcHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zaXRpb25Qcm9wcyA9IHt9O1xuICAgICAgICAgICAgaWYgKF8uY3NzVHJhbnNpdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25Qcm9wc1tfLmFuaW1UeXBlXSA9ICd0cmFuc2xhdGUoJyArIHggKyAnLCAnICsgeSArICcpJztcbiAgICAgICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmNzcyhwb3NpdGlvblByb3BzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25Qcm9wc1tfLmFuaW1UeXBlXSA9ICd0cmFuc2xhdGUzZCgnICsgeCArICcsICcgKyB5ICsgJywgMHB4KSc7XG4gICAgICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jc3MocG9zaXRpb25Qcm9wcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuc2V0RGltZW5zaW9ucyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoXy5vcHRpb25zLnZlcnRpY2FsID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgXy4kbGlzdC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAoJzBweCAnICsgXy5vcHRpb25zLmNlbnRlclBhZGRpbmcpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfLiRsaXN0LmhlaWdodChfLiRzbGlkZXMuZmlyc3QoKS5vdXRlckhlaWdodCh0cnVlKSAqIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpO1xuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgXy4kbGlzdC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAoXy5vcHRpb25zLmNlbnRlclBhZGRpbmcgKyAnIDBweCcpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfLmxpc3RXaWR0aCA9IF8uJGxpc3Qud2lkdGgoKTtcbiAgICAgICAgXy5saXN0SGVpZ2h0ID0gXy4kbGlzdC5oZWlnaHQoKTtcblxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlICYmIF8ub3B0aW9ucy52YXJpYWJsZVdpZHRoID09PSBmYWxzZSkge1xuICAgICAgICAgICAgXy5zbGlkZVdpZHRoID0gTWF0aC5jZWlsKF8ubGlzdFdpZHRoIC8gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyk7XG4gICAgICAgICAgICBfLiRzbGlkZVRyYWNrLndpZHRoKE1hdGguY2VpbCgoXy5zbGlkZVdpZHRoICogXy4kc2xpZGVUcmFjay5jaGlsZHJlbignLnNsaWNrLXNsaWRlJykubGVuZ3RoKSkpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoXy5vcHRpb25zLnZhcmlhYmxlV2lkdGggPT09IHRydWUpIHtcbiAgICAgICAgICAgIF8uJHNsaWRlVHJhY2sud2lkdGgoNTAwMCAqIF8uc2xpZGVDb3VudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfLnNsaWRlV2lkdGggPSBNYXRoLmNlaWwoXy5saXN0V2lkdGgpO1xuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5oZWlnaHQoTWF0aC5jZWlsKChfLiRzbGlkZXMuZmlyc3QoKS5vdXRlckhlaWdodCh0cnVlKSAqIF8uJHNsaWRlVHJhY2suY2hpbGRyZW4oJy5zbGljay1zbGlkZScpLmxlbmd0aCkpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvZmZzZXQgPSBfLiRzbGlkZXMuZmlyc3QoKS5vdXRlcldpZHRoKHRydWUpIC0gXy4kc2xpZGVzLmZpcnN0KCkud2lkdGgoKTtcbiAgICAgICAgaWYgKF8ub3B0aW9ucy52YXJpYWJsZVdpZHRoID09PSBmYWxzZSkgXy4kc2xpZGVUcmFjay5jaGlsZHJlbignLnNsaWNrLXNsaWRlJykud2lkdGgoXy5zbGlkZVdpZHRoIC0gb2Zmc2V0KTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuc2V0RmFkZSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcyxcbiAgICAgICAgICAgIHRhcmdldExlZnQ7XG5cbiAgICAgICAgXy4kc2xpZGVzLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRhcmdldExlZnQgPSAoXy5zbGlkZVdpZHRoICogaW5kZXgpICogLTE7XG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLnJ0bCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICQoZWxlbWVudCkuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiB0YXJnZXRMZWZ0LFxuICAgICAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgICAgIHpJbmRleDogXy5vcHRpb25zLnpJbmRleCAtIDIsXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChlbGVtZW50KS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogdGFyZ2V0TGVmdCxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgICAgICB6SW5kZXg6IF8ub3B0aW9ucy56SW5kZXggLSAyLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF8uJHNsaWRlcy5lcShfLmN1cnJlbnRTbGlkZSkuY3NzKHtcbiAgICAgICAgICAgIHpJbmRleDogXy5vcHRpb25zLnpJbmRleCAtIDEsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5zZXRIZWlnaHQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgPT09IDEgJiYgXy5vcHRpb25zLmFkYXB0aXZlSGVpZ2h0ID09PSB0cnVlICYmIF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRIZWlnaHQgPSBfLiRzbGlkZXMuZXEoXy5jdXJyZW50U2xpZGUpLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgXy4kbGlzdC5jc3MoJ2hlaWdodCcsIHRhcmdldEhlaWdodCk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuc2V0T3B0aW9uID1cbiAgICBTbGljay5wcm90b3R5cGUuc2xpY2tTZXRPcHRpb24gPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogYWNjZXB0cyBhcmd1bWVudHMgaW4gZm9ybWF0IG9mOlxuICAgICAgICAgKlxuICAgICAgICAgKiAgLSBmb3IgY2hhbmdpbmcgYSBzaW5nbGUgb3B0aW9uJ3MgdmFsdWU6XG4gICAgICAgICAqICAgICAuc2xpY2soXCJzZXRPcHRpb25cIiwgb3B0aW9uLCB2YWx1ZSwgcmVmcmVzaCApXG4gICAgICAgICAqXG4gICAgICAgICAqICAtIGZvciBjaGFuZ2luZyBhIHNldCBvZiByZXNwb25zaXZlIG9wdGlvbnM6XG4gICAgICAgICAqICAgICAuc2xpY2soXCJzZXRPcHRpb25cIiwgJ3Jlc3BvbnNpdmUnLCBbe30sIC4uLl0sIHJlZnJlc2ggKVxuICAgICAgICAgKlxuICAgICAgICAgKiAgLSBmb3IgdXBkYXRpbmcgbXVsdGlwbGUgdmFsdWVzIGF0IG9uY2UgKG5vdCByZXNwb25zaXZlKVxuICAgICAgICAgKiAgICAgLnNsaWNrKFwic2V0T3B0aW9uXCIsIHsgJ29wdGlvbic6IHZhbHVlLCAuLi4gfSwgcmVmcmVzaCApXG4gICAgICAgICAqL1xuXG4gICAgICAgIHZhciBfID0gdGhpcywgbCwgaXRlbSwgb3B0aW9uLCB2YWx1ZSwgcmVmcmVzaCA9IGZhbHNlLCB0eXBlO1xuXG4gICAgICAgIGlmKCAkLnR5cGUoIGFyZ3VtZW50c1swXSApID09PSAnb2JqZWN0JyApIHtcblxuICAgICAgICAgICAgb3B0aW9uID0gIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIHJlZnJlc2ggPSBhcmd1bWVudHNbMV07XG4gICAgICAgICAgICB0eXBlID0gJ211bHRpcGxlJztcblxuICAgICAgICB9IGVsc2UgaWYgKCAkLnR5cGUoIGFyZ3VtZW50c1swXSApID09PSAnc3RyaW5nJyApIHtcblxuICAgICAgICAgICAgb3B0aW9uID0gIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgIHZhbHVlID0gYXJndW1lbnRzWzFdO1xuICAgICAgICAgICAgcmVmcmVzaCA9IGFyZ3VtZW50c1syXTtcblxuICAgICAgICAgICAgaWYgKCBhcmd1bWVudHNbMF0gPT09ICdyZXNwb25zaXZlJyAmJiAkLnR5cGUoIGFyZ3VtZW50c1sxXSApID09PSAnYXJyYXknICkge1xuXG4gICAgICAgICAgICAgICAgdHlwZSA9ICdyZXNwb25zaXZlJztcblxuICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIGFyZ3VtZW50c1sxXSAhPT0gJ3VuZGVmaW5lZCcgKSB7XG5cbiAgICAgICAgICAgICAgICB0eXBlID0gJ3NpbmdsZSc7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCB0eXBlID09PSAnc2luZ2xlJyApIHtcblxuICAgICAgICAgICAgXy5vcHRpb25zW29wdGlvbl0gPSB2YWx1ZTtcblxuXG4gICAgICAgIH0gZWxzZSBpZiAoIHR5cGUgPT09ICdtdWx0aXBsZScgKSB7XG5cbiAgICAgICAgICAgICQuZWFjaCggb3B0aW9uICwgZnVuY3Rpb24oIG9wdCwgdmFsICkge1xuXG4gICAgICAgICAgICAgICAgXy5vcHRpb25zW29wdF0gPSB2YWw7XG5cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfSBlbHNlIGlmICggdHlwZSA9PT0gJ3Jlc3BvbnNpdmUnICkge1xuXG4gICAgICAgICAgICBmb3IgKCBpdGVtIGluIHZhbHVlICkge1xuXG4gICAgICAgICAgICAgICAgaWYoICQudHlwZSggXy5vcHRpb25zLnJlc3BvbnNpdmUgKSAhPT0gJ2FycmF5JyApIHtcblxuICAgICAgICAgICAgICAgICAgICBfLm9wdGlvbnMucmVzcG9uc2l2ZSA9IFsgdmFsdWVbaXRlbV0gXTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbCA9IF8ub3B0aW9ucy5yZXNwb25zaXZlLmxlbmd0aC0xO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCB0aGUgcmVzcG9uc2l2ZSBvYmplY3QgYW5kIHNwbGljZSBvdXQgZHVwbGljYXRlcy5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUoIGwgPj0gMCApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF8ub3B0aW9ucy5yZXNwb25zaXZlW2xdLmJyZWFrcG9pbnQgPT09IHZhbHVlW2l0ZW1dLmJyZWFrcG9pbnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLm9wdGlvbnMucmVzcG9uc2l2ZS5zcGxpY2UobCwxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsLS07XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucy5yZXNwb25zaXZlLnB1c2goIHZhbHVlW2l0ZW1dICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCByZWZyZXNoICkge1xuXG4gICAgICAgICAgICBfLnVubG9hZCgpO1xuICAgICAgICAgICAgXy5yZWluaXQoKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnNldFBvc2l0aW9uID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIF8uc2V0RGltZW5zaW9ucygpO1xuXG4gICAgICAgIF8uc2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgXy5zZXRDU1MoXy5nZXRMZWZ0KF8uY3VycmVudFNsaWRlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfLnNldEZhZGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdzZXRQb3NpdGlvbicsIFtfXSk7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnNldFByb3BzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzLFxuICAgICAgICAgICAgYm9keVN0eWxlID0gZG9jdW1lbnQuYm9keS5zdHlsZTtcblxuICAgICAgICBfLnBvc2l0aW9uUHJvcCA9IF8ub3B0aW9ucy52ZXJ0aWNhbCA9PT0gdHJ1ZSA/ICd0b3AnIDogJ2xlZnQnO1xuXG4gICAgICAgIGlmIChfLnBvc2l0aW9uUHJvcCA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICAgIF8uJHNsaWRlci5hZGRDbGFzcygnc2xpY2stdmVydGljYWwnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF8uJHNsaWRlci5yZW1vdmVDbGFzcygnc2xpY2stdmVydGljYWwnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChib2R5U3R5bGUuV2Via2l0VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBib2R5U3R5bGUuTW96VHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICBib2R5U3R5bGUubXNUcmFuc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGlmIChfLm9wdGlvbnMudXNlQ1NTID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgXy5jc3NUcmFuc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5mYWRlICkge1xuICAgICAgICAgICAgaWYgKCB0eXBlb2YgXy5vcHRpb25zLnpJbmRleCA9PT0gJ251bWJlcicgKSB7XG4gICAgICAgICAgICAgICAgaWYoIF8ub3B0aW9ucy56SW5kZXggPCAzICkge1xuICAgICAgICAgICAgICAgICAgICBfLm9wdGlvbnMuekluZGV4ID0gMztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF8ub3B0aW9ucy56SW5kZXggPSBfLmRlZmF1bHRzLnpJbmRleDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChib2R5U3R5bGUuT1RyYW5zZm9ybSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBfLmFuaW1UeXBlID0gJ09UcmFuc2Zvcm0nO1xuICAgICAgICAgICAgXy50cmFuc2Zvcm1UeXBlID0gJy1vLXRyYW5zZm9ybSc7XG4gICAgICAgICAgICBfLnRyYW5zaXRpb25UeXBlID0gJ09UcmFuc2l0aW9uJztcbiAgICAgICAgICAgIGlmIChib2R5U3R5bGUucGVyc3BlY3RpdmVQcm9wZXJ0eSA9PT0gdW5kZWZpbmVkICYmIGJvZHlTdHlsZS53ZWJraXRQZXJzcGVjdGl2ZSA9PT0gdW5kZWZpbmVkKSBfLmFuaW1UeXBlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvZHlTdHlsZS5Nb3pUcmFuc2Zvcm0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgXy5hbmltVHlwZSA9ICdNb3pUcmFuc2Zvcm0nO1xuICAgICAgICAgICAgXy50cmFuc2Zvcm1UeXBlID0gJy1tb3otdHJhbnNmb3JtJztcbiAgICAgICAgICAgIF8udHJhbnNpdGlvblR5cGUgPSAnTW96VHJhbnNpdGlvbic7XG4gICAgICAgICAgICBpZiAoYm9keVN0eWxlLnBlcnNwZWN0aXZlUHJvcGVydHkgPT09IHVuZGVmaW5lZCAmJiBib2R5U3R5bGUuTW96UGVyc3BlY3RpdmUgPT09IHVuZGVmaW5lZCkgXy5hbmltVHlwZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChib2R5U3R5bGUud2Via2l0VHJhbnNmb3JtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF8uYW5pbVR5cGUgPSAnd2Via2l0VHJhbnNmb3JtJztcbiAgICAgICAgICAgIF8udHJhbnNmb3JtVHlwZSA9ICctd2Via2l0LXRyYW5zZm9ybSc7XG4gICAgICAgICAgICBfLnRyYW5zaXRpb25UeXBlID0gJ3dlYmtpdFRyYW5zaXRpb24nO1xuICAgICAgICAgICAgaWYgKGJvZHlTdHlsZS5wZXJzcGVjdGl2ZVByb3BlcnR5ID09PSB1bmRlZmluZWQgJiYgYm9keVN0eWxlLndlYmtpdFBlcnNwZWN0aXZlID09PSB1bmRlZmluZWQpIF8uYW5pbVR5cGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYm9keVN0eWxlLm1zVHJhbnNmb3JtICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF8uYW5pbVR5cGUgPSAnbXNUcmFuc2Zvcm0nO1xuICAgICAgICAgICAgXy50cmFuc2Zvcm1UeXBlID0gJy1tcy10cmFuc2Zvcm0nO1xuICAgICAgICAgICAgXy50cmFuc2l0aW9uVHlwZSA9ICdtc1RyYW5zaXRpb24nO1xuICAgICAgICAgICAgaWYgKGJvZHlTdHlsZS5tc1RyYW5zZm9ybSA9PT0gdW5kZWZpbmVkKSBfLmFuaW1UeXBlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJvZHlTdHlsZS50cmFuc2Zvcm0gIT09IHVuZGVmaW5lZCAmJiBfLmFuaW1UeXBlICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgXy5hbmltVHlwZSA9ICd0cmFuc2Zvcm0nO1xuICAgICAgICAgICAgXy50cmFuc2Zvcm1UeXBlID0gJ3RyYW5zZm9ybSc7XG4gICAgICAgICAgICBfLnRyYW5zaXRpb25UeXBlID0gJ3RyYW5zaXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIF8udHJhbnNmb3Jtc0VuYWJsZWQgPSBfLm9wdGlvbnMudXNlVHJhbnNmb3JtICYmIChfLmFuaW1UeXBlICE9PSBudWxsICYmIF8uYW5pbVR5cGUgIT09IGZhbHNlKTtcbiAgICB9O1xuXG5cbiAgICBTbGljay5wcm90b3R5cGUuc2V0U2xpZGVDbGFzc2VzID0gZnVuY3Rpb24oaW5kZXgpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBjZW50ZXJPZmZzZXQsIGFsbFNsaWRlcywgaW5kZXhPZmZzZXQsIHJlbWFpbmRlcjtcblxuICAgICAgICBhbGxTbGlkZXMgPSBfLiRzbGlkZXJcbiAgICAgICAgICAgIC5maW5kKCcuc2xpY2stc2xpZGUnKVxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1hY3RpdmUgc2xpY2stY2VudGVyIHNsaWNrLWN1cnJlbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcblxuICAgICAgICBfLiRzbGlkZXNcbiAgICAgICAgICAgIC5lcShpbmRleClcbiAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stY3VycmVudCcpO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuY2VudGVyTW9kZSA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICB2YXIgZXZlbkNvZWYgPSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICUgMiA9PT0gMCA/IDEgOiAwO1xuXG4gICAgICAgICAgICBjZW50ZXJPZmZzZXQgPSBNYXRoLmZsb29yKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyKTtcblxuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gdHJ1ZSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IGNlbnRlck9mZnNldCAmJiBpbmRleCA8PSAoXy5zbGlkZUNvdW50IC0gMSkgLSBjZW50ZXJPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgXy4kc2xpZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoaW5kZXggLSBjZW50ZXJPZmZzZXQgKyBldmVuQ29lZiwgaW5kZXggKyBjZW50ZXJPZmZzZXQgKyAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdzbGljay1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGluZGV4T2Zmc2V0ID0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyArIGluZGV4O1xuICAgICAgICAgICAgICAgICAgICBhbGxTbGlkZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleE9mZnNldCAtIGNlbnRlck9mZnNldCArIDEgKyBldmVuQ29lZiwgaW5kZXhPZmZzZXQgKyBjZW50ZXJPZmZzZXQgKyAyKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdzbGljay1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcblxuICAgICAgICAgICAgICAgICAgICBhbGxTbGlkZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lcShhbGxTbGlkZXMubGVuZ3RoIC0gMSAtIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWNlbnRlcicpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9PT0gXy5zbGlkZUNvdW50IC0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGFsbFNsaWRlc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmVxKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWNlbnRlcicpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF8uJHNsaWRlc1xuICAgICAgICAgICAgICAgIC5lcShpbmRleClcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWNlbnRlcicpO1xuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDw9IChfLnNsaWRlQ291bnQgLSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSkge1xuXG4gICAgICAgICAgICAgICAgXy4kc2xpZGVzXG4gICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleCwgaW5kZXggKyBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KVxuICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFsbFNsaWRlcy5sZW5ndGggPD0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuXG4gICAgICAgICAgICAgICAgYWxsU2xpZGVzXG4gICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICByZW1haW5kZXIgPSBfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93O1xuICAgICAgICAgICAgICAgIGluZGV4T2Zmc2V0ID0gXy5vcHRpb25zLmluZmluaXRlID09PSB0cnVlID8gXy5vcHRpb25zLnNsaWRlc1RvU2hvdyArIGluZGV4IDogaW5kZXg7XG5cbiAgICAgICAgICAgICAgICBpZiAoXy5vcHRpb25zLnNsaWRlc1RvU2hvdyA9PSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgJiYgKF8uc2xpZGVDb3VudCAtIGluZGV4KSA8IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcblxuICAgICAgICAgICAgICAgICAgICBhbGxTbGlkZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZShpbmRleE9mZnNldCAtIChfLm9wdGlvbnMuc2xpZGVzVG9TaG93IC0gcmVtYWluZGVyKSwgaW5kZXhPZmZzZXQgKyByZW1haW5kZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWFjdGl2ZScpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgYWxsU2xpZGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2xpY2UoaW5kZXhPZmZzZXQsIGluZGV4T2Zmc2V0ICsgXy5vcHRpb25zLnNsaWRlc1RvU2hvdylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnc2xpY2stYWN0aXZlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMubGF6eUxvYWQgPT09ICdvbmRlbWFuZCcgfHwgXy5vcHRpb25zLmxhenlMb2FkID09PSAnYW50aWNpcGF0ZWQnKSB7XG4gICAgICAgICAgICBfLmxhenlMb2FkKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnNldHVwSW5maW5pdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBpLCBzbGlkZUluZGV4LCBpbmZpbml0ZUNvdW50O1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZmFkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgXy5vcHRpb25zLmNlbnRlck1vZGUgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuaW5maW5pdGUgPT09IHRydWUgJiYgXy5vcHRpb25zLmZhZGUgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgIHNsaWRlSW5kZXggPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuXG4gICAgICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZmluaXRlQ291bnQgPSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93ICsgMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZUNvdW50ID0gXy5vcHRpb25zLnNsaWRlc1RvU2hvdztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBfLnNsaWRlQ291bnQ7IGkgPiAoXy5zbGlkZUNvdW50IC1cbiAgICAgICAgICAgICAgICAgICAgICAgIGluZmluaXRlQ291bnQpOyBpIC09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleCA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAkKF8uJHNsaWRlc1tzbGlkZUluZGV4XSkuY2xvbmUodHJ1ZSkuYXR0cignaWQnLCAnJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkYXRhLXNsaWNrLWluZGV4Jywgc2xpZGVJbmRleCAtIF8uc2xpZGVDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wcmVwZW5kVG8oXy4kc2xpZGVUcmFjaykuYWRkQ2xhc3MoJ3NsaWNrLWNsb25lZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgaW5maW5pdGVDb3VudCAgKyBfLnNsaWRlQ291bnQ7IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZUluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgJChfLiRzbGlkZXNbc2xpZGVJbmRleF0pLmNsb25lKHRydWUpLmF0dHIoJ2lkJywgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignZGF0YS1zbGljay1pbmRleCcsIHNsaWRlSW5kZXggKyBfLnNsaWRlQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8oXy4kc2xpZGVUcmFjaykuYWRkQ2xhc3MoJ3NsaWNrLWNsb25lZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfLiRzbGlkZVRyYWNrLmZpbmQoJy5zbGljay1jbG9uZWQnKS5maW5kKCdbaWRdJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hdHRyKCdpZCcsICcnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuaW50ZXJydXB0ID0gZnVuY3Rpb24oIHRvZ2dsZSApIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXM7XG5cbiAgICAgICAgaWYoICF0b2dnbGUgKSB7XG4gICAgICAgICAgICBfLmF1dG9QbGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgXy5pbnRlcnJ1cHRlZCA9IHRvZ2dsZTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuc2VsZWN0SGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIHZhciB0YXJnZXRFbGVtZW50ID1cbiAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KS5pcygnLnNsaWNrLXNsaWRlJykgP1xuICAgICAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KSA6XG4gICAgICAgICAgICAgICAgJChldmVudC50YXJnZXQpLnBhcmVudHMoJy5zbGljay1zbGlkZScpO1xuXG4gICAgICAgIHZhciBpbmRleCA9IHBhcnNlSW50KHRhcmdldEVsZW1lbnQuYXR0cignZGF0YS1zbGljay1pbmRleCcpKTtcblxuICAgICAgICBpZiAoIWluZGV4KSBpbmRleCA9IDA7XG5cbiAgICAgICAgaWYgKF8uc2xpZGVDb3VudCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG5cbiAgICAgICAgICAgIF8uc2xpZGVIYW5kbGVyKGluZGV4LCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgfVxuXG4gICAgICAgIF8uc2xpZGVIYW5kbGVyKGluZGV4KTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuc2xpZGVIYW5kbGVyID0gZnVuY3Rpb24oaW5kZXgsIHN5bmMsIGRvbnRBbmltYXRlKSB7XG5cbiAgICAgICAgdmFyIHRhcmdldFNsaWRlLCBhbmltU2xpZGUsIG9sZFNsaWRlLCBzbGlkZUxlZnQsIHRhcmdldExlZnQgPSBudWxsLFxuICAgICAgICAgICAgXyA9IHRoaXMsIG5hdlRhcmdldDtcblxuICAgICAgICBzeW5jID0gc3luYyB8fCBmYWxzZTtcblxuICAgICAgICBpZiAoXy5hbmltYXRpbmcgPT09IHRydWUgJiYgXy5vcHRpb25zLndhaXRGb3JBbmltYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5vcHRpb25zLmZhZGUgPT09IHRydWUgJiYgXy5jdXJyZW50U2xpZGUgPT09IGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3luYyA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIF8uYXNOYXZGb3IoaW5kZXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFyZ2V0U2xpZGUgPSBpbmRleDtcbiAgICAgICAgdGFyZ2V0TGVmdCA9IF8uZ2V0TGVmdCh0YXJnZXRTbGlkZSk7XG4gICAgICAgIHNsaWRlTGVmdCA9IF8uZ2V0TGVmdChfLmN1cnJlbnRTbGlkZSk7XG5cbiAgICAgICAgXy5jdXJyZW50TGVmdCA9IF8uc3dpcGVMZWZ0ID09PSBudWxsID8gc2xpZGVMZWZ0IDogXy5zd2lwZUxlZnQ7XG5cbiAgICAgICAgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gZmFsc2UgJiYgXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IGZhbHNlICYmIChpbmRleCA8IDAgfHwgaW5kZXggPiBfLmdldERvdENvdW50KCkgKiBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpKSB7XG4gICAgICAgICAgICBpZiAoXy5vcHRpb25zLmZhZGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0U2xpZGUgPSBfLmN1cnJlbnRTbGlkZTtcbiAgICAgICAgICAgICAgICBpZiAoZG9udEFuaW1hdGUgIT09IHRydWUgJiYgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuICAgICAgICAgICAgICAgICAgICBfLmFuaW1hdGVTbGlkZShzbGlkZUxlZnQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgXy5wb3N0U2xpZGUodGFyZ2V0U2xpZGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBfLnBvc3RTbGlkZSh0YXJnZXRTbGlkZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKF8ub3B0aW9ucy5pbmZpbml0ZSA9PT0gZmFsc2UgJiYgXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IHRydWUgJiYgKGluZGV4IDwgMCB8fCBpbmRleCA+IChfLnNsaWRlQ291bnQgLSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpKSkge1xuICAgICAgICAgICAgaWYgKF8ub3B0aW9ucy5mYWRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFNsaWRlID0gXy5jdXJyZW50U2xpZGU7XG4gICAgICAgICAgICAgICAgaWYgKGRvbnRBbmltYXRlICE9PSB0cnVlICYmIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5hbmltYXRlU2xpZGUoc2xpZGVMZWZ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8ucG9zdFNsaWRlKHRhcmdldFNsaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgXy5wb3N0U2xpZGUodGFyZ2V0U2xpZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICggXy5vcHRpb25zLmF1dG9wbGF5ICkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChfLmF1dG9QbGF5VGltZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhcmdldFNsaWRlIDwgMCkge1xuICAgICAgICAgICAgaWYgKF8uc2xpZGVDb3VudCAlIF8ub3B0aW9ucy5zbGlkZXNUb1Njcm9sbCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGFuaW1TbGlkZSA9IF8uc2xpZGVDb3VudCAtIChfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmltU2xpZGUgPSBfLnNsaWRlQ291bnQgKyB0YXJnZXRTbGlkZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRTbGlkZSA+PSBfLnNsaWRlQ291bnQpIHtcbiAgICAgICAgICAgIGlmIChfLnNsaWRlQ291bnQgJSBfLm9wdGlvbnMuc2xpZGVzVG9TY3JvbGwgIT09IDApIHtcbiAgICAgICAgICAgICAgICBhbmltU2xpZGUgPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbmltU2xpZGUgPSB0YXJnZXRTbGlkZSAtIF8uc2xpZGVDb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFuaW1TbGlkZSA9IHRhcmdldFNsaWRlO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5hbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdiZWZvcmVDaGFuZ2UnLCBbXywgXy5jdXJyZW50U2xpZGUsIGFuaW1TbGlkZV0pO1xuXG4gICAgICAgIG9sZFNsaWRlID0gXy5jdXJyZW50U2xpZGU7XG4gICAgICAgIF8uY3VycmVudFNsaWRlID0gYW5pbVNsaWRlO1xuXG4gICAgICAgIF8uc2V0U2xpZGVDbGFzc2VzKF8uY3VycmVudFNsaWRlKTtcblxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5hc05hdkZvciApIHtcblxuICAgICAgICAgICAgbmF2VGFyZ2V0ID0gXy5nZXROYXZUYXJnZXQoKTtcbiAgICAgICAgICAgIG5hdlRhcmdldCA9IG5hdlRhcmdldC5zbGljaygnZ2V0U2xpY2snKTtcblxuICAgICAgICAgICAgaWYgKCBuYXZUYXJnZXQuc2xpZGVDb3VudCA8PSBuYXZUYXJnZXQub3B0aW9ucy5zbGlkZXNUb1Nob3cgKSB7XG4gICAgICAgICAgICAgICAgbmF2VGFyZ2V0LnNldFNsaWRlQ2xhc3NlcyhfLmN1cnJlbnRTbGlkZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIF8udXBkYXRlRG90cygpO1xuICAgICAgICBfLnVwZGF0ZUFycm93cygpO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMuZmFkZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGRvbnRBbmltYXRlICE9PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICBfLmZhZGVTbGlkZU91dChvbGRTbGlkZSk7XG5cbiAgICAgICAgICAgICAgICBfLmZhZGVTbGlkZShhbmltU2xpZGUsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBfLnBvc3RTbGlkZShhbmltU2xpZGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF8ucG9zdFNsaWRlKGFuaW1TbGlkZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfLmFuaW1hdGVIZWlnaHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb250QW5pbWF0ZSAhPT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICBfLmFuaW1hdGVTbGlkZSh0YXJnZXRMZWZ0LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfLnBvc3RTbGlkZShhbmltU2xpZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBfLnBvc3RTbGlkZShhbmltU2xpZGUpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnN0YXJ0TG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmFycm93cyA9PT0gdHJ1ZSAmJiBfLnNsaWRlQ291bnQgPiBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG5cbiAgICAgICAgICAgIF8uJHByZXZBcnJvdy5oaWRlKCk7XG4gICAgICAgICAgICBfLiRuZXh0QXJyb3cuaGlkZSgpO1xuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5vcHRpb25zLmRvdHMgPT09IHRydWUgJiYgXy5zbGlkZUNvdW50ID4gXy5vcHRpb25zLnNsaWRlc1RvU2hvdykge1xuXG4gICAgICAgICAgICBfLiRkb3RzLmhpZGUoKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgXy4kc2xpZGVyLmFkZENsYXNzKCdzbGljay1sb2FkaW5nJyk7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnN3aXBlRGlyZWN0aW9uID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIHhEaXN0LCB5RGlzdCwgciwgc3dpcGVBbmdsZSwgXyA9IHRoaXM7XG5cbiAgICAgICAgeERpc3QgPSBfLnRvdWNoT2JqZWN0LnN0YXJ0WCAtIF8udG91Y2hPYmplY3QuY3VyWDtcbiAgICAgICAgeURpc3QgPSBfLnRvdWNoT2JqZWN0LnN0YXJ0WSAtIF8udG91Y2hPYmplY3QuY3VyWTtcbiAgICAgICAgciA9IE1hdGguYXRhbjIoeURpc3QsIHhEaXN0KTtcblxuICAgICAgICBzd2lwZUFuZ2xlID0gTWF0aC5yb3VuZChyICogMTgwIC8gTWF0aC5QSSk7XG4gICAgICAgIGlmIChzd2lwZUFuZ2xlIDwgMCkge1xuICAgICAgICAgICAgc3dpcGVBbmdsZSA9IDM2MCAtIE1hdGguYWJzKHN3aXBlQW5nbGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKChzd2lwZUFuZ2xlIDw9IDQ1KSAmJiAoc3dpcGVBbmdsZSA+PSAwKSkge1xuICAgICAgICAgICAgcmV0dXJuIChfLm9wdGlvbnMucnRsID09PSBmYWxzZSA/ICdsZWZ0JyA6ICdyaWdodCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoc3dpcGVBbmdsZSA8PSAzNjApICYmIChzd2lwZUFuZ2xlID49IDMxNSkpIHtcbiAgICAgICAgICAgIHJldHVybiAoXy5vcHRpb25zLnJ0bCA9PT0gZmFsc2UgPyAnbGVmdCcgOiAncmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKHN3aXBlQW5nbGUgPj0gMTM1KSAmJiAoc3dpcGVBbmdsZSA8PSAyMjUpKSB7XG4gICAgICAgICAgICByZXR1cm4gKF8ub3B0aW9ucy5ydGwgPT09IGZhbHNlID8gJ3JpZ2h0JyA6ICdsZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmICgoc3dpcGVBbmdsZSA+PSAzNSkgJiYgKHN3aXBlQW5nbGUgPD0gMTM1KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnZG93bic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAndXAnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuICd2ZXJ0aWNhbCc7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnN3aXBlRW5kID0gZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBzbGlkZUNvdW50LFxuICAgICAgICAgICAgZGlyZWN0aW9uO1xuXG4gICAgICAgIF8uZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICAgICAgXy5zd2lwaW5nID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKF8uc2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICBfLnNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5pbnRlcnJ1cHRlZCA9IGZhbHNlO1xuICAgICAgICBfLnNob3VsZENsaWNrID0gKCBfLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID4gMTAgKSA/IGZhbHNlIDogdHJ1ZTtcblxuICAgICAgICBpZiAoIF8udG91Y2hPYmplY3QuY3VyWCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBfLnRvdWNoT2JqZWN0LmVkZ2VIaXQgPT09IHRydWUgKSB7XG4gICAgICAgICAgICBfLiRzbGlkZXIudHJpZ2dlcignZWRnZScsIFtfLCBfLnN3aXBlRGlyZWN0aW9uKCkgXSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIF8udG91Y2hPYmplY3Quc3dpcGVMZW5ndGggPj0gXy50b3VjaE9iamVjdC5taW5Td2lwZSApIHtcblxuICAgICAgICAgICAgZGlyZWN0aW9uID0gXy5zd2lwZURpcmVjdGlvbigpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKCBkaXJlY3Rpb24gKSB7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICBjYXNlICdkb3duJzpcblxuICAgICAgICAgICAgICAgICAgICBzbGlkZUNvdW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucy5zd2lwZVRvU2xpZGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uY2hlY2tOYXZpZ2FibGUoIF8uY3VycmVudFNsaWRlICsgXy5nZXRTbGlkZUNvdW50KCkgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgKyBfLmdldFNsaWRlQ291bnQoKTtcblxuICAgICAgICAgICAgICAgICAgICBfLmN1cnJlbnREaXJlY3Rpb24gPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAncmlnaHQnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VwJzpcblxuICAgICAgICAgICAgICAgICAgICBzbGlkZUNvdW50ID1cbiAgICAgICAgICAgICAgICAgICAgICAgIF8ub3B0aW9ucy5zd2lwZVRvU2xpZGUgP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uY2hlY2tOYXZpZ2FibGUoIF8uY3VycmVudFNsaWRlIC0gXy5nZXRTbGlkZUNvdW50KCkgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5jdXJyZW50U2xpZGUgLSBfLmdldFNsaWRlQ291bnQoKTtcblxuICAgICAgICAgICAgICAgICAgICBfLmN1cnJlbnREaXJlY3Rpb24gPSAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcblxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCBkaXJlY3Rpb24gIT0gJ3ZlcnRpY2FsJyApIHtcblxuICAgICAgICAgICAgICAgIF8uc2xpZGVIYW5kbGVyKCBzbGlkZUNvdW50ICk7XG4gICAgICAgICAgICAgICAgXy50b3VjaE9iamVjdCA9IHt9O1xuICAgICAgICAgICAgICAgIF8uJHNsaWRlci50cmlnZ2VyKCdzd2lwZScsIFtfLCBkaXJlY3Rpb24gXSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICBpZiAoIF8udG91Y2hPYmplY3Quc3RhcnRYICE9PSBfLnRvdWNoT2JqZWN0LmN1clggKSB7XG5cbiAgICAgICAgICAgICAgICBfLnNsaWRlSGFuZGxlciggXy5jdXJyZW50U2xpZGUgKTtcbiAgICAgICAgICAgICAgICBfLnRvdWNoT2JqZWN0ID0ge307XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnN3aXBlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgdmFyIF8gPSB0aGlzO1xuXG4gICAgICAgIGlmICgoXy5vcHRpb25zLnN3aXBlID09PSBmYWxzZSkgfHwgKCdvbnRvdWNoZW5kJyBpbiBkb2N1bWVudCAmJiBfLm9wdGlvbnMuc3dpcGUgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKF8ub3B0aW9ucy5kcmFnZ2FibGUgPT09IGZhbHNlICYmIGV2ZW50LnR5cGUuaW5kZXhPZignbW91c2UnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIF8udG91Y2hPYmplY3QuZmluZ2VyQ291bnQgPSBldmVudC5vcmlnaW5hbEV2ZW50ICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggOiAxO1xuXG4gICAgICAgIF8udG91Y2hPYmplY3QubWluU3dpcGUgPSBfLmxpc3RXaWR0aCAvIF8ub3B0aW9uc1xuICAgICAgICAgICAgLnRvdWNoVGhyZXNob2xkO1xuXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWxTd2lwaW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLnRvdWNoT2JqZWN0Lm1pblN3aXBlID0gXy5saXN0SGVpZ2h0IC8gXy5vcHRpb25zXG4gICAgICAgICAgICAgICAgLnRvdWNoVGhyZXNob2xkO1xuICAgICAgICB9XG5cbiAgICAgICAgc3dpdGNoIChldmVudC5kYXRhLmFjdGlvbikge1xuXG4gICAgICAgICAgICBjYXNlICdzdGFydCc6XG4gICAgICAgICAgICAgICAgXy5zd2lwZVN0YXJ0KGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSAnbW92ZSc6XG4gICAgICAgICAgICAgICAgXy5zd2lwZU1vdmUoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgIF8uc3dpcGVFbmQoZXZlbnQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUuc3dpcGVNb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICBlZGdlV2FzSGl0ID0gZmFsc2UsXG4gICAgICAgICAgICBjdXJMZWZ0LCBzd2lwZURpcmVjdGlvbiwgc3dpcGVMZW5ndGgsIHBvc2l0aW9uT2Zmc2V0LCB0b3VjaGVzLCB2ZXJ0aWNhbFN3aXBlTGVuZ3RoO1xuXG4gICAgICAgIHRvdWNoZXMgPSBldmVudC5vcmlnaW5hbEV2ZW50ICE9PSB1bmRlZmluZWQgPyBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgOiBudWxsO1xuXG4gICAgICAgIGlmICghXy5kcmFnZ2luZyB8fCBfLnNjcm9sbGluZyB8fCB0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjdXJMZWZ0ID0gXy5nZXRMZWZ0KF8uY3VycmVudFNsaWRlKTtcblxuICAgICAgICBfLnRvdWNoT2JqZWN0LmN1clggPSB0b3VjaGVzICE9PSB1bmRlZmluZWQgPyB0b3VjaGVzWzBdLnBhZ2VYIDogZXZlbnQuY2xpZW50WDtcbiAgICAgICAgXy50b3VjaE9iamVjdC5jdXJZID0gdG91Y2hlcyAhPT0gdW5kZWZpbmVkID8gdG91Y2hlc1swXS5wYWdlWSA6IGV2ZW50LmNsaWVudFk7XG5cbiAgICAgICAgXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KFxuICAgICAgICAgICAgTWF0aC5wb3coXy50b3VjaE9iamVjdC5jdXJYIC0gXy50b3VjaE9iamVjdC5zdGFydFgsIDIpKSk7XG5cbiAgICAgICAgdmVydGljYWxTd2lwZUxlbmd0aCA9IE1hdGgucm91bmQoTWF0aC5zcXJ0KFxuICAgICAgICAgICAgTWF0aC5wb3coXy50b3VjaE9iamVjdC5jdXJZIC0gXy50b3VjaE9iamVjdC5zdGFydFksIDIpKSk7XG5cbiAgICAgICAgaWYgKCFfLm9wdGlvbnMudmVydGljYWxTd2lwaW5nICYmICFfLnN3aXBpbmcgJiYgdmVydGljYWxTd2lwZUxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgIF8uc2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWxTd2lwaW5nID09PSB0cnVlKSB7XG4gICAgICAgICAgICBfLnRvdWNoT2JqZWN0LnN3aXBlTGVuZ3RoID0gdmVydGljYWxTd2lwZUxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXBlRGlyZWN0aW9uID0gXy5zd2lwZURpcmVjdGlvbigpO1xuXG4gICAgICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50ICE9PSB1bmRlZmluZWQgJiYgXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgIF8uc3dpcGluZyA9IHRydWU7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9zaXRpb25PZmZzZXQgPSAoXy5vcHRpb25zLnJ0bCA9PT0gZmFsc2UgPyAxIDogLTEpICogKF8udG91Y2hPYmplY3QuY3VyWCA+IF8udG91Y2hPYmplY3Quc3RhcnRYID8gMSA6IC0xKTtcbiAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uT2Zmc2V0ID0gXy50b3VjaE9iamVjdC5jdXJZID4gXy50b3VjaE9iamVjdC5zdGFydFkgPyAxIDogLTE7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHN3aXBlTGVuZ3RoID0gXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aDtcblxuICAgICAgICBfLnRvdWNoT2JqZWN0LmVkZ2VIaXQgPSBmYWxzZTtcblxuICAgICAgICBpZiAoXy5vcHRpb25zLmluZmluaXRlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKChfLmN1cnJlbnRTbGlkZSA9PT0gMCAmJiBzd2lwZURpcmVjdGlvbiA9PT0gJ3JpZ2h0JykgfHwgKF8uY3VycmVudFNsaWRlID49IF8uZ2V0RG90Q291bnQoKSAmJiBzd2lwZURpcmVjdGlvbiA9PT0gJ2xlZnQnKSkge1xuICAgICAgICAgICAgICAgIHN3aXBlTGVuZ3RoID0gXy50b3VjaE9iamVjdC5zd2lwZUxlbmd0aCAqIF8ub3B0aW9ucy5lZGdlRnJpY3Rpb247XG4gICAgICAgICAgICAgICAgXy50b3VjaE9iamVjdC5lZGdlSGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLm9wdGlvbnMudmVydGljYWwgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBfLnN3aXBlTGVmdCA9IGN1ckxlZnQgKyBzd2lwZUxlbmd0aCAqIHBvc2l0aW9uT2Zmc2V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXy5zd2lwZUxlZnQgPSBjdXJMZWZ0ICsgKHN3aXBlTGVuZ3RoICogKF8uJGxpc3QuaGVpZ2h0KCkgLyBfLmxpc3RXaWR0aCkpICogcG9zaXRpb25PZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKF8ub3B0aW9ucy52ZXJ0aWNhbFN3aXBpbmcgPT09IHRydWUpIHtcbiAgICAgICAgICAgIF8uc3dpcGVMZWZ0ID0gY3VyTGVmdCArIHN3aXBlTGVuZ3RoICogcG9zaXRpb25PZmZzZXQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5vcHRpb25zLmZhZGUgPT09IHRydWUgfHwgXy5vcHRpb25zLnRvdWNoTW92ZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLmFuaW1hdGluZyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgXy5zd2lwZUxlZnQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5zZXRDU1MoXy5zd2lwZUxlZnQpO1xuXG4gICAgfTtcblxuICAgIFNsaWNrLnByb3RvdHlwZS5zd2lwZVN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICB2YXIgXyA9IHRoaXMsXG4gICAgICAgICAgICB0b3VjaGVzO1xuXG4gICAgICAgIF8uaW50ZXJydXB0ZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmIChfLnRvdWNoT2JqZWN0LmZpbmdlckNvdW50ICE9PSAxIHx8IF8uc2xpZGVDb3VudCA8PSBfLm9wdGlvbnMuc2xpZGVzVG9TaG93KSB7XG4gICAgICAgICAgICBfLnRvdWNoT2JqZWN0ID0ge307XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0b3VjaGVzID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgXy50b3VjaE9iamVjdC5zdGFydFggPSBfLnRvdWNoT2JqZWN0LmN1clggPSB0b3VjaGVzICE9PSB1bmRlZmluZWQgPyB0b3VjaGVzLnBhZ2VYIDogZXZlbnQuY2xpZW50WDtcbiAgICAgICAgXy50b3VjaE9iamVjdC5zdGFydFkgPSBfLnRvdWNoT2JqZWN0LmN1clkgPSB0b3VjaGVzICE9PSB1bmRlZmluZWQgPyB0b3VjaGVzLnBhZ2VZIDogZXZlbnQuY2xpZW50WTtcblxuICAgICAgICBfLmRyYWdnaW5nID0gdHJ1ZTtcblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUudW5maWx0ZXJTbGlkZXMgPSBTbGljay5wcm90b3R5cGUuc2xpY2tVbmZpbHRlciA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoXy4kc2xpZGVzQ2FjaGUgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgXy51bmxvYWQoKTtcblxuICAgICAgICAgICAgXy4kc2xpZGVUcmFjay5jaGlsZHJlbih0aGlzLm9wdGlvbnMuc2xpZGUpLmRldGFjaCgpO1xuXG4gICAgICAgICAgICBfLiRzbGlkZXNDYWNoZS5hcHBlbmRUbyhfLiRzbGlkZVRyYWNrKTtcblxuICAgICAgICAgICAgXy5yZWluaXQoKTtcblxuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnVubG9hZCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICAkKCcuc2xpY2stY2xvbmVkJywgXy4kc2xpZGVyKS5yZW1vdmUoKTtcblxuICAgICAgICBpZiAoXy4kZG90cykge1xuICAgICAgICAgICAgXy4kZG90cy5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChfLiRwcmV2QXJyb3cgJiYgXy5odG1sRXhwci50ZXN0KF8ub3B0aW9ucy5wcmV2QXJyb3cpKSB7XG4gICAgICAgICAgICBfLiRwcmV2QXJyb3cucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy4kbmV4dEFycm93ICYmIF8uaHRtbEV4cHIudGVzdChfLm9wdGlvbnMubmV4dEFycm93KSkge1xuICAgICAgICAgICAgXy4kbmV4dEFycm93LnJlbW92ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgXy4kc2xpZGVzXG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3NsaWNrLXNsaWRlIHNsaWNrLWFjdGl2ZSBzbGljay12aXNpYmxlIHNsaWNrLWN1cnJlbnQnKVxuICAgICAgICAgICAgLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKVxuICAgICAgICAgICAgLmNzcygnd2lkdGgnLCAnJyk7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnVuc2xpY2sgPSBmdW5jdGlvbihmcm9tQnJlYWtwb2ludCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcbiAgICAgICAgXy4kc2xpZGVyLnRyaWdnZXIoJ3Vuc2xpY2snLCBbXywgZnJvbUJyZWFrcG9pbnRdKTtcbiAgICAgICAgXy5kZXN0cm95KCk7XG5cbiAgICB9O1xuXG4gICAgU2xpY2sucHJvdG90eXBlLnVwZGF0ZUFycm93cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcyxcbiAgICAgICAgICAgIGNlbnRlck9mZnNldDtcblxuICAgICAgICBjZW50ZXJPZmZzZXQgPSBNYXRoLmZsb29yKF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgLyAyKTtcblxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5hcnJvd3MgPT09IHRydWUgJiZcbiAgICAgICAgICAgIF8uc2xpZGVDb3VudCA+IF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgJiZcbiAgICAgICAgICAgICFfLm9wdGlvbnMuaW5maW5pdGUgKSB7XG5cbiAgICAgICAgICAgIF8uJHByZXZBcnJvdy5yZW1vdmVDbGFzcygnc2xpY2stZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ2ZhbHNlJyk7XG4gICAgICAgICAgICBfLiRuZXh0QXJyb3cucmVtb3ZlQ2xhc3MoJ3NsaWNrLWRpc2FibGVkJykuYXR0cignYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuXG4gICAgICAgICAgICBpZiAoXy5jdXJyZW50U2xpZGUgPT09IDApIHtcblxuICAgICAgICAgICAgICAgIF8uJHByZXZBcnJvdy5hZGRDbGFzcygnc2xpY2stZGlzYWJsZWQnKS5hdHRyKCdhcmlhLWRpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgICAgICBfLiRuZXh0QXJyb3cucmVtb3ZlQ2xhc3MoJ3NsaWNrLWRpc2FibGVkJykuYXR0cignYXJpYS1kaXNhYmxlZCcsICdmYWxzZScpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uY3VycmVudFNsaWRlID49IF8uc2xpZGVDb3VudCAtIF8ub3B0aW9ucy5zbGlkZXNUb1Nob3cgJiYgXy5vcHRpb25zLmNlbnRlck1vZGUgPT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgICAgICBfLiRuZXh0QXJyb3cuYWRkQ2xhc3MoJ3NsaWNrLWRpc2FibGVkJykuYXR0cignYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgXy4kcHJldkFycm93LnJlbW92ZUNsYXNzKCdzbGljay1kaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChfLmN1cnJlbnRTbGlkZSA+PSBfLnNsaWRlQ291bnQgLSAxICYmIF8ub3B0aW9ucy5jZW50ZXJNb2RlID09PSB0cnVlKSB7XG5cbiAgICAgICAgICAgICAgICBfLiRuZXh0QXJyb3cuYWRkQ2xhc3MoJ3NsaWNrLWRpc2FibGVkJykuYXR0cignYXJpYS1kaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICAgICAgXy4kcHJldkFycm93LnJlbW92ZUNsYXNzKCdzbGljay1kaXNhYmxlZCcpLmF0dHIoJ2FyaWEtZGlzYWJsZWQnLCAnZmFsc2UnKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUudXBkYXRlRG90cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoXy4kZG90cyAhPT0gbnVsbCkge1xuXG4gICAgICAgICAgICBfLiRkb3RzXG4gICAgICAgICAgICAgICAgLmZpbmQoJ2xpJylcbiAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzbGljay1hY3RpdmUnKVxuICAgICAgICAgICAgICAgICAgICAuZW5kKCk7XG5cbiAgICAgICAgICAgIF8uJGRvdHNcbiAgICAgICAgICAgICAgICAuZmluZCgnbGknKVxuICAgICAgICAgICAgICAgIC5lcShNYXRoLmZsb29yKF8uY3VycmVudFNsaWRlIC8gXy5vcHRpb25zLnNsaWRlc1RvU2Nyb2xsKSlcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ3NsaWNrLWFjdGl2ZScpO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBTbGljay5wcm90b3R5cGUudmlzaWJpbGl0eSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBfID0gdGhpcztcblxuICAgICAgICBpZiAoIF8ub3B0aW9ucy5hdXRvcGxheSApIHtcblxuICAgICAgICAgICAgaWYgKCBkb2N1bWVudFtfLmhpZGRlbl0gKSB7XG5cbiAgICAgICAgICAgICAgICBfLmludGVycnVwdGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIF8uaW50ZXJydXB0ZWQgPSBmYWxzZTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICAkLmZuLnNsaWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBfID0gdGhpcyxcbiAgICAgICAgICAgIG9wdCA9IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLFxuICAgICAgICAgICAgbCA9IF8ubGVuZ3RoLFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIHJldDtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHQgPT0gJ29iamVjdCcgfHwgdHlwZW9mIG9wdCA9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICBfW2ldLnNsaWNrID0gbmV3IFNsaWNrKF9baV0sIG9wdCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmV0ID0gX1tpXS5zbGlja1tvcHRdLmFwcGx5KF9baV0uc2xpY2ssIGFyZ3MpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXQgIT0gJ3VuZGVmaW5lZCcpIHJldHVybiByZXQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF87XG4gICAgfTtcblxufSkpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29154\n")},7124:(module,exports)=>{eval("var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// DOM.event.move\n//\n// 2.0.0\n//\n// Stephen Band\n//\n// Triggers 'movestart', 'move' and 'moveend' events after\n// mousemoves following a mousedown cross a distance threshold,\n// similar to the native 'dragstart', 'drag' and 'dragend' events.\n// Move events are throttled to animation frames. Move event objects\n// have the properties:\n//\n// pageX:\n// pageY:     Page coordinates of pointer.\n// startX:\n// startY:    Page coordinates of pointer at movestart.\n// distX:\n// distY:     Distance the pointer has moved since movestart.\n// deltaX:\n// deltaY:    Distance the finger has moved since last event.\n// velocityX:\n// velocityY: Average velocity over last few events.\n\n\n(function(fn) {\n\tif (true) {\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (fn),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n    } else {}\n})(function(){\n\tvar assign = Object.assign || window.jQuery && jQuery.extend;\n\n\t// Number of pixels a pressed pointer travels before movestart\n\t// event is fired.\n\tvar threshold = 8;\n\n\t// Shim for requestAnimationFrame, falling back to timer. See:\n\t// see http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\tvar requestFrame = (function(){\n\t\treturn (\n\t\t\twindow.requestAnimationFrame ||\n\t\t\twindow.webkitRequestAnimationFrame ||\n\t\t\twindow.mozRequestAnimationFrame ||\n\t\t\twindow.oRequestAnimationFrame ||\n\t\t\twindow.msRequestAnimationFrame ||\n\t\t\tfunction(fn, element){\n\t\t\t\treturn window.setTimeout(function(){\n\t\t\t\t\tfn();\n\t\t\t\t}, 25);\n\t\t\t}\n\t\t);\n\t})();\n\t\n\t// Shim for customEvent\n\t// see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill\n\t(function () {\n\t\tif ( typeof window.CustomEvent === \"function\" ) return false;\n\t\tfunction CustomEvent ( event, params ) {\n\t\t\tparams = params || { bubbles: false, cancelable: false, detail: undefined };\n\t\t\tvar evt = document.createEvent( 'CustomEvent' );\n\t\t\tevt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\n\t\t\treturn evt;\n\t\t}\n\t\t\n\t\tCustomEvent.prototype = window.Event.prototype;\n\t\twindow.CustomEvent = CustomEvent;\n\t})();\n\n\tvar ignoreTags = {\n\t\t\ttextarea: true,\n\t\t\tinput: true,\n\t\t\tselect: true,\n\t\t\tbutton: true\n\t\t};\n\n\tvar mouseevents = {\n\t\tmove:   'mousemove',\n\t\tcancel: 'mouseup dragstart',\n\t\tend:    'mouseup'\n\t};\n\n\tvar touchevents = {\n\t\tmove:   'touchmove',\n\t\tcancel: 'touchend',\n\t\tend:    'touchend'\n\t};\n\n\tvar rspaces = /\\s+/;\n\n\n\t// DOM Events\n\n\tvar eventOptions = { bubbles: true, cancelable: true };\n\n\tvar eventsSymbol = typeof Symbol === \"function\" ? Symbol('events') : {};\n\n\tfunction createEvent(type) {\n\t\treturn new CustomEvent(type, eventOptions);\n\t}\n\n\tfunction getEvents(node) {\n\t\treturn node[eventsSymbol] || (node[eventsSymbol] = {});\n\t}\n\n\tfunction on(node, types, fn, data, selector) {\n\t\ttypes = types.split(rspaces);\n\n\t\tvar events = getEvents(node);\n\t\tvar i = types.length;\n\t\tvar handlers, type;\n\n\t\tfunction handler(e) { fn(e, data); }\n\n\t\twhile (i--) {\n\t\t\ttype = types[i];\n\t\t\thandlers = events[type] || (events[type] = []);\n\t\t\thandlers.push([fn, handler]);\n\t\t\tnode.addEventListener(type, handler);\n\t\t}\n\t}\n\n\tfunction off(node, types, fn, selector) {\n\t\ttypes = types.split(rspaces);\n\n\t\tvar events = getEvents(node);\n\t\tvar i = types.length;\n\t\tvar type, handlers, k;\n\n\t\tif (!events) { return; }\n\n\t\twhile (i--) {\n\t\t\ttype = types[i];\n\t\t\thandlers = events[type];\n\t\t\tif (!handlers) { continue; }\n\t\t\tk = handlers.length;\n\t\t\twhile (k--) {\n\t\t\t\tif (handlers[k][0] === fn) {\n\t\t\t\t\tnode.removeEventListener(type, handlers[k][1]);\n\t\t\t\t\thandlers.splice(k, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction trigger(node, type, properties) {\n\t\t// Don't cache events. It prevents you from triggering an event of a\n\t\t// given type from inside the handler of another event of that type.\n\t\tvar event = createEvent(type);\n\t\tif (properties) { assign(event, properties); }\n\t\tnode.dispatchEvent(event);\n\t}\n\n\n\t// Constructors\n\n\tfunction Timer(fn){\n\t\tvar callback = fn,\n\t\t    active = false,\n\t\t    running = false;\n\n\t\tfunction trigger(time) {\n\t\t\tif (active){\n\t\t\t\tcallback();\n\t\t\t\trequestFrame(trigger);\n\t\t\t\trunning = true;\n\t\t\t\tactive = false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\trunning = false;\n\t\t\t}\n\t\t}\n\n\t\tthis.kick = function(fn) {\n\t\t\tactive = true;\n\t\t\tif (!running) { trigger(); }\n\t\t};\n\n\t\tthis.end = function(fn) {\n\t\t\tvar cb = callback;\n\n\t\t\tif (!fn) { return; }\n\n\t\t\t// If the timer is not running, simply call the end callback.\n\t\t\tif (!running) {\n\t\t\t\tfn();\n\t\t\t}\n\t\t\t// If the timer is running, and has been kicked lately, then\n\t\t\t// queue up the current callback and the end callback, otherwise\n\t\t\t// just the end callback.\n\t\t\telse {\n\t\t\t\tcallback = active ?\n\t\t\t\t\tfunction(){ cb(); fn(); } :\n\t\t\t\t\tfn ;\n\n\t\t\t\tactive = true;\n\t\t\t}\n\t\t};\n\t}\n\n\n\t// Functions\n\n\tfunction noop() {}\n\n\tfunction preventDefault(e) {\n\t\te.preventDefault();\n\t}\n\n\tfunction isIgnoreTag(e) {\n\t\treturn !!ignoreTags[e.target.tagName.toLowerCase()];\n\t}\n\n\tfunction isPrimaryButton(e) {\n\t\t// Ignore mousedowns on any button other than the left (or primary)\n\t\t// mouse button, or when a modifier key is pressed.\n\t\treturn (e.which === 1 && !e.ctrlKey && !e.altKey);\n\t}\n\n\tfunction identifiedTouch(touchList, id) {\n\t\tvar i, l;\n\n\t\tif (touchList.identifiedTouch) {\n\t\t\treturn touchList.identifiedTouch(id);\n\t\t}\n\n\t\t// touchList.identifiedTouch() does not exist in\n\t\t// webkit yetâ€¦ we must do the search ourselves...\n\n\t\ti = -1;\n\t\tl = touchList.length;\n\n\t\twhile (++i < l) {\n\t\t\tif (touchList[i].identifier === id) {\n\t\t\t\treturn touchList[i];\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction changedTouch(e, data) {\n\t\tvar touch = identifiedTouch(e.changedTouches, data.identifier);\n\n\t\t// This isn't the touch you're looking for.\n\t\tif (!touch) { return; }\n\n\t\t// Chrome Android (at least) includes touches that have not\n\t\t// changed in e.changedTouches. That's a bit annoying. Check\n\t\t// that this touch has changed.\n\t\tif (touch.pageX === data.pageX && touch.pageY === data.pageY) { return; }\n\n\t\treturn touch;\n\t}\n\n\n\t// Handlers that decide when the first movestart is triggered\n\n\tfunction mousedown(e){\n\t\t// Ignore non-primary buttons\n\t\tif (!isPrimaryButton(e)) { return; }\n\n\t\t// Ignore form and interactive elements\n\t\tif (isIgnoreTag(e)) { return; }\n\n\t\ton(document, mouseevents.move, mousemove, e);\n\t\ton(document, mouseevents.cancel, mouseend, e);\n\t}\n\n\tfunction mousemove(e, data){\n\t\tcheckThreshold(e, data, e, removeMouse);\n\t}\n\n\tfunction mouseend(e, data) {\n\t\tremoveMouse();\n\t}\n\n\tfunction removeMouse() {\n\t\toff(document, mouseevents.move, mousemove);\n\t\toff(document, mouseevents.cancel, mouseend);\n\t}\n\n\tfunction touchstart(e) {\n\t\t// Don't get in the way of interaction with form elements\n\t\tif (ignoreTags[e.target.tagName.toLowerCase()]) { return; }\n\n\t\tvar touch = e.changedTouches[0];\n\n\t\t// iOS live updates the touch objects whereas Android gives us copies.\n\t\t// That means we can't trust the touchstart object to stay the same,\n\t\t// so we must copy the data. This object acts as a template for\n\t\t// movestart, move and moveend event objects.\n\t\tvar data = {\n\t\t\ttarget:     touch.target,\n\t\t\tpageX:      touch.pageX,\n\t\t\tpageY:      touch.pageY,\n\t\t\tidentifier: touch.identifier,\n\n\t\t\t// The only way to make handlers individually unbindable is by\n\t\t\t// making them unique.\n\t\t\ttouchmove:  function(e, data) { touchmove(e, data); },\n\t\t\ttouchend:   function(e, data) { touchend(e, data); }\n\t\t};\n\n\t\ton(document, touchevents.move, data.touchmove, data);\n\t\ton(document, touchevents.cancel, data.touchend, data);\n\t}\n\n\tfunction touchmove(e, data) {\n\t\tvar touch = changedTouch(e, data);\n\t\tif (!touch) { return; }\n\t\tcheckThreshold(e, data, touch, removeTouch);\n\t}\n\n\tfunction touchend(e, data) {\n\t\tvar touch = identifiedTouch(e.changedTouches, data.identifier);\n\t\tif (!touch) { return; }\n\t\tremoveTouch(data);\n\t}\n\n\tfunction removeTouch(data) {\n\t\toff(document, touchevents.move, data.touchmove);\n\t\toff(document, touchevents.cancel, data.touchend);\n\t}\n\n\tfunction checkThreshold(e, data, touch, fn) {\n\t\tvar distX = touch.pageX - data.pageX;\n\t\tvar distY = touch.pageY - data.pageY;\n\n\t\t// Do nothing if the threshold has not been crossed.\n\t\tif ((distX * distX) + (distY * distY) < (threshold * threshold)) { return; }\n\n\t\ttriggerStart(e, data, touch, distX, distY, fn);\n\t}\n\n\tfunction triggerStart(e, data, touch, distX, distY, fn) {\n\t\tvar touches = e.targetTouches;\n\t\tvar time = e.timeStamp - data.timeStamp;\n\n\t\t// Create a movestart object with some special properties that\n\t\t// are passed only to the movestart handlers.\n\t\tvar template = {\n\t\t\taltKey:     e.altKey,\n\t\t\tctrlKey:    e.ctrlKey,\n\t\t\tshiftKey:   e.shiftKey,\n\t\t\tstartX:     data.pageX,\n\t\t\tstartY:     data.pageY,\n\t\t\tdistX:      distX,\n\t\t\tdistY:      distY,\n\t\t\tdeltaX:     distX,\n\t\t\tdeltaY:     distY,\n\t\t\tpageX:      touch.pageX,\n\t\t\tpageY:      touch.pageY,\n\t\t\tvelocityX:  distX / time,\n\t\t\tvelocityY:  distY / time,\n\t\t\tidentifier: data.identifier,\n\t\t\ttargetTouches: touches,\n\t\t\tfinger: touches ? touches.length : 1,\n\t\t\tenableMove: function() {\n\t\t\t\tthis.moveEnabled = true;\n\t\t\t\tthis.enableMove = noop;\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t};\n\n\t\t// Trigger the movestart event.\n\t\ttrigger(data.target, 'movestart', template);\n\n\t\t// Unbind handlers that tracked the touch or mouse up till now.\n\t\tfn(data);\n\t}\n\n\n\t// Handlers that control what happens following a movestart\n\n\tfunction activeMousemove(e, data) {\n\t\tvar timer  = data.timer;\n\n\t\tdata.touch = e;\n\t\tdata.timeStamp = e.timeStamp;\n\t\ttimer.kick();\n\t}\n\n\tfunction activeMouseend(e, data) {\n\t\tvar target = data.target;\n\t\tvar event  = data.event;\n\t\tvar timer  = data.timer;\n\n\t\tremoveActiveMouse();\n\n\t\tendEvent(target, event, timer, function() {\n\t\t\t// Unbind the click suppressor, waiting until after mouseup\n\t\t\t// has been handled.\n\t\t\tsetTimeout(function(){\n\t\t\t\toff(target, 'click', preventDefault);\n\t\t\t}, 0);\n\t\t});\n\t}\n\n\tfunction removeActiveMouse() {\n\t\toff(document, mouseevents.move, activeMousemove);\n\t\toff(document, mouseevents.end, activeMouseend);\n\t}\n\n\tfunction activeTouchmove(e, data) {\n\t\tvar event = data.event;\n\t\tvar timer = data.timer;\n\t\tvar touch = changedTouch(e, event);\n\n\t\tif (!touch) { return; }\n\n\t\t// Stop the interface from gesturing\n\t\te.preventDefault();\n\n\t\tevent.targetTouches = e.targetTouches;\n\t\tdata.touch = touch;\n\t\tdata.timeStamp = e.timeStamp;\n\n\t\ttimer.kick();\n\t}\n\n\tfunction activeTouchend(e, data) {\n\t\tvar target = data.target;\n\t\tvar event  = data.event;\n\t\tvar timer  = data.timer;\n\t\tvar touch  = identifiedTouch(e.changedTouches, event.identifier);\n\n\t\t// This isn't the touch you're looking for.\n\t\tif (!touch) { return; }\n\n\t\tremoveActiveTouch(data);\n\t\tendEvent(target, event, timer);\n\t}\n\n\tfunction removeActiveTouch(data) {\n\t\toff(document, touchevents.move, data.activeTouchmove);\n\t\toff(document, touchevents.end, data.activeTouchend);\n\t}\n\n\n\t// Logic for triggering move and moveend events\n\n\tfunction updateEvent(event, touch, timeStamp) {\n\t\tvar time = timeStamp - event.timeStamp;\n\n\t\tevent.distX =  touch.pageX - event.startX;\n\t\tevent.distY =  touch.pageY - event.startY;\n\t\tevent.deltaX = touch.pageX - event.pageX;\n\t\tevent.deltaY = touch.pageY - event.pageY;\n\n\t\t// Average the velocity of the last few events using a decay\n\t\t// curve to even out spurious jumps in values.\n\t\tevent.velocityX = 0.3 * event.velocityX + 0.7 * event.deltaX / time;\n\t\tevent.velocityY = 0.3 * event.velocityY + 0.7 * event.deltaY / time;\n\t\tevent.pageX =  touch.pageX;\n\t\tevent.pageY =  touch.pageY;\n\t}\n\n\tfunction endEvent(target, event, timer, fn) {\n\t\ttimer.end(function(){\n\t\t\ttrigger(target, 'moveend', event);\n\t\t\treturn fn && fn();\n\t\t});\n\t}\n\n\n\t// Set up the DOM\n\n\tfunction movestart(e) {\n\t\tif (e.defaultPrevented) { return; }\n\t\tif (!e.moveEnabled) { return; }\n\n\t\tvar event = {\n\t\t\tstartX:        e.startX,\n\t\t\tstartY:        e.startY,\n\t\t\tpageX:         e.pageX,\n\t\t\tpageY:         e.pageY,\n\t\t\tdistX:         e.distX,\n\t\t\tdistY:         e.distY,\n\t\t\tdeltaX:        e.deltaX,\n\t\t\tdeltaY:        e.deltaY,\n\t\t\tvelocityX:     e.velocityX,\n\t\t\tvelocityY:     e.velocityY,\n\t\t\tidentifier:    e.identifier,\n\t\t\ttargetTouches: e.targetTouches,\n\t\t\tfinger:        e.finger\n\t\t};\n\n\t\tvar data = {\n\t\t\ttarget:    e.target,\n\t\t\tevent:     event,\n\t\t\ttimer:     new Timer(update),\n\t\t\ttouch:     undefined,\n\t\t\ttimeStamp: e.timeStamp\n\t\t};\n\n\t\tfunction update(time) {\n\t\t\tupdateEvent(event, data.touch, data.timeStamp);\n\t\t\ttrigger(data.target, 'move', event);\n\t\t}\n\n\t\tif (e.identifier === undefined) {\n\t\t\t// We're dealing with a mouse event.\n\t\t\t// Stop clicks from propagating during a move\n\t\t\ton(e.target, 'click', preventDefault);\n\t\t\ton(document, mouseevents.move, activeMousemove, data);\n\t\t\ton(document, mouseevents.end, activeMouseend, data);\n\t\t}\n\t\telse {\n\t\t\t// In order to unbind correct handlers they have to be unique\n\t\t\tdata.activeTouchmove = function(e, data) { activeTouchmove(e, data); };\n\t\t\tdata.activeTouchend = function(e, data) { activeTouchend(e, data); };\n\n\t\t\t// We're dealing with a touch.\n\t\t\ton(document, touchevents.move, data.activeTouchmove, data);\n\t\t\ton(document, touchevents.end, data.activeTouchend, data);\n\t\t}\n\t}\n\n\ton(document, 'mousedown', mousedown);\n\ton(document, 'touchstart', touchstart);\n\ton(document, 'movestart', movestart);\n\n\n\t// jQuery special events\n\t//\n\t// jQuery event objects are copies of DOM event objects. They need\n\t// a little help copying the move properties across.\n\n\tif (!window.jQuery) { return; }\n\n\tvar properties = (\"startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY\").split(' ');\n\n\tfunction enableMove1(e) { e.enableMove(); }\n\tfunction enableMove2(e) { e.enableMove(); }\n\tfunction enableMove3(e) { e.enableMove(); }\n\n\tfunction add(handleObj) {\n\t\tvar handler = handleObj.handler;\n\n\t\thandleObj.handler = function(e) {\n\t\t\t// Copy move properties across from originalEvent\n\t\t\tvar i = properties.length;\n\t\t\tvar property;\n\n\t\t\twhile(i--) {\n\t\t\t\tproperty = properties[i];\n\t\t\t\te[property] = e.originalEvent[property];\n\t\t\t}\n\n\t\t\thandler.apply(this, arguments);\n\t\t};\n\t}\n\n\tjQuery.event.special.movestart = {\n\t\tsetup: function() {\n\t\t\t// Movestart must be enabled to allow other move events\n\t\t\ton(this, 'movestart', enableMove1);\n\n\t\t\t// Do listen to DOM events\n\t\t\treturn false;\n\t\t},\n\n\t\tteardown: function() {\n\t\t\toff(this, 'movestart', enableMove1);\n\t\t\treturn false;\n\t\t},\n\n\t\tadd: add\n\t};\n\n\tjQuery.event.special.move = {\n\t\tsetup: function() {\n\t\t\ton(this, 'movestart', enableMove2);\n\t\t\treturn false;\n\t\t},\n\n\t\tteardown: function() {\n\t\t\toff(this, 'movestart', enableMove2);\n\t\t\treturn false;\n\t\t},\n\n\t\tadd: add\n\t};\n\n\tjQuery.event.special.moveend = {\n\t\tsetup: function() {\n\t\t\ton(this, 'movestart', enableMove3);\n\t\t\treturn false;\n\t\t},\n\n\t\tteardown: function() {\n\t\t\toff(this, 'movestart', enableMove3);\n\t\t\treturn false;\n\t\t},\n\n\t\tadd: add\n\t};\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dwLy4vbm9kZV9tb2R1bGVzL3p1cmItdHdlbnR5dHdlbnR5L2pzL2pxdWVyeS5ldmVudC5tb3ZlLmpzPzdhN2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRE9NLmV2ZW50Lm1vdmVcbi8vXG4vLyAyLjAuMFxuLy9cbi8vIFN0ZXBoZW4gQmFuZFxuLy9cbi8vIFRyaWdnZXJzICdtb3Zlc3RhcnQnLCAnbW92ZScgYW5kICdtb3ZlZW5kJyBldmVudHMgYWZ0ZXJcbi8vIG1vdXNlbW92ZXMgZm9sbG93aW5nIGEgbW91c2Vkb3duIGNyb3NzIGEgZGlzdGFuY2UgdGhyZXNob2xkLFxuLy8gc2ltaWxhciB0byB0aGUgbmF0aXZlICdkcmFnc3RhcnQnLCAnZHJhZycgYW5kICdkcmFnZW5kJyBldmVudHMuXG4vLyBNb3ZlIGV2ZW50cyBhcmUgdGhyb3R0bGVkIHRvIGFuaW1hdGlvbiBmcmFtZXMuIE1vdmUgZXZlbnQgb2JqZWN0c1xuLy8gaGF2ZSB0aGUgcHJvcGVydGllczpcbi8vXG4vLyBwYWdlWDpcbi8vIHBhZ2VZOiAgICAgUGFnZSBjb29yZGluYXRlcyBvZiBwb2ludGVyLlxuLy8gc3RhcnRYOlxuLy8gc3RhcnRZOiAgICBQYWdlIGNvb3JkaW5hdGVzIG9mIHBvaW50ZXIgYXQgbW92ZXN0YXJ0LlxuLy8gZGlzdFg6XG4vLyBkaXN0WTogICAgIERpc3RhbmNlIHRoZSBwb2ludGVyIGhhcyBtb3ZlZCBzaW5jZSBtb3Zlc3RhcnQuXG4vLyBkZWx0YVg6XG4vLyBkZWx0YVk6ICAgIERpc3RhbmNlIHRoZSBmaW5nZXIgaGFzIG1vdmVkIHNpbmNlIGxhc3QgZXZlbnQuXG4vLyB2ZWxvY2l0eVg6XG4vLyB2ZWxvY2l0eVk6IEF2ZXJhZ2UgdmVsb2NpdHkgb3ZlciBsYXN0IGZldyBldmVudHMuXG5cblxuKGZ1bmN0aW9uKGZuKSB7XG5cdGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtdLCBmbik7XG4gICAgfSBlbHNlIGlmICgodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUgIT09IG51bGwpICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZm47XG5cdH0gZWxzZSB7XG5cdFx0Zm4oKTtcblx0fVxufSkoZnVuY3Rpb24oKXtcblx0dmFyIGFzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgd2luZG93LmpRdWVyeSAmJiBqUXVlcnkuZXh0ZW5kO1xuXG5cdC8vIE51bWJlciBvZiBwaXhlbHMgYSBwcmVzc2VkIHBvaW50ZXIgdHJhdmVscyBiZWZvcmUgbW92ZXN0YXJ0XG5cdC8vIGV2ZW50IGlzIGZpcmVkLlxuXHR2YXIgdGhyZXNob2xkID0gODtcblxuXHQvLyBTaGltIGZvciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsIGZhbGxpbmcgYmFjayB0byB0aW1lci4gU2VlOlxuXHQvLyBzZWUgaHR0cDovL3BhdWxpcmlzaC5jb20vMjAxMS9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWFuaW1hdGluZy9cblx0dmFyIHJlcXVlc3RGcmFtZSA9IChmdW5jdGlvbigpe1xuXHRcdHJldHVybiAoXG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHRcdFx0d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHRmdW5jdGlvbihmbiwgZWxlbWVudCl7XG5cdFx0XHRcdHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHRcdFx0XHRcdGZuKCk7XG5cdFx0XHRcdH0sIDI1KTtcblx0XHRcdH1cblx0XHQpO1xuXHR9KSgpO1xuXHRcblx0Ly8gU2hpbSBmb3IgY3VzdG9tRXZlbnRcblx0Ly8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC9DdXN0b21FdmVudCNQb2x5ZmlsbFxuXHQoZnVuY3Rpb24gKCkge1xuXHRcdGlmICggdHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCA9PT0gXCJmdW5jdGlvblwiICkgcmV0dXJuIGZhbHNlO1xuXHRcdGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICggZXZlbnQsIHBhcmFtcyApIHtcblx0XHRcdHBhcmFtcyA9IHBhcmFtcyB8fCB7IGJ1YmJsZXM6IGZhbHNlLCBjYW5jZWxhYmxlOiBmYWxzZSwgZGV0YWlsOiB1bmRlZmluZWQgfTtcblx0XHRcdHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCggJ0N1c3RvbUV2ZW50JyApO1xuXHRcdFx0ZXZ0LmluaXRDdXN0b21FdmVudCggZXZlbnQsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCApO1xuXHRcdFx0cmV0dXJuIGV2dDtcblx0XHR9XG5cdFx0XG5cdFx0Q3VzdG9tRXZlbnQucHJvdG90eXBlID0gd2luZG93LkV2ZW50LnByb3RvdHlwZTtcblx0XHR3aW5kb3cuQ3VzdG9tRXZlbnQgPSBDdXN0b21FdmVudDtcblx0fSkoKTtcblxuXHR2YXIgaWdub3JlVGFncyA9IHtcblx0XHRcdHRleHRhcmVhOiB0cnVlLFxuXHRcdFx0aW5wdXQ6IHRydWUsXG5cdFx0XHRzZWxlY3Q6IHRydWUsXG5cdFx0XHRidXR0b246IHRydWVcblx0XHR9O1xuXG5cdHZhciBtb3VzZWV2ZW50cyA9IHtcblx0XHRtb3ZlOiAgICdtb3VzZW1vdmUnLFxuXHRcdGNhbmNlbDogJ21vdXNldXAgZHJhZ3N0YXJ0Jyxcblx0XHRlbmQ6ICAgICdtb3VzZXVwJ1xuXHR9O1xuXG5cdHZhciB0b3VjaGV2ZW50cyA9IHtcblx0XHRtb3ZlOiAgICd0b3VjaG1vdmUnLFxuXHRcdGNhbmNlbDogJ3RvdWNoZW5kJyxcblx0XHRlbmQ6ICAgICd0b3VjaGVuZCdcblx0fTtcblxuXHR2YXIgcnNwYWNlcyA9IC9cXHMrLztcblxuXG5cdC8vIERPTSBFdmVudHNcblxuXHR2YXIgZXZlbnRPcHRpb25zID0geyBidWJibGVzOiB0cnVlLCBjYW5jZWxhYmxlOiB0cnVlIH07XG5cblx0dmFyIGV2ZW50c1N5bWJvbCA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiA/IFN5bWJvbCgnZXZlbnRzJykgOiB7fTtcblxuXHRmdW5jdGlvbiBjcmVhdGVFdmVudCh0eXBlKSB7XG5cdFx0cmV0dXJuIG5ldyBDdXN0b21FdmVudCh0eXBlLCBldmVudE9wdGlvbnMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXZlbnRzKG5vZGUpIHtcblx0XHRyZXR1cm4gbm9kZVtldmVudHNTeW1ib2xdIHx8IChub2RlW2V2ZW50c1N5bWJvbF0gPSB7fSk7XG5cdH1cblxuXHRmdW5jdGlvbiBvbihub2RlLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yKSB7XG5cdFx0dHlwZXMgPSB0eXBlcy5zcGxpdChyc3BhY2VzKTtcblxuXHRcdHZhciBldmVudHMgPSBnZXRFdmVudHMobm9kZSk7XG5cdFx0dmFyIGkgPSB0eXBlcy5sZW5ndGg7XG5cdFx0dmFyIGhhbmRsZXJzLCB0eXBlO1xuXG5cdFx0ZnVuY3Rpb24gaGFuZGxlcihlKSB7IGZuKGUsIGRhdGEpOyB9XG5cblx0XHR3aGlsZSAoaS0tKSB7XG5cdFx0XHR0eXBlID0gdHlwZXNbaV07XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1t0eXBlXSB8fCAoZXZlbnRzW3R5cGVdID0gW10pO1xuXHRcdFx0aGFuZGxlcnMucHVzaChbZm4sIGhhbmRsZXJdKTtcblx0XHRcdG5vZGUuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBvZmYobm9kZSwgdHlwZXMsIGZuLCBzZWxlY3Rvcikge1xuXHRcdHR5cGVzID0gdHlwZXMuc3BsaXQocnNwYWNlcyk7XG5cblx0XHR2YXIgZXZlbnRzID0gZ2V0RXZlbnRzKG5vZGUpO1xuXHRcdHZhciBpID0gdHlwZXMubGVuZ3RoO1xuXHRcdHZhciB0eXBlLCBoYW5kbGVycywgaztcblxuXHRcdGlmICghZXZlbnRzKSB7IHJldHVybjsgfVxuXG5cdFx0d2hpbGUgKGktLSkge1xuXHRcdFx0dHlwZSA9IHR5cGVzW2ldO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbdHlwZV07XG5cdFx0XHRpZiAoIWhhbmRsZXJzKSB7IGNvbnRpbnVlOyB9XG5cdFx0XHRrID0gaGFuZGxlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKGstLSkge1xuXHRcdFx0XHRpZiAoaGFuZGxlcnNba11bMF0gPT09IGZuKSB7XG5cdFx0XHRcdFx0bm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXJzW2tdWzFdKTtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoaywgMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0cmlnZ2VyKG5vZGUsIHR5cGUsIHByb3BlcnRpZXMpIHtcblx0XHQvLyBEb24ndCBjYWNoZSBldmVudHMuIEl0IHByZXZlbnRzIHlvdSBmcm9tIHRyaWdnZXJpbmcgYW4gZXZlbnQgb2YgYVxuXHRcdC8vIGdpdmVuIHR5cGUgZnJvbSBpbnNpZGUgdGhlIGhhbmRsZXIgb2YgYW5vdGhlciBldmVudCBvZiB0aGF0IHR5cGUuXG5cdFx0dmFyIGV2ZW50ID0gY3JlYXRlRXZlbnQodHlwZSk7XG5cdFx0aWYgKHByb3BlcnRpZXMpIHsgYXNzaWduKGV2ZW50LCBwcm9wZXJ0aWVzKTsgfVxuXHRcdG5vZGUuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cdH1cblxuXG5cdC8vIENvbnN0cnVjdG9yc1xuXG5cdGZ1bmN0aW9uIFRpbWVyKGZuKXtcblx0XHR2YXIgY2FsbGJhY2sgPSBmbixcblx0XHQgICAgYWN0aXZlID0gZmFsc2UsXG5cdFx0ICAgIHJ1bm5pbmcgPSBmYWxzZTtcblxuXHRcdGZ1bmN0aW9uIHRyaWdnZXIodGltZSkge1xuXHRcdFx0aWYgKGFjdGl2ZSl7XG5cdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdHJlcXVlc3RGcmFtZSh0cmlnZ2VyKTtcblx0XHRcdFx0cnVubmluZyA9IHRydWU7XG5cdFx0XHRcdGFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHJ1bm5pbmcgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzLmtpY2sgPSBmdW5jdGlvbihmbikge1xuXHRcdFx0YWN0aXZlID0gdHJ1ZTtcblx0XHRcdGlmICghcnVubmluZykgeyB0cmlnZ2VyKCk7IH1cblx0XHR9O1xuXG5cdFx0dGhpcy5lbmQgPSBmdW5jdGlvbihmbikge1xuXHRcdFx0dmFyIGNiID0gY2FsbGJhY2s7XG5cblx0XHRcdGlmICghZm4pIHsgcmV0dXJuOyB9XG5cblx0XHRcdC8vIElmIHRoZSB0aW1lciBpcyBub3QgcnVubmluZywgc2ltcGx5IGNhbGwgdGhlIGVuZCBjYWxsYmFjay5cblx0XHRcdGlmICghcnVubmluZykge1xuXHRcdFx0XHRmbigpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gSWYgdGhlIHRpbWVyIGlzIHJ1bm5pbmcsIGFuZCBoYXMgYmVlbiBraWNrZWQgbGF0ZWx5LCB0aGVuXG5cdFx0XHQvLyBxdWV1ZSB1cCB0aGUgY3VycmVudCBjYWxsYmFjayBhbmQgdGhlIGVuZCBjYWxsYmFjaywgb3RoZXJ3aXNlXG5cdFx0XHQvLyBqdXN0IHRoZSBlbmQgY2FsbGJhY2suXG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y2FsbGJhY2sgPSBhY3RpdmUgP1xuXHRcdFx0XHRcdGZ1bmN0aW9uKCl7IGNiKCk7IGZuKCk7IH0gOlxuXHRcdFx0XHRcdGZuIDtcblxuXHRcdFx0XHRhY3RpdmUgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXG5cdC8vIEZ1bmN0aW9uc1xuXG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5cdGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdH1cblxuXHRmdW5jdGlvbiBpc0lnbm9yZVRhZyhlKSB7XG5cdFx0cmV0dXJuICEhaWdub3JlVGFnc1tlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCldO1xuXHR9XG5cblx0ZnVuY3Rpb24gaXNQcmltYXJ5QnV0dG9uKGUpIHtcblx0XHQvLyBJZ25vcmUgbW91c2Vkb3ducyBvbiBhbnkgYnV0dG9uIG90aGVyIHRoYW4gdGhlIGxlZnQgKG9yIHByaW1hcnkpXG5cdFx0Ly8gbW91c2UgYnV0dG9uLCBvciB3aGVuIGEgbW9kaWZpZXIga2V5IGlzIHByZXNzZWQuXG5cdFx0cmV0dXJuIChlLndoaWNoID09PSAxICYmICFlLmN0cmxLZXkgJiYgIWUuYWx0S2V5KTtcblx0fVxuXG5cdGZ1bmN0aW9uIGlkZW50aWZpZWRUb3VjaCh0b3VjaExpc3QsIGlkKSB7XG5cdFx0dmFyIGksIGw7XG5cblx0XHRpZiAodG91Y2hMaXN0LmlkZW50aWZpZWRUb3VjaCkge1xuXHRcdFx0cmV0dXJuIHRvdWNoTGlzdC5pZGVudGlmaWVkVG91Y2goaWQpO1xuXHRcdH1cblxuXHRcdC8vIHRvdWNoTGlzdC5pZGVudGlmaWVkVG91Y2goKSBkb2VzIG5vdCBleGlzdCBpblxuXHRcdC8vIHdlYmtpdCB5ZXTigKYgd2UgbXVzdCBkbyB0aGUgc2VhcmNoIG91cnNlbHZlcy4uLlxuXG5cdFx0aSA9IC0xO1xuXHRcdGwgPSB0b3VjaExpc3QubGVuZ3RoO1xuXG5cdFx0d2hpbGUgKCsraSA8IGwpIHtcblx0XHRcdGlmICh0b3VjaExpc3RbaV0uaWRlbnRpZmllciA9PT0gaWQpIHtcblx0XHRcdFx0cmV0dXJuIHRvdWNoTGlzdFtpXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjaGFuZ2VkVG91Y2goZSwgZGF0YSkge1xuXHRcdHZhciB0b3VjaCA9IGlkZW50aWZpZWRUb3VjaChlLmNoYW5nZWRUb3VjaGVzLCBkYXRhLmlkZW50aWZpZXIpO1xuXG5cdFx0Ly8gVGhpcyBpc24ndCB0aGUgdG91Y2ggeW91J3JlIGxvb2tpbmcgZm9yLlxuXHRcdGlmICghdG91Y2gpIHsgcmV0dXJuOyB9XG5cblx0XHQvLyBDaHJvbWUgQW5kcm9pZCAoYXQgbGVhc3QpIGluY2x1ZGVzIHRvdWNoZXMgdGhhdCBoYXZlIG5vdFxuXHRcdC8vIGNoYW5nZWQgaW4gZS5jaGFuZ2VkVG91Y2hlcy4gVGhhdCdzIGEgYml0IGFubm95aW5nLiBDaGVja1xuXHRcdC8vIHRoYXQgdGhpcyB0b3VjaCBoYXMgY2hhbmdlZC5cblx0XHRpZiAodG91Y2gucGFnZVggPT09IGRhdGEucGFnZVggJiYgdG91Y2gucGFnZVkgPT09IGRhdGEucGFnZVkpIHsgcmV0dXJuOyB9XG5cblx0XHRyZXR1cm4gdG91Y2g7XG5cdH1cblxuXG5cdC8vIEhhbmRsZXJzIHRoYXQgZGVjaWRlIHdoZW4gdGhlIGZpcnN0IG1vdmVzdGFydCBpcyB0cmlnZ2VyZWRcblxuXHRmdW5jdGlvbiBtb3VzZWRvd24oZSl7XG5cdFx0Ly8gSWdub3JlIG5vbi1wcmltYXJ5IGJ1dHRvbnNcblx0XHRpZiAoIWlzUHJpbWFyeUJ1dHRvbihlKSkgeyByZXR1cm47IH1cblxuXHRcdC8vIElnbm9yZSBmb3JtIGFuZCBpbnRlcmFjdGl2ZSBlbGVtZW50c1xuXHRcdGlmIChpc0lnbm9yZVRhZyhlKSkgeyByZXR1cm47IH1cblxuXHRcdG9uKGRvY3VtZW50LCBtb3VzZWV2ZW50cy5tb3ZlLCBtb3VzZW1vdmUsIGUpO1xuXHRcdG9uKGRvY3VtZW50LCBtb3VzZWV2ZW50cy5jYW5jZWwsIG1vdXNlZW5kLCBlKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1vdXNlbW92ZShlLCBkYXRhKXtcblx0XHRjaGVja1RocmVzaG9sZChlLCBkYXRhLCBlLCByZW1vdmVNb3VzZSk7XG5cdH1cblxuXHRmdW5jdGlvbiBtb3VzZWVuZChlLCBkYXRhKSB7XG5cdFx0cmVtb3ZlTW91c2UoKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZU1vdXNlKCkge1xuXHRcdG9mZihkb2N1bWVudCwgbW91c2VldmVudHMubW92ZSwgbW91c2Vtb3ZlKTtcblx0XHRvZmYoZG9jdW1lbnQsIG1vdXNlZXZlbnRzLmNhbmNlbCwgbW91c2VlbmQpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdG91Y2hzdGFydChlKSB7XG5cdFx0Ly8gRG9uJ3QgZ2V0IGluIHRoZSB3YXkgb2YgaW50ZXJhY3Rpb24gd2l0aCBmb3JtIGVsZW1lbnRzXG5cdFx0aWYgKGlnbm9yZVRhZ3NbZS50YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpXSkgeyByZXR1cm47IH1cblxuXHRcdHZhciB0b3VjaCA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XG5cblx0XHQvLyBpT1MgbGl2ZSB1cGRhdGVzIHRoZSB0b3VjaCBvYmplY3RzIHdoZXJlYXMgQW5kcm9pZCBnaXZlcyB1cyBjb3BpZXMuXG5cdFx0Ly8gVGhhdCBtZWFucyB3ZSBjYW4ndCB0cnVzdCB0aGUgdG91Y2hzdGFydCBvYmplY3QgdG8gc3RheSB0aGUgc2FtZSxcblx0XHQvLyBzbyB3ZSBtdXN0IGNvcHkgdGhlIGRhdGEuIFRoaXMgb2JqZWN0IGFjdHMgYXMgYSB0ZW1wbGF0ZSBmb3Jcblx0XHQvLyBtb3Zlc3RhcnQsIG1vdmUgYW5kIG1vdmVlbmQgZXZlbnQgb2JqZWN0cy5cblx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdHRhcmdldDogICAgIHRvdWNoLnRhcmdldCxcblx0XHRcdHBhZ2VYOiAgICAgIHRvdWNoLnBhZ2VYLFxuXHRcdFx0cGFnZVk6ICAgICAgdG91Y2gucGFnZVksXG5cdFx0XHRpZGVudGlmaWVyOiB0b3VjaC5pZGVudGlmaWVyLFxuXG5cdFx0XHQvLyBUaGUgb25seSB3YXkgdG8gbWFrZSBoYW5kbGVycyBpbmRpdmlkdWFsbHkgdW5iaW5kYWJsZSBpcyBieVxuXHRcdFx0Ly8gbWFraW5nIHRoZW0gdW5pcXVlLlxuXHRcdFx0dG91Y2htb3ZlOiAgZnVuY3Rpb24oZSwgZGF0YSkgeyB0b3VjaG1vdmUoZSwgZGF0YSk7IH0sXG5cdFx0XHR0b3VjaGVuZDogICBmdW5jdGlvbihlLCBkYXRhKSB7IHRvdWNoZW5kKGUsIGRhdGEpOyB9XG5cdFx0fTtcblxuXHRcdG9uKGRvY3VtZW50LCB0b3VjaGV2ZW50cy5tb3ZlLCBkYXRhLnRvdWNobW92ZSwgZGF0YSk7XG5cdFx0b24oZG9jdW1lbnQsIHRvdWNoZXZlbnRzLmNhbmNlbCwgZGF0YS50b3VjaGVuZCwgZGF0YSk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b3VjaG1vdmUoZSwgZGF0YSkge1xuXHRcdHZhciB0b3VjaCA9IGNoYW5nZWRUb3VjaChlLCBkYXRhKTtcblx0XHRpZiAoIXRvdWNoKSB7IHJldHVybjsgfVxuXHRcdGNoZWNrVGhyZXNob2xkKGUsIGRhdGEsIHRvdWNoLCByZW1vdmVUb3VjaCk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b3VjaGVuZChlLCBkYXRhKSB7XG5cdFx0dmFyIHRvdWNoID0gaWRlbnRpZmllZFRvdWNoKGUuY2hhbmdlZFRvdWNoZXMsIGRhdGEuaWRlbnRpZmllcik7XG5cdFx0aWYgKCF0b3VjaCkgeyByZXR1cm47IH1cblx0XHRyZW1vdmVUb3VjaChkYXRhKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZVRvdWNoKGRhdGEpIHtcblx0XHRvZmYoZG9jdW1lbnQsIHRvdWNoZXZlbnRzLm1vdmUsIGRhdGEudG91Y2htb3ZlKTtcblx0XHRvZmYoZG9jdW1lbnQsIHRvdWNoZXZlbnRzLmNhbmNlbCwgZGF0YS50b3VjaGVuZCk7XG5cdH1cblxuXHRmdW5jdGlvbiBjaGVja1RocmVzaG9sZChlLCBkYXRhLCB0b3VjaCwgZm4pIHtcblx0XHR2YXIgZGlzdFggPSB0b3VjaC5wYWdlWCAtIGRhdGEucGFnZVg7XG5cdFx0dmFyIGRpc3RZID0gdG91Y2gucGFnZVkgLSBkYXRhLnBhZ2VZO1xuXG5cdFx0Ly8gRG8gbm90aGluZyBpZiB0aGUgdGhyZXNob2xkIGhhcyBub3QgYmVlbiBjcm9zc2VkLlxuXHRcdGlmICgoZGlzdFggKiBkaXN0WCkgKyAoZGlzdFkgKiBkaXN0WSkgPCAodGhyZXNob2xkICogdGhyZXNob2xkKSkgeyByZXR1cm47IH1cblxuXHRcdHRyaWdnZXJTdGFydChlLCBkYXRhLCB0b3VjaCwgZGlzdFgsIGRpc3RZLCBmbik7XG5cdH1cblxuXHRmdW5jdGlvbiB0cmlnZ2VyU3RhcnQoZSwgZGF0YSwgdG91Y2gsIGRpc3RYLCBkaXN0WSwgZm4pIHtcblx0XHR2YXIgdG91Y2hlcyA9IGUudGFyZ2V0VG91Y2hlcztcblx0XHR2YXIgdGltZSA9IGUudGltZVN0YW1wIC0gZGF0YS50aW1lU3RhbXA7XG5cblx0XHQvLyBDcmVhdGUgYSBtb3Zlc3RhcnQgb2JqZWN0IHdpdGggc29tZSBzcGVjaWFsIHByb3BlcnRpZXMgdGhhdFxuXHRcdC8vIGFyZSBwYXNzZWQgb25seSB0byB0aGUgbW92ZXN0YXJ0IGhhbmRsZXJzLlxuXHRcdHZhciB0ZW1wbGF0ZSA9IHtcblx0XHRcdGFsdEtleTogICAgIGUuYWx0S2V5LFxuXHRcdFx0Y3RybEtleTogICAgZS5jdHJsS2V5LFxuXHRcdFx0c2hpZnRLZXk6ICAgZS5zaGlmdEtleSxcblx0XHRcdHN0YXJ0WDogICAgIGRhdGEucGFnZVgsXG5cdFx0XHRzdGFydFk6ICAgICBkYXRhLnBhZ2VZLFxuXHRcdFx0ZGlzdFg6ICAgICAgZGlzdFgsXG5cdFx0XHRkaXN0WTogICAgICBkaXN0WSxcblx0XHRcdGRlbHRhWDogICAgIGRpc3RYLFxuXHRcdFx0ZGVsdGFZOiAgICAgZGlzdFksXG5cdFx0XHRwYWdlWDogICAgICB0b3VjaC5wYWdlWCxcblx0XHRcdHBhZ2VZOiAgICAgIHRvdWNoLnBhZ2VZLFxuXHRcdFx0dmVsb2NpdHlYOiAgZGlzdFggLyB0aW1lLFxuXHRcdFx0dmVsb2NpdHlZOiAgZGlzdFkgLyB0aW1lLFxuXHRcdFx0aWRlbnRpZmllcjogZGF0YS5pZGVudGlmaWVyLFxuXHRcdFx0dGFyZ2V0VG91Y2hlczogdG91Y2hlcyxcblx0XHRcdGZpbmdlcjogdG91Y2hlcyA/IHRvdWNoZXMubGVuZ3RoIDogMSxcblx0XHRcdGVuYWJsZU1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR0aGlzLm1vdmVFbmFibGVkID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5lbmFibGVNb3ZlID0gbm9vcDtcblx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvLyBUcmlnZ2VyIHRoZSBtb3Zlc3RhcnQgZXZlbnQuXG5cdFx0dHJpZ2dlcihkYXRhLnRhcmdldCwgJ21vdmVzdGFydCcsIHRlbXBsYXRlKTtcblxuXHRcdC8vIFVuYmluZCBoYW5kbGVycyB0aGF0IHRyYWNrZWQgdGhlIHRvdWNoIG9yIG1vdXNlIHVwIHRpbGwgbm93LlxuXHRcdGZuKGRhdGEpO1xuXHR9XG5cblxuXHQvLyBIYW5kbGVycyB0aGF0IGNvbnRyb2wgd2hhdCBoYXBwZW5zIGZvbGxvd2luZyBhIG1vdmVzdGFydFxuXG5cdGZ1bmN0aW9uIGFjdGl2ZU1vdXNlbW92ZShlLCBkYXRhKSB7XG5cdFx0dmFyIHRpbWVyICA9IGRhdGEudGltZXI7XG5cblx0XHRkYXRhLnRvdWNoID0gZTtcblx0XHRkYXRhLnRpbWVTdGFtcCA9IGUudGltZVN0YW1wO1xuXHRcdHRpbWVyLmtpY2soKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGFjdGl2ZU1vdXNlZW5kKGUsIGRhdGEpIHtcblx0XHR2YXIgdGFyZ2V0ID0gZGF0YS50YXJnZXQ7XG5cdFx0dmFyIGV2ZW50ICA9IGRhdGEuZXZlbnQ7XG5cdFx0dmFyIHRpbWVyICA9IGRhdGEudGltZXI7XG5cblx0XHRyZW1vdmVBY3RpdmVNb3VzZSgpO1xuXG5cdFx0ZW5kRXZlbnQodGFyZ2V0LCBldmVudCwgdGltZXIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gVW5iaW5kIHRoZSBjbGljayBzdXBwcmVzc29yLCB3YWl0aW5nIHVudGlsIGFmdGVyIG1vdXNldXBcblx0XHRcdC8vIGhhcyBiZWVuIGhhbmRsZWQuXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdFx0XHRcdG9mZih0YXJnZXQsICdjbGljaycsIHByZXZlbnREZWZhdWx0KTtcblx0XHRcdH0sIDApO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlQWN0aXZlTW91c2UoKSB7XG5cdFx0b2ZmKGRvY3VtZW50LCBtb3VzZWV2ZW50cy5tb3ZlLCBhY3RpdmVNb3VzZW1vdmUpO1xuXHRcdG9mZihkb2N1bWVudCwgbW91c2VldmVudHMuZW5kLCBhY3RpdmVNb3VzZWVuZCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhY3RpdmVUb3VjaG1vdmUoZSwgZGF0YSkge1xuXHRcdHZhciBldmVudCA9IGRhdGEuZXZlbnQ7XG5cdFx0dmFyIHRpbWVyID0gZGF0YS50aW1lcjtcblx0XHR2YXIgdG91Y2ggPSBjaGFuZ2VkVG91Y2goZSwgZXZlbnQpO1xuXG5cdFx0aWYgKCF0b3VjaCkgeyByZXR1cm47IH1cblxuXHRcdC8vIFN0b3AgdGhlIGludGVyZmFjZSBmcm9tIGdlc3R1cmluZ1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGV2ZW50LnRhcmdldFRvdWNoZXMgPSBlLnRhcmdldFRvdWNoZXM7XG5cdFx0ZGF0YS50b3VjaCA9IHRvdWNoO1xuXHRcdGRhdGEudGltZVN0YW1wID0gZS50aW1lU3RhbXA7XG5cblx0XHR0aW1lci5raWNrKCk7XG5cdH1cblxuXHRmdW5jdGlvbiBhY3RpdmVUb3VjaGVuZChlLCBkYXRhKSB7XG5cdFx0dmFyIHRhcmdldCA9IGRhdGEudGFyZ2V0O1xuXHRcdHZhciBldmVudCAgPSBkYXRhLmV2ZW50O1xuXHRcdHZhciB0aW1lciAgPSBkYXRhLnRpbWVyO1xuXHRcdHZhciB0b3VjaCAgPSBpZGVudGlmaWVkVG91Y2goZS5jaGFuZ2VkVG91Y2hlcywgZXZlbnQuaWRlbnRpZmllcik7XG5cblx0XHQvLyBUaGlzIGlzbid0IHRoZSB0b3VjaCB5b3UncmUgbG9va2luZyBmb3IuXG5cdFx0aWYgKCF0b3VjaCkgeyByZXR1cm47IH1cblxuXHRcdHJlbW92ZUFjdGl2ZVRvdWNoKGRhdGEpO1xuXHRcdGVuZEV2ZW50KHRhcmdldCwgZXZlbnQsIHRpbWVyKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUFjdGl2ZVRvdWNoKGRhdGEpIHtcblx0XHRvZmYoZG9jdW1lbnQsIHRvdWNoZXZlbnRzLm1vdmUsIGRhdGEuYWN0aXZlVG91Y2htb3ZlKTtcblx0XHRvZmYoZG9jdW1lbnQsIHRvdWNoZXZlbnRzLmVuZCwgZGF0YS5hY3RpdmVUb3VjaGVuZCk7XG5cdH1cblxuXG5cdC8vIExvZ2ljIGZvciB0cmlnZ2VyaW5nIG1vdmUgYW5kIG1vdmVlbmQgZXZlbnRzXG5cblx0ZnVuY3Rpb24gdXBkYXRlRXZlbnQoZXZlbnQsIHRvdWNoLCB0aW1lU3RhbXApIHtcblx0XHR2YXIgdGltZSA9IHRpbWVTdGFtcCAtIGV2ZW50LnRpbWVTdGFtcDtcblxuXHRcdGV2ZW50LmRpc3RYID0gIHRvdWNoLnBhZ2VYIC0gZXZlbnQuc3RhcnRYO1xuXHRcdGV2ZW50LmRpc3RZID0gIHRvdWNoLnBhZ2VZIC0gZXZlbnQuc3RhcnRZO1xuXHRcdGV2ZW50LmRlbHRhWCA9IHRvdWNoLnBhZ2VYIC0gZXZlbnQucGFnZVg7XG5cdFx0ZXZlbnQuZGVsdGFZID0gdG91Y2gucGFnZVkgLSBldmVudC5wYWdlWTtcblxuXHRcdC8vIEF2ZXJhZ2UgdGhlIHZlbG9jaXR5IG9mIHRoZSBsYXN0IGZldyBldmVudHMgdXNpbmcgYSBkZWNheVxuXHRcdC8vIGN1cnZlIHRvIGV2ZW4gb3V0IHNwdXJpb3VzIGp1bXBzIGluIHZhbHVlcy5cblx0XHRldmVudC52ZWxvY2l0eVggPSAwLjMgKiBldmVudC52ZWxvY2l0eVggKyAwLjcgKiBldmVudC5kZWx0YVggLyB0aW1lO1xuXHRcdGV2ZW50LnZlbG9jaXR5WSA9IDAuMyAqIGV2ZW50LnZlbG9jaXR5WSArIDAuNyAqIGV2ZW50LmRlbHRhWSAvIHRpbWU7XG5cdFx0ZXZlbnQucGFnZVggPSAgdG91Y2gucGFnZVg7XG5cdFx0ZXZlbnQucGFnZVkgPSAgdG91Y2gucGFnZVk7XG5cdH1cblxuXHRmdW5jdGlvbiBlbmRFdmVudCh0YXJnZXQsIGV2ZW50LCB0aW1lciwgZm4pIHtcblx0XHR0aW1lci5lbmQoZnVuY3Rpb24oKXtcblx0XHRcdHRyaWdnZXIodGFyZ2V0LCAnbW92ZWVuZCcsIGV2ZW50KTtcblx0XHRcdHJldHVybiBmbiAmJiBmbigpO1xuXHRcdH0pO1xuXHR9XG5cblxuXHQvLyBTZXQgdXAgdGhlIERPTVxuXG5cdGZ1bmN0aW9uIG1vdmVzdGFydChlKSB7XG5cdFx0aWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgeyByZXR1cm47IH1cblx0XHRpZiAoIWUubW92ZUVuYWJsZWQpIHsgcmV0dXJuOyB9XG5cblx0XHR2YXIgZXZlbnQgPSB7XG5cdFx0XHRzdGFydFg6ICAgICAgICBlLnN0YXJ0WCxcblx0XHRcdHN0YXJ0WTogICAgICAgIGUuc3RhcnRZLFxuXHRcdFx0cGFnZVg6ICAgICAgICAgZS5wYWdlWCxcblx0XHRcdHBhZ2VZOiAgICAgICAgIGUucGFnZVksXG5cdFx0XHRkaXN0WDogICAgICAgICBlLmRpc3RYLFxuXHRcdFx0ZGlzdFk6ICAgICAgICAgZS5kaXN0WSxcblx0XHRcdGRlbHRhWDogICAgICAgIGUuZGVsdGFYLFxuXHRcdFx0ZGVsdGFZOiAgICAgICAgZS5kZWx0YVksXG5cdFx0XHR2ZWxvY2l0eVg6ICAgICBlLnZlbG9jaXR5WCxcblx0XHRcdHZlbG9jaXR5WTogICAgIGUudmVsb2NpdHlZLFxuXHRcdFx0aWRlbnRpZmllcjogICAgZS5pZGVudGlmaWVyLFxuXHRcdFx0dGFyZ2V0VG91Y2hlczogZS50YXJnZXRUb3VjaGVzLFxuXHRcdFx0ZmluZ2VyOiAgICAgICAgZS5maW5nZXJcblx0XHR9O1xuXG5cdFx0dmFyIGRhdGEgPSB7XG5cdFx0XHR0YXJnZXQ6ICAgIGUudGFyZ2V0LFxuXHRcdFx0ZXZlbnQ6ICAgICBldmVudCxcblx0XHRcdHRpbWVyOiAgICAgbmV3IFRpbWVyKHVwZGF0ZSksXG5cdFx0XHR0b3VjaDogICAgIHVuZGVmaW5lZCxcblx0XHRcdHRpbWVTdGFtcDogZS50aW1lU3RhbXBcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKHRpbWUpIHtcblx0XHRcdHVwZGF0ZUV2ZW50KGV2ZW50LCBkYXRhLnRvdWNoLCBkYXRhLnRpbWVTdGFtcCk7XG5cdFx0XHR0cmlnZ2VyKGRhdGEudGFyZ2V0LCAnbW92ZScsIGV2ZW50KTtcblx0XHR9XG5cblx0XHRpZiAoZS5pZGVudGlmaWVyID09PSB1bmRlZmluZWQpIHtcblx0XHRcdC8vIFdlJ3JlIGRlYWxpbmcgd2l0aCBhIG1vdXNlIGV2ZW50LlxuXHRcdFx0Ly8gU3RvcCBjbGlja3MgZnJvbSBwcm9wYWdhdGluZyBkdXJpbmcgYSBtb3ZlXG5cdFx0XHRvbihlLnRhcmdldCwgJ2NsaWNrJywgcHJldmVudERlZmF1bHQpO1xuXHRcdFx0b24oZG9jdW1lbnQsIG1vdXNlZXZlbnRzLm1vdmUsIGFjdGl2ZU1vdXNlbW92ZSwgZGF0YSk7XG5cdFx0XHRvbihkb2N1bWVudCwgbW91c2VldmVudHMuZW5kLCBhY3RpdmVNb3VzZWVuZCwgZGF0YSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0Ly8gSW4gb3JkZXIgdG8gdW5iaW5kIGNvcnJlY3QgaGFuZGxlcnMgdGhleSBoYXZlIHRvIGJlIHVuaXF1ZVxuXHRcdFx0ZGF0YS5hY3RpdmVUb3VjaG1vdmUgPSBmdW5jdGlvbihlLCBkYXRhKSB7IGFjdGl2ZVRvdWNobW92ZShlLCBkYXRhKTsgfTtcblx0XHRcdGRhdGEuYWN0aXZlVG91Y2hlbmQgPSBmdW5jdGlvbihlLCBkYXRhKSB7IGFjdGl2ZVRvdWNoZW5kKGUsIGRhdGEpOyB9O1xuXG5cdFx0XHQvLyBXZSdyZSBkZWFsaW5nIHdpdGggYSB0b3VjaC5cblx0XHRcdG9uKGRvY3VtZW50LCB0b3VjaGV2ZW50cy5tb3ZlLCBkYXRhLmFjdGl2ZVRvdWNobW92ZSwgZGF0YSk7XG5cdFx0XHRvbihkb2N1bWVudCwgdG91Y2hldmVudHMuZW5kLCBkYXRhLmFjdGl2ZVRvdWNoZW5kLCBkYXRhKTtcblx0XHR9XG5cdH1cblxuXHRvbihkb2N1bWVudCwgJ21vdXNlZG93bicsIG1vdXNlZG93bik7XG5cdG9uKGRvY3VtZW50LCAndG91Y2hzdGFydCcsIHRvdWNoc3RhcnQpO1xuXHRvbihkb2N1bWVudCwgJ21vdmVzdGFydCcsIG1vdmVzdGFydCk7XG5cblxuXHQvLyBqUXVlcnkgc3BlY2lhbCBldmVudHNcblx0Ly9cblx0Ly8galF1ZXJ5IGV2ZW50IG9iamVjdHMgYXJlIGNvcGllcyBvZiBET00gZXZlbnQgb2JqZWN0cy4gVGhleSBuZWVkXG5cdC8vIGEgbGl0dGxlIGhlbHAgY29weWluZyB0aGUgbW92ZSBwcm9wZXJ0aWVzIGFjcm9zcy5cblxuXHRpZiAoIXdpbmRvdy5qUXVlcnkpIHsgcmV0dXJuOyB9XG5cblx0dmFyIHByb3BlcnRpZXMgPSAoXCJzdGFydFggc3RhcnRZIHBhZ2VYIHBhZ2VZIGRpc3RYIGRpc3RZIGRlbHRhWCBkZWx0YVkgdmVsb2NpdHlYIHZlbG9jaXR5WVwiKS5zcGxpdCgnICcpO1xuXG5cdGZ1bmN0aW9uIGVuYWJsZU1vdmUxKGUpIHsgZS5lbmFibGVNb3ZlKCk7IH1cblx0ZnVuY3Rpb24gZW5hYmxlTW92ZTIoZSkgeyBlLmVuYWJsZU1vdmUoKTsgfVxuXHRmdW5jdGlvbiBlbmFibGVNb3ZlMyhlKSB7IGUuZW5hYmxlTW92ZSgpOyB9XG5cblx0ZnVuY3Rpb24gYWRkKGhhbmRsZU9iaikge1xuXHRcdHZhciBoYW5kbGVyID0gaGFuZGxlT2JqLmhhbmRsZXI7XG5cblx0XHRoYW5kbGVPYmouaGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0XHRcdC8vIENvcHkgbW92ZSBwcm9wZXJ0aWVzIGFjcm9zcyBmcm9tIG9yaWdpbmFsRXZlbnRcblx0XHRcdHZhciBpID0gcHJvcGVydGllcy5sZW5ndGg7XG5cdFx0XHR2YXIgcHJvcGVydHk7XG5cblx0XHRcdHdoaWxlKGktLSkge1xuXHRcdFx0XHRwcm9wZXJ0eSA9IHByb3BlcnRpZXNbaV07XG5cdFx0XHRcdGVbcHJvcGVydHldID0gZS5vcmlnaW5hbEV2ZW50W3Byb3BlcnR5XTtcblx0XHRcdH1cblxuXHRcdFx0aGFuZGxlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdH07XG5cdH1cblxuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbC5tb3Zlc3RhcnQgPSB7XG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gTW92ZXN0YXJ0IG11c3QgYmUgZW5hYmxlZCB0byBhbGxvdyBvdGhlciBtb3ZlIGV2ZW50c1xuXHRcdFx0b24odGhpcywgJ21vdmVzdGFydCcsIGVuYWJsZU1vdmUxKTtcblxuXHRcdFx0Ly8gRG8gbGlzdGVuIHRvIERPTSBldmVudHNcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xuXHRcdFx0b2ZmKHRoaXMsICdtb3Zlc3RhcnQnLCBlbmFibGVNb3ZlMSk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblxuXHRcdGFkZDogYWRkXG5cdH07XG5cblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWwubW92ZSA9IHtcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cdFx0XHRvbih0aGlzLCAnbW92ZXN0YXJ0JywgZW5hYmxlTW92ZTIpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRvZmYodGhpcywgJ21vdmVzdGFydCcsIGVuYWJsZU1vdmUyKTtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXG5cdFx0YWRkOiBhZGRcblx0fTtcblxuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbC5tb3ZlZW5kID0ge1xuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdG9uKHRoaXMsICdtb3Zlc3RhcnQnLCBlbmFibGVNb3ZlMyk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcblx0XHRcdG9mZih0aGlzLCAnbW92ZXN0YXJ0JywgZW5hYmxlTW92ZTMpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cblx0XHRhZGQ6IGFkZFxuXHR9O1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7124\n")},5618:()=>{eval('(function($){\n\n  $.fn.twentytwenty = function(options) {\n    var options = $.extend({\n      default_offset_pct: 0.5,\n      orientation: \'horizontal\',\n      before_label: \'Before\',\n      after_label: \'After\',\n      no_overlay: false,\n      move_slider_on_hover: false,\n      move_with_handle_only: true,\n      click_to_move: false\n    }, options);\n\n    return this.each(function() {\n\n      var sliderPct = options.default_offset_pct;\n      var container = $(this);\n      var sliderOrientation = options.orientation;\n      var beforeDirection = (sliderOrientation === \'vertical\') ? \'down\' : \'left\';\n      var afterDirection = (sliderOrientation === \'vertical\') ? \'up\' : \'right\';\n\n\n      container.wrap("<div class=\'twentytwenty-wrapper twentytwenty-" + sliderOrientation + "\'></div>");\n      if(!options.no_overlay) {\n        container.append("<div class=\'twentytwenty-overlay\'></div>");\n        var overlay = container.find(".twentytwenty-overlay");\n        overlay.append("<div class=\'twentytwenty-before-label\' data-content=\'"+options.before_label+"\'></div>");\n        overlay.append("<div class=\'twentytwenty-after-label\' data-content=\'"+options.after_label+"\'></div>");\n      }\n      var beforeImg = container.find("img:first");\n      var afterImg = container.find("img:last");\n      container.append("<div class=\'twentytwenty-handle\'></div>");\n      var slider = container.find(".twentytwenty-handle");\n      slider.append("<span class=\'twentytwenty-" + beforeDirection + "-arrow\'></span>");\n      slider.append("<span class=\'twentytwenty-" + afterDirection + "-arrow\'></span>");\n      container.addClass("twentytwenty-container");\n      beforeImg.addClass("twentytwenty-before");\n      afterImg.addClass("twentytwenty-after");\n      \n      var calcOffset = function(dimensionPct) {\n        var w = beforeImg.width();\n        var h = beforeImg.height();\n        return {\n          w: w+"px",\n          h: h+"px",\n          cw: (dimensionPct*w)+"px",\n          ch: (dimensionPct*h)+"px"\n        };\n      };\n\n      var adjustContainer = function(offset) {\n      \tif (sliderOrientation === \'vertical\') {\n          beforeImg.css("clip", "rect(0,"+offset.w+","+offset.ch+",0)");\n          afterImg.css("clip", "rect("+offset.ch+","+offset.w+","+offset.h+",0)");\n      \t}\n      \telse {\n          beforeImg.css("clip", "rect(0,"+offset.cw+","+offset.h+",0)");\n          afterImg.css("clip", "rect(0,"+offset.w+","+offset.h+","+offset.cw+")");\n    \t}\n        container.css("height", offset.h);\n      };\n\n      var adjustSlider = function(pct) {\n        var offset = calcOffset(pct);\n        slider.css((sliderOrientation==="vertical") ? "top" : "left", (sliderOrientation==="vertical") ? offset.ch : offset.cw);\n        adjustContainer(offset);\n      };\n\n      // Return the number specified or the min/max number if it outside the range given.\n      var minMaxNumber = function(num, min, max) {\n        return Math.max(min, Math.min(max, num));\n      };\n\n      // Calculate the slider percentage based on the position.\n      var getSliderPercentage = function(positionX, positionY) {\n        var sliderPercentage = (sliderOrientation === \'vertical\') ?\n          (positionY-offsetY)/imgHeight :\n          (positionX-offsetX)/imgWidth;\n\n        return minMaxNumber(sliderPercentage, 0, 1);\n      };\n\n\n      $(window).on("resize.twentytwenty", function(e) {\n        adjustSlider(sliderPct);\n      });\n\n      var offsetX = 0;\n      var offsetY = 0;\n      var imgWidth = 0;\n      var imgHeight = 0;\n      var onMoveStart = function(e) {\n        if (((e.distX > e.distY && e.distX < -e.distY) || (e.distX < e.distY && e.distX > -e.distY)) && sliderOrientation !== \'vertical\') {\n          e.preventDefault();\n        }\n        else if (((e.distX < e.distY && e.distX < -e.distY) || (e.distX > e.distY && e.distX > -e.distY)) && sliderOrientation === \'vertical\') {\n          e.preventDefault();\n        }\n        container.addClass("active");\n        offsetX = container.offset().left;\n        offsetY = container.offset().top;\n        imgWidth = beforeImg.width(); \n        imgHeight = beforeImg.height();          \n      };\n      var onMove = function(e) {\n        if (container.hasClass("active")) {\n          sliderPct = getSliderPercentage(e.pageX, e.pageY);\n          adjustSlider(sliderPct);\n        }\n      };\n      var onMoveEnd = function() {\n          container.removeClass("active");\n      };\n\n      var moveTarget = options.move_with_handle_only ? slider : container;\n      moveTarget.on("movestart",onMoveStart);\n      moveTarget.on("move",onMove);\n      moveTarget.on("moveend",onMoveEnd);\n\n      if (options.move_slider_on_hover) {\n        container.on("mouseenter", onMoveStart);\n        container.on("mousemove", onMove);\n        container.on("mouseleave", onMoveEnd);\n      }\n\n      slider.on("touchmove", function(e) {\n        e.preventDefault();\n      });\n\n      container.find("img").on("mousedown", function(event) {\n        event.preventDefault();\n      });\n\n      if (options.click_to_move) {\n        container.on(\'click\', function(e) {\n          offsetX = container.offset().left;\n          offsetY = container.offset().top;\n          imgWidth = beforeImg.width();\n          imgHeight = beforeImg.height();\n\n          sliderPct = getSliderPercentage(e.pageX, e.pageY);\n          adjustSlider(sliderPct);\n        });\n      }\n\n      $(window).trigger("resize.twentytwenty");\n    });\n  };\n\n})(jQuery);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTYxOC5qcyIsIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQSxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd3AvLi9ub2RlX21vZHVsZXMvenVyYi10d2VudHl0d2VudHkvanMvanF1ZXJ5LnR3ZW50eXR3ZW50eS5qcz81MzM4Il0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKXtcblxuICAkLmZuLnR3ZW50eXR3ZW50eSA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB2YXIgb3B0aW9ucyA9ICQuZXh0ZW5kKHtcbiAgICAgIGRlZmF1bHRfb2Zmc2V0X3BjdDogMC41LFxuICAgICAgb3JpZW50YXRpb246ICdob3Jpem9udGFsJyxcbiAgICAgIGJlZm9yZV9sYWJlbDogJ0JlZm9yZScsXG4gICAgICBhZnRlcl9sYWJlbDogJ0FmdGVyJyxcbiAgICAgIG5vX292ZXJsYXk6IGZhbHNlLFxuICAgICAgbW92ZV9zbGlkZXJfb25faG92ZXI6IGZhbHNlLFxuICAgICAgbW92ZV93aXRoX2hhbmRsZV9vbmx5OiB0cnVlLFxuICAgICAgY2xpY2tfdG9fbW92ZTogZmFsc2VcbiAgICB9LCBvcHRpb25zKTtcblxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciBzbGlkZXJQY3QgPSBvcHRpb25zLmRlZmF1bHRfb2Zmc2V0X3BjdDtcbiAgICAgIHZhciBjb250YWluZXIgPSAkKHRoaXMpO1xuICAgICAgdmFyIHNsaWRlck9yaWVudGF0aW9uID0gb3B0aW9ucy5vcmllbnRhdGlvbjtcbiAgICAgIHZhciBiZWZvcmVEaXJlY3Rpb24gPSAoc2xpZGVyT3JpZW50YXRpb24gPT09ICd2ZXJ0aWNhbCcpID8gJ2Rvd24nIDogJ2xlZnQnO1xuICAgICAgdmFyIGFmdGVyRGlyZWN0aW9uID0gKHNsaWRlck9yaWVudGF0aW9uID09PSAndmVydGljYWwnKSA/ICd1cCcgOiAncmlnaHQnO1xuXG5cbiAgICAgIGNvbnRhaW5lci53cmFwKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LXdyYXBwZXIgdHdlbnR5dHdlbnR5LVwiICsgc2xpZGVyT3JpZW50YXRpb24gKyBcIic+PC9kaXY+XCIpO1xuICAgICAgaWYoIW9wdGlvbnMubm9fb3ZlcmxheSkge1xuICAgICAgICBjb250YWluZXIuYXBwZW5kKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LW92ZXJsYXknPjwvZGl2PlwiKTtcbiAgICAgICAgdmFyIG92ZXJsYXkgPSBjb250YWluZXIuZmluZChcIi50d2VudHl0d2VudHktb3ZlcmxheVwiKTtcbiAgICAgICAgb3ZlcmxheS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSd0d2VudHl0d2VudHktYmVmb3JlLWxhYmVsJyBkYXRhLWNvbnRlbnQ9J1wiK29wdGlvbnMuYmVmb3JlX2xhYmVsK1wiJz48L2Rpdj5cIik7XG4gICAgICAgIG92ZXJsYXkuYXBwZW5kKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LWFmdGVyLWxhYmVsJyBkYXRhLWNvbnRlbnQ9J1wiK29wdGlvbnMuYWZ0ZXJfbGFiZWwrXCInPjwvZGl2PlwiKTtcbiAgICAgIH1cbiAgICAgIHZhciBiZWZvcmVJbWcgPSBjb250YWluZXIuZmluZChcImltZzpmaXJzdFwiKTtcbiAgICAgIHZhciBhZnRlckltZyA9IGNvbnRhaW5lci5maW5kKFwiaW1nOmxhc3RcIik7XG4gICAgICBjb250YWluZXIuYXBwZW5kKFwiPGRpdiBjbGFzcz0ndHdlbnR5dHdlbnR5LWhhbmRsZSc+PC9kaXY+XCIpO1xuICAgICAgdmFyIHNsaWRlciA9IGNvbnRhaW5lci5maW5kKFwiLnR3ZW50eXR3ZW50eS1oYW5kbGVcIik7XG4gICAgICBzbGlkZXIuYXBwZW5kKFwiPHNwYW4gY2xhc3M9J3R3ZW50eXR3ZW50eS1cIiArIGJlZm9yZURpcmVjdGlvbiArIFwiLWFycm93Jz48L3NwYW4+XCIpO1xuICAgICAgc2xpZGVyLmFwcGVuZChcIjxzcGFuIGNsYXNzPSd0d2VudHl0d2VudHktXCIgKyBhZnRlckRpcmVjdGlvbiArIFwiLWFycm93Jz48L3NwYW4+XCIpO1xuICAgICAgY29udGFpbmVyLmFkZENsYXNzKFwidHdlbnR5dHdlbnR5LWNvbnRhaW5lclwiKTtcbiAgICAgIGJlZm9yZUltZy5hZGRDbGFzcyhcInR3ZW50eXR3ZW50eS1iZWZvcmVcIik7XG4gICAgICBhZnRlckltZy5hZGRDbGFzcyhcInR3ZW50eXR3ZW50eS1hZnRlclwiKTtcbiAgICAgIFxuICAgICAgdmFyIGNhbGNPZmZzZXQgPSBmdW5jdGlvbihkaW1lbnNpb25QY3QpIHtcbiAgICAgICAgdmFyIHcgPSBiZWZvcmVJbWcud2lkdGgoKTtcbiAgICAgICAgdmFyIGggPSBiZWZvcmVJbWcuaGVpZ2h0KCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdzogdytcInB4XCIsXG4gICAgICAgICAgaDogaCtcInB4XCIsXG4gICAgICAgICAgY3c6IChkaW1lbnNpb25QY3QqdykrXCJweFwiLFxuICAgICAgICAgIGNoOiAoZGltZW5zaW9uUGN0KmgpK1wicHhcIlxuICAgICAgICB9O1xuICAgICAgfTtcblxuICAgICAgdmFyIGFkanVzdENvbnRhaW5lciA9IGZ1bmN0aW9uKG9mZnNldCkge1xuICAgICAgXHRpZiAoc2xpZGVyT3JpZW50YXRpb24gPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICBiZWZvcmVJbWcuY3NzKFwiY2xpcFwiLCBcInJlY3QoMCxcIitvZmZzZXQudytcIixcIitvZmZzZXQuY2grXCIsMClcIik7XG4gICAgICAgICAgYWZ0ZXJJbWcuY3NzKFwiY2xpcFwiLCBcInJlY3QoXCIrb2Zmc2V0LmNoK1wiLFwiK29mZnNldC53K1wiLFwiK29mZnNldC5oK1wiLDApXCIpO1xuICAgICAgXHR9XG4gICAgICBcdGVsc2Uge1xuICAgICAgICAgIGJlZm9yZUltZy5jc3MoXCJjbGlwXCIsIFwicmVjdCgwLFwiK29mZnNldC5jdytcIixcIitvZmZzZXQuaCtcIiwwKVwiKTtcbiAgICAgICAgICBhZnRlckltZy5jc3MoXCJjbGlwXCIsIFwicmVjdCgwLFwiK29mZnNldC53K1wiLFwiK29mZnNldC5oK1wiLFwiK29mZnNldC5jdytcIilcIik7XG4gICAgXHR9XG4gICAgICAgIGNvbnRhaW5lci5jc3MoXCJoZWlnaHRcIiwgb2Zmc2V0LmgpO1xuICAgICAgfTtcblxuICAgICAgdmFyIGFkanVzdFNsaWRlciA9IGZ1bmN0aW9uKHBjdCkge1xuICAgICAgICB2YXIgb2Zmc2V0ID0gY2FsY09mZnNldChwY3QpO1xuICAgICAgICBzbGlkZXIuY3NzKChzbGlkZXJPcmllbnRhdGlvbj09PVwidmVydGljYWxcIikgPyBcInRvcFwiIDogXCJsZWZ0XCIsIChzbGlkZXJPcmllbnRhdGlvbj09PVwidmVydGljYWxcIikgPyBvZmZzZXQuY2ggOiBvZmZzZXQuY3cpO1xuICAgICAgICBhZGp1c3RDb250YWluZXIob2Zmc2V0KTtcbiAgICAgIH07XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbnVtYmVyIHNwZWNpZmllZCBvciB0aGUgbWluL21heCBudW1iZXIgaWYgaXQgb3V0c2lkZSB0aGUgcmFuZ2UgZ2l2ZW4uXG4gICAgICB2YXIgbWluTWF4TnVtYmVyID0gZnVuY3Rpb24obnVtLCBtaW4sIG1heCkge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbihtYXgsIG51bSkpO1xuICAgICAgfTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBzbGlkZXIgcGVyY2VudGFnZSBiYXNlZCBvbiB0aGUgcG9zaXRpb24uXG4gICAgICB2YXIgZ2V0U2xpZGVyUGVyY2VudGFnZSA9IGZ1bmN0aW9uKHBvc2l0aW9uWCwgcG9zaXRpb25ZKSB7XG4gICAgICAgIHZhciBzbGlkZXJQZXJjZW50YWdlID0gKHNsaWRlck9yaWVudGF0aW9uID09PSAndmVydGljYWwnKSA/XG4gICAgICAgICAgKHBvc2l0aW9uWS1vZmZzZXRZKS9pbWdIZWlnaHQgOlxuICAgICAgICAgIChwb3NpdGlvblgtb2Zmc2V0WCkvaW1nV2lkdGg7XG5cbiAgICAgICAgcmV0dXJuIG1pbk1heE51bWJlcihzbGlkZXJQZXJjZW50YWdlLCAwLCAxKTtcbiAgICAgIH07XG5cblxuICAgICAgJCh3aW5kb3cpLm9uKFwicmVzaXplLnR3ZW50eXR3ZW50eVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGFkanVzdFNsaWRlcihzbGlkZXJQY3QpO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBvZmZzZXRYID0gMDtcbiAgICAgIHZhciBvZmZzZXRZID0gMDtcbiAgICAgIHZhciBpbWdXaWR0aCA9IDA7XG4gICAgICB2YXIgaW1nSGVpZ2h0ID0gMDtcbiAgICAgIHZhciBvbk1vdmVTdGFydCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaWYgKCgoZS5kaXN0WCA+IGUuZGlzdFkgJiYgZS5kaXN0WCA8IC1lLmRpc3RZKSB8fCAoZS5kaXN0WCA8IGUuZGlzdFkgJiYgZS5kaXN0WCA+IC1lLmRpc3RZKSkgJiYgc2xpZGVyT3JpZW50YXRpb24gIT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKChlLmRpc3RYIDwgZS5kaXN0WSAmJiBlLmRpc3RYIDwgLWUuZGlzdFkpIHx8IChlLmRpc3RYID4gZS5kaXN0WSAmJiBlLmRpc3RYID4gLWUuZGlzdFkpKSAmJiBzbGlkZXJPcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICAgIG9mZnNldFggPSBjb250YWluZXIub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgb2Zmc2V0WSA9IGNvbnRhaW5lci5vZmZzZXQoKS50b3A7XG4gICAgICAgIGltZ1dpZHRoID0gYmVmb3JlSW1nLndpZHRoKCk7IFxuICAgICAgICBpbWdIZWlnaHQgPSBiZWZvcmVJbWcuaGVpZ2h0KCk7ICAgICAgICAgIFxuICAgICAgfTtcbiAgICAgIHZhciBvbk1vdmUgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmIChjb250YWluZXIuaGFzQ2xhc3MoXCJhY3RpdmVcIikpIHtcbiAgICAgICAgICBzbGlkZXJQY3QgPSBnZXRTbGlkZXJQZXJjZW50YWdlKGUucGFnZVgsIGUucGFnZVkpO1xuICAgICAgICAgIGFkanVzdFNsaWRlcihzbGlkZXJQY3QpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdmFyIG9uTW92ZUVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgICAgIH07XG5cbiAgICAgIHZhciBtb3ZlVGFyZ2V0ID0gb3B0aW9ucy5tb3ZlX3dpdGhfaGFuZGxlX29ubHkgPyBzbGlkZXIgOiBjb250YWluZXI7XG4gICAgICBtb3ZlVGFyZ2V0Lm9uKFwibW92ZXN0YXJ0XCIsb25Nb3ZlU3RhcnQpO1xuICAgICAgbW92ZVRhcmdldC5vbihcIm1vdmVcIixvbk1vdmUpO1xuICAgICAgbW92ZVRhcmdldC5vbihcIm1vdmVlbmRcIixvbk1vdmVFbmQpO1xuXG4gICAgICBpZiAob3B0aW9ucy5tb3ZlX3NsaWRlcl9vbl9ob3Zlcikge1xuICAgICAgICBjb250YWluZXIub24oXCJtb3VzZWVudGVyXCIsIG9uTW92ZVN0YXJ0KTtcbiAgICAgICAgY29udGFpbmVyLm9uKFwibW91c2Vtb3ZlXCIsIG9uTW92ZSk7XG4gICAgICAgIGNvbnRhaW5lci5vbihcIm1vdXNlbGVhdmVcIiwgb25Nb3ZlRW5kKTtcbiAgICAgIH1cblxuICAgICAgc2xpZGVyLm9uKFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnRhaW5lci5maW5kKFwiaW1nXCIpLm9uKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKG9wdGlvbnMuY2xpY2tfdG9fbW92ZSkge1xuICAgICAgICBjb250YWluZXIub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgIG9mZnNldFggPSBjb250YWluZXIub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICBvZmZzZXRZID0gY29udGFpbmVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICBpbWdXaWR0aCA9IGJlZm9yZUltZy53aWR0aCgpO1xuICAgICAgICAgIGltZ0hlaWdodCA9IGJlZm9yZUltZy5oZWlnaHQoKTtcblxuICAgICAgICAgIHNsaWRlclBjdCA9IGdldFNsaWRlclBlcmNlbnRhZ2UoZS5wYWdlWCwgZS5wYWdlWSk7XG4gICAgICAgICAgYWRqdXN0U2xpZGVyKHNsaWRlclBjdCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAkKHdpbmRvdykudHJpZ2dlcihcInJlc2l6ZS50d2VudHl0d2VudHlcIik7XG4gICAgfSk7XG4gIH07XG5cbn0pKGpRdWVyeSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5618\n')},19567:g=>{"use strict";g.exports=window.jQuery}},__webpack_module_cache__={};function __webpack_require__(g){var I=__webpack_module_cache__[g];if(void 0!==I)return I.exports;var n=__webpack_module_cache__[g]={exports:{}};return __webpack_modules__[g].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=g=>{var I=g&&g.__esModule?()=>g.default:()=>g;return __webpack_require__.d(I,{a:I}),I},__webpack_require__.d=(g,I)=>{for(var n in I)__webpack_require__.o(I,n)&&!__webpack_require__.o(g,n)&&Object.defineProperty(g,n,{enumerable:!0,get:I[n]})},__webpack_require__.o=(g,I)=>Object.prototype.hasOwnProperty.call(g,I),__webpack_require__.r=g=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(59074);(window.wp=window.wp||{})["gutenbee.scripts"]=__webpack_exports__})();